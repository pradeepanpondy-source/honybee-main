var Wi=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);import{r as Vi,a as Hi,b as qt,g as Ji}from"./vendor-CE4OyIcy.js";import{r as _,R as Zt,L as ge,u as Ke,a as hs,N as oe,B as Gi,b as Ki,c as pe}from"./router-CmOLOSI9.js";var Xp=Wi((pg,Jt)=>{function Yi(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var $r={exports:{}},At={};var Rs;function Xi(){if(Rs)return At;Rs=1;var t=Vi(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,u){var d,p={},f=null,h=null;u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),c.ref!==void 0&&(h=c.ref);for(d in c)s.call(c,d)&&!i.hasOwnProperty(d)&&(p[d]=c[d]);if(l&&l.defaultProps)for(d in c=l.defaultProps,c)p[d]===void 0&&(p[d]=c[d]);return{$$typeof:e,type:l,key:f,ref:h,props:p,_owner:a.current}}return At.Fragment=r,At.jsx=o,At.jsxs=o,At}var $s;function Qi(){return $s||($s=1,$r.exports=Xi()),$r.exports}var n=Qi(),Gt={},Is;function eo(){if(Is)return Gt;Is=1;var t=Hi();return Gt.createRoot=t.createRoot,Gt.hydrateRoot=t.hydrateRoot,Gt}var to=eo();function ro(t={}){const{nonce:e,onScriptLoadSuccess:r,onScriptLoadError:s}=t,[a,i]=_.useState(!1),o=_.useRef(r);o.current=r;const l=_.useRef(s);return l.current=s,_.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=e,c.onload=()=>{var u;i(!0),(u=o.current)===null||u===void 0||u.call(o)},c.onerror=()=>{var u;i(!1),(u=l.current)===null||u===void 0||u.call(l)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[e]),a}const so=_.createContext(null);function no({clientId:t,nonce:e,onScriptLoadSuccess:r,onScriptLoadError:s,children:a}){const i=ro({nonce:e,onScriptLoadSuccess:r,onScriptLoadError:s}),o=_.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:i}),[t,i]);return Zt.createElement(so.Provider,{value:o},a)}const ao="/assets/fnd-B8xR8oYh.png",io=({text:t,className:e="",animationDelayStep:r=.1})=>n.jsx("span",{className:`font-extrabold ${e}`,style:{display:"block"},children:t.split("").map((s,a)=>n.jsx("span",{className:"inline-block letter-wave",style:{animationDelay:`${a*r}s`,animationPlayState:"running"},children:s===" "?"Â ":s},a))});function oo(){const[t,e]=_.useState(!0);return _.useEffect(()=>{if(sessionStorage.getItem("fromLogin")){sessionStorage.removeItem("fromLogin"),e(!0);const s=setTimeout(()=>e(!1),2e3);return()=>clearTimeout(s)}else{const s=setTimeout(()=>e(!1),1e3);return()=>clearTimeout(s)}},[]),n.jsxs("div",{children:[t&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 pointer-events-none",children:Zt.createElement("dotlottie-wc",{src:"https://lottie.host/81653027-58d6-47e3-9de5-491db6a527a5/TWNyD5vQVe.lottie",style:{width:"150px",height:"150px",opacity:.3},autoplay:!0,loop:!0})}),n.jsx("div",{className:"relative min-h-screen gradient-bg-warm",children:n.jsxs("div",{className:"relative z-20 pt-[80px]",children:[n.jsx("div",{className:"max-w-6xl mx-auto px-4 py-12",children:n.jsxs("div",{className:"text-center mb-16 px-4 sm:px-6",children:[n.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-serif vibrant-text mb-8 font-bold",children:n.jsx(io,{text:"Bee Bridge",animationDelayStep:.1})}),n.jsx("p",{className:"text-lg sm:text-xl text-honeybee-dark max-w-2xl mx-auto mb-10 font-medium",children:"We're the bridge between the farmer's field, the beekeeper's hive, to the honey in your home."}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[n.jsx(ge,{to:"/shop",className:"gradient-bg-primary hover:shadow-2xl text-black font-semibold py-3 px-6 sm:py-4 sm:px-10 rounded-full transition-all duration-300 ease-out modern-shadow-hover transform hover:scale-105",children:"Shop Now"}),n.jsx(ge,{to:"/about",className:"glass-effect bright-border text-honeybee-dark hover:bg-honeybee-primary hover:text-black font-semibold py-3 px-6 sm:py-4 sm:px-10 rounded-full transition-all duration-300 ease-out modern-shadow-hover transform hover:scale-105",children:"Learn More"})]})]})}),n.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-honeybee-dark mb-10 text-center",children:"Connecting Farmers and Consumers"}),n.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-8",children:[n.jsx("img",{src:ao,alt:"Farmers and Consumers",className:"w-full lg:w-1/2 h-64 sm:h-72 md:h-80 object-cover rounded-lg shadow-lg"}),n.jsx("p",{className:"text-base sm:text-lg text-honeybee-dark-brown max-w-xl",children:"Our platform bridges the gap between farmers and consumers, ensuring fresh, organic produce reaches your table directly from the source or become a seller through our marketplace and sell/rent the bee colonies."})]})]})]})}),n.jsx("div",{className:"text-center mb-8",children:n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-honeybee-dark mb-6 text-center",children:"Service"})}),n.jsx("section",{className:"py-12 sm:py-16 md:py-20 bg-white",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4 md:gap-0",children:[n.jsx("video",{src:"/assets/cart-animated-icon-gif-download-10270594.mp4",autoPlay:!0,loop:!0,muted:!0,controls:!1,className:"w-20 h-20 md:w-48 md:h-48",preload:"metadata"}),n.jsx("div",{className:"mx-4 md:mx-8",children:n.jsx("svg",{className:"w-8 h-8 md:w-12 md:h-12 text-black transform md:rotate-0 rotate-90",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})}),n.jsx("video",{src:"/assets/payment-complete-animation-gif-download-4281059.mp4",autoPlay:!0,loop:!0,muted:!0,controls:!1,className:"w-20 h-20 md:w-48 md:h-48",preload:"metadata"}),n.jsx("div",{className:"mx-4 md:mx-8",children:n.jsx("svg",{className:"w-8 h-8 md:w-12 md:h-12 text-black transform md:rotate-0 rotate-90",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})}),n.jsx("video",{src:"/assets/delivery-animation-gif-download-3434735.mp4",autoPlay:!0,loop:!0,muted:!0,controls:!1,className:"w-20 h-20 md:w-48 md:h-48",preload:"metadata"}),n.jsx("div",{className:"mx-4 md:mx-8",children:n.jsx("svg",{className:"w-8 h-8 md:w-12 md:h-12 text-black transform md:rotate-0 rotate-90",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})}),n.jsx("video",{src:"/assets/2.mp4",autoPlay:!0,loop:!0,muted:!0,controls:!1,className:"w-20 h-20 md:w-48 md:h-48",preload:"metadata"})]})})}),n.jsx("section",{className:"py-12 sm:py-16 md:py-20 bg-honeybee-light",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsx("div",{className:"text-center mb-12 sm:mb-16",children:n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-honeybee-dark mb-6 text-center",children:"Our Story"})}),n.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[n.jsx("p",{className:"text-base sm:text-lg text-gray-700 leading-relaxed mb-6",children:"At Bee Bridge, our journey began with a deep appreciation for the delicate balance of nature and the hardworking bees that produce nature's golden elixir. We source our honey from sustainable apiaries across the globe, partnering with passionate beekeepers who prioritize environmental stewardship and ethical practices. Each harvest is done with care and love, ensuring that our products not only delight the senses but also support biodiversity and local communities. From the sun-drenched meadows of Europe to the wild landscapes of North America, our commitment to purity and sustainability shines through in every jar. Join us in savoring the authentic taste of organic honey, harvested with respect for the earth and its pollinators."}),n.jsx("p",{className:"text-base sm:text-lg text-gray-700 leading-relaxed",children:"As you explore our collection, you'll feel the warmth of our dedication to quality and the joy of connecting with nature's bounty. We're more than just a marketplace; we're a community united by the love of honey and the bees that make it possible."})]})]})}),n.jsx("section",{className:"py-12 sm:py-16 md:py-20 bg-white",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-12 sm:mb-16",children:[n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-honeybee-dark mb-6",children:"What Our Customers Say"}),n.jsx("p",{className:"text-base sm:text-lg text-gray-600",children:"Hear from farmers, beekeepers, and honey lovers who trust Bee Bridge"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:[n.jsxs("div",{className:"bg-honeybee-light p-4 sm:p-6 rounded-lg shadow-md",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-honeybee-primary rounded-full flex items-center justify-center text-white font-bold text-sm sm:text-base",children:"JD"}),n.jsxs("div",{className:"ml-3 sm:ml-4",children:[n.jsx("h4",{className:"font-semibold text-honeybee-dark text-sm sm:text-base",children:"John Doe"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Organic Farmer"})]})]}),n.jsx("p",{className:"text-gray-700 italic text-sm sm:text-base",children:'"Bee Bridge has revolutionized how I sell my honey. The platform is easy to use and connects me directly with consumers who appreciate quality."'})]}),n.jsxs("div",{className:"bg-honeybee-light p-4 sm:p-6 rounded-lg shadow-md",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-honeybee-primary rounded-full flex items-center justify-center text-white font-bold text-sm sm:text-base",children:"SM"}),n.jsxs("div",{className:"ml-3 sm:ml-4",children:[n.jsx("h4",{className:"font-semibold text-honeybee-dark text-sm sm:text-base",children:"Sarah Miller"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Home Chef"})]})]}),n.jsx("p",{className:"text-gray-700 italic text-sm sm:text-base",children:`"The honey from Bee Bridge is pure and delicious. I love knowing it's sourced sustainably and supports local beekeepers."`})]}),n.jsxs("div",{className:"bg-honeybee-light p-4 sm:p-6 rounded-lg shadow-md",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-honeybee-primary rounded-full flex items-center justify-center text-white font-bold text-sm sm:text-base",children:"RB"}),n.jsxs("div",{className:"ml-3 sm:ml-4",children:[n.jsx("h4",{className:"font-semibold text-honeybee-dark text-sm sm:text-base",children:"Robert Brown"}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Beekeeper"})]})]}),n.jsx("p",{className:"text-gray-700 italic text-sm sm:text-base",children:`"Partnering with Bee Bridge has allowed me to focus on beekeeping while they handle the marketplace. It's a win-win for everyone."`})]})]})]})})]})}const lo=()=>n.jsx("div",{className:"bg-honeybee-background text-honeybee-secondary",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-24",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-3xl md:text-4xl font-serif font-bold text-honeybee-primary",children:"About Bee Bridge"}),n.jsx("p",{className:"mt-4 text-base md:text-lg max-w-2xl mx-auto",children:"Our passion for honey is rooted in a deep respect for nature and the incredible work of bees."})]}),n.jsxs("div",{className:"mt-12 md:mt-20 grid md:grid-cols-2 gap-8 md:gap-16 items-center",children:[n.jsx("div",{children:n.jsx("img",{src:"https://static.vecteezy.com/system/resources/thumbnails/004/454/157/small_2x/honey-can-realistic-composition-vector.jpg",alt:"Beekeeper",className:"rounded-lg shadow-lg w-full"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl md:text-3xl font-serif font-bold mb-4",children:"Our Story"}),n.jsx("p",{className:"mb-4 text-sm md:text-base",children:"Bee Bridge was founded with a simple mission: to bring the purest, most delicious honey from our hives to your home. We believe in sustainable beekeeping practices that prioritize the health of our bees and the environment."}),n.jsx("p",{className:"text-sm md:text-base",children:"Our farms are dedicated to sustainable practices, and through our website, we connect consumers directly with the source, fostering transparency and trust in every jar of honey."})]})]}),n.jsxs("div",{className:"mt-12 md:mt-20 text-center",children:[n.jsx("h2",{className:"text-2xl md:text-3xl font-serif font-bold mb-8",children:"Our Values"}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6 md:gap-12",children:[n.jsxs("div",{className:"p-4 md:p-6 border border-honeybee-light rounded-lg",children:[n.jsx("h3",{className:"text-lg md:text-xl font-serif font-bold mb-2",children:"Sustainability"}),n.jsx("p",{className:"text-sm md:text-base",children:"We are committed to protecting our planet and its precious pollinators."})]}),n.jsxs("div",{className:"p-4 md:p-6 border border-honeybee-light rounded-lg",children:[n.jsx("h3",{className:"text-lg md:text-xl font-serif font-bold mb-2",children:"Quality"}),n.jsx("p",{className:"text-sm md:text-base",children:"We deliver only the finest, 100% pure and raw honey."})]}),n.jsxs("div",{className:"p-4 md:p-6 border border-honeybee-light rounded-lg",children:[n.jsx("h3",{className:"text-lg md:text-xl font-serif font-bold mb-2",children:"Community"}),n.jsx("p",{className:"text-sm md:text-base",children:"We support local beekeepers and educate our community about the importance of bees."})]})]})]})]})}),co={primary:"gradient-bg-primary hover:shadow-2xl text-black hover:text-black border-0 modern-shadow-hover transform hover:scale-105",secondary:"bg-honeybee-secondary hover:bg-honeybee-accent text-white modern-shadow-hover",accent:"gradient-bg-accent hover:shadow-xl text-white modern-shadow-hover transform hover:scale-105",ghost:"hover:bg-gray-100/10 text-honeybee-primary hover:text-honeybee-accent",light:"glass-effect text-honeybee-dark hover:bg-honeybee-primary hover:text-black modern-shadow-hover"},uo={default:"py-3 px-6",icon:"h-10 w-10"},je=({children:t,variant:e="primary",size:r="default",className:s="",onClick:a,...i})=>{const[o,l]=_.useState(!1),[c,u]=_.useState({}),d=p=>{const h=p.currentTarget.getBoundingClientRect(),m=Math.max(h.width,h.height),g=p.clientX-h.left-m/2,b=p.clientY-h.top-m/2;u({width:m,height:m,left:g,top:b}),l(!0),setTimeout(()=>l(!1),600),a&&a(p)};return n.jsxs("button",{className:`relative overflow-hidden rounded-lg shadow-lg transition-all duration-500 cubic-bezier(0.4, 0, 0.2, 1) focus:outline-none focus:ring-4 focus:ring-honeybee-accent ${co[e]} ${uo[r]} ${s}`,onClick:d,...i,children:[t,o&&n.jsx("span",{className:"button-ripple absolute",style:c})]})};function j(t,e,r){function s(l,c){if(l._zod||Object.defineProperty(l,"_zod",{value:{def:c,constr:o,traits:new Set},enumerable:!1}),l._zod.traits.has(t))return;l._zod.traits.add(t),e(l,c);const u=o.prototype,d=Object.keys(u);for(let p=0;p<d.length;p++){const f=d[p];f in l||(l[f]=u[f].bind(l))}}const a=r?.Parent??Object;class i extends a{}Object.defineProperty(i,"name",{value:t});function o(l){var c;const u=r?.Parent?new i:this;s(u,l),(c=u._zod).deferred??(c.deferred=[]);for(const d of u._zod.deferred)d();return u}return Object.defineProperty(o,"init",{value:s}),Object.defineProperty(o,Symbol.hasInstance,{value:l=>r?.Parent&&l instanceof r.Parent?!0:l?._zod?.traits?.has(t)}),Object.defineProperty(o,"name",{value:t}),o}class wt extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Un extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const Mn={};function ct(t){return Mn}function Bn(t){const e=Object.values(t).filter(s=>typeof s=="number");return Object.entries(t).filter(([s,a])=>e.indexOf(+s)===-1).map(([s,a])=>a)}function Vr(t,e){return typeof e=="bigint"?e.toString():e}function fs(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function ps(t){return t==null}function ms(t){const e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}function ho(t,e){const r=(t.toString().split(".")[1]||"").length,s=e.toString();let a=(s.split(".")[1]||"").length;if(a===0&&/\d?e-\d?/.test(s)){const c=s.match(/\d?e-(\d?)/);c?.[1]&&(a=Number.parseInt(c[1]))}const i=r>a?r:a,o=Number.parseInt(t.toFixed(i).replace(".","")),l=Number.parseInt(e.toFixed(i).replace(".",""));return o%l/10**i}const zs=Symbol("evaluating");function K(t,e,r){let s;Object.defineProperty(t,e,{get(){if(s!==zs)return s===void 0&&(s=zs,s=r()),s},set(a){Object.defineProperty(t,e,{value:a})},configurable:!0})}function dt(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Ye(...t){const e={};for(const r of t){const s=Object.getOwnPropertyDescriptors(r);Object.assign(e,s)}return Object.defineProperties({},e)}function Ls(t){return JSON.stringify(t)}function fo(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Fn="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function fr(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const po=fs(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Ut(t){if(fr(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const r=e.prototype;return!(fr(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function qn(t){return Ut(t)?{...t}:Array.isArray(t)?[...t]:t}const mo=new Set(["string","number","symbol"]);function kt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Xe(t,e,r){const s=new t._zod.constr(e??t._zod.def);return(!e||r?.parent)&&(s._zod.parent=t),s}function P(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function go(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const xo={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function bo(t,e){const r=t._zod.def,s=r.checks;if(s&&s.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const i=Ye(t._zod.def,{get shape(){const o={};for(const l in e){if(!(l in r.shape))throw new Error(`Unrecognized key: "${l}"`);e[l]&&(o[l]=r.shape[l])}return dt(this,"shape",o),o},checks:[]});return Xe(t,i)}function yo(t,e){const r=t._zod.def,s=r.checks;if(s&&s.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const i=Ye(t._zod.def,{get shape(){const o={...t._zod.def.shape};for(const l in e){if(!(l in r.shape))throw new Error(`Unrecognized key: "${l}"`);e[l]&&delete o[l]}return dt(this,"shape",o),o},checks:[]});return Xe(t,i)}function vo(t,e){if(!Ut(e))throw new Error("Invalid input to extend: expected a plain object");const r=t._zod.def.checks;if(r&&r.length>0){const i=t._zod.def.shape;for(const o in e)if(Object.getOwnPropertyDescriptor(i,o)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const a=Ye(t._zod.def,{get shape(){const i={...t._zod.def.shape,...e};return dt(this,"shape",i),i}});return Xe(t,a)}function wo(t,e){if(!Ut(e))throw new Error("Invalid input to safeExtend: expected a plain object");const r=Ye(t._zod.def,{get shape(){const s={...t._zod.def.shape,...e};return dt(this,"shape",s),s}});return Xe(t,r)}function _o(t,e){const r=Ye(t._zod.def,{get shape(){const s={...t._zod.def.shape,...e._zod.def.shape};return dt(this,"shape",s),s},get catchall(){return e._zod.def.catchall},checks:[]});return Xe(t,r)}function jo(t,e,r){const a=e._zod.def.checks;if(a&&a.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const o=Ye(e._zod.def,{get shape(){const l=e._zod.def.shape,c={...l};if(r)for(const u in r){if(!(u in l))throw new Error(`Unrecognized key: "${u}"`);r[u]&&(c[u]=t?new t({type:"optional",innerType:l[u]}):l[u])}else for(const u in l)c[u]=t?new t({type:"optional",innerType:l[u]}):l[u];return dt(this,"shape",c),c},checks:[]});return Xe(e,o)}function ko(t,e,r){const s=Ye(e._zod.def,{get shape(){const a=e._zod.def.shape,i={...a};if(r)for(const o in r){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=new t({type:"nonoptional",innerType:a[o]}))}else for(const o in a)i[o]=new t({type:"nonoptional",innerType:a[o]});return dt(this,"shape",i),i}});return Xe(e,s)}function vt(t,e=0){if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(t.issues[r]?.continue!==!0)return!0;return!1}function Zn(t,e){return e.map(r=>{var s;return(s=r).path??(s.path=[]),r.path.unshift(t),r})}function Kt(t){return typeof t=="string"?t:t?.message}function ut(t,e,r){const s={...t,path:t.path??[]};if(!t.message){const a=Kt(t.inst?._zod.def?.error?.(t))??Kt(e?.error?.(t))??Kt(r.customError?.(t))??Kt(r.localeError?.(t))??"Invalid input";s.message=a}return delete s.inst,delete s.continue,e?.reportInput||delete s.input,s}function gs(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Mt(...t){const[e,r,s]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:s}:{...e}}const Wn=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Vr,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Vn=j("$ZodError",Wn),Hn=j("$ZodError",Wn,{Parent:Error});function No(t,e=r=>r.message){const r={},s=[];for(const a of t.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(e(a))):s.push(e(a));return{formErrors:s,fieldErrors:r}}function So(t,e=r=>r.message){const r={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(o=>s({issues:o}));else if(i.code==="invalid_key")s({issues:i.issues});else if(i.code==="invalid_element")s({issues:i.issues});else if(i.path.length===0)r._errors.push(e(i));else{let o=r,l=0;for(;l<i.path.length;){const c=i.path[l];l===i.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(e(i))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return s(t),r}const xs=t=>(e,r,s,a)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},o=e._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new wt;if(o.issues.length){const l=new(a?.Err??t)(o.issues.map(c=>ut(c,i,ct())));throw Fn(l,a?.callee),l}return o.value},bs=t=>async(e,r,s,a)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let o=e._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const l=new(a?.Err??t)(o.issues.map(c=>ut(c,i,ct())));throw Fn(l,a?.callee),l}return o.value},Sr=t=>(e,r,s)=>{const a=s?{...s,async:!1}:{async:!1},i=e._zod.run({value:r,issues:[]},a);if(i instanceof Promise)throw new wt;return i.issues.length?{success:!1,error:new(t??Vn)(i.issues.map(o=>ut(o,a,ct())))}:{success:!0,data:i.value}},Eo=Sr(Hn),Er=t=>async(e,r,s)=>{const a=s?Object.assign(s,{async:!0}):{async:!0};let i=e._zod.run({value:r,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(o=>ut(o,a,ct())))}:{success:!0,data:i.value}},Oo=Er(Hn),Co=t=>(e,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return xs(t)(e,r,a)},To=t=>(e,r,s)=>xs(t)(e,r,s),Po=t=>async(e,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return bs(t)(e,r,a)},Ao=t=>async(e,r,s)=>bs(t)(e,r,s),Ro=t=>(e,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Sr(t)(e,r,a)},$o=t=>(e,r,s)=>Sr(t)(e,r,s),Io=t=>async(e,r,s)=>{const a=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return Er(t)(e,r,a)},zo=t=>async(e,r,s)=>Er(t)(e,r,s),Lo=/^[cC][^\s-]{8,}$/,Do=/^[0-9a-z]+$/,Uo=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Mo=/^[0-9a-vA-V]{20}$/,Bo=/^[A-Za-z0-9]{27}$/,Fo=/^[a-zA-Z0-9_-]{21}$/,qo=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Zo=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Ds=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Wo=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Vo="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Ho(){return new RegExp(Vo,"u")}const Jo=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Go=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Ko=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Yo=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Xo=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Jn=/^[A-Za-z0-9_-]*$/,Qo=/^\+[1-9]\d{6,14}$/,Gn="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",el=new RegExp(`^${Gn}$`);function Kn(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function tl(t){return new RegExp(`^${Kn(t)}$`)}function rl(t){const e=Kn({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${e}(?:${r.join("|")})`;return new RegExp(`^${Gn}T(?:${s})$`)}const sl=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},nl=/^-?\d+$/,al=/^-?\d+(?:\.\d+)?$/,il=/^[^A-Z]*$/,ol=/^[^a-z]*$/,Ce=j("$ZodCheck",(t,e)=>{var r;t._zod??(t._zod={}),t._zod.def=e,(r=t._zod).onattach??(r.onattach=[])}),Yn={number:"number",bigint:"bigint",object:"date"},Xn=j("$ZodCheckLessThan",(t,e)=>{Ce.init(t,e);const r=Yn[typeof e.value];t._zod.onattach.push(s=>{const a=s._zod.bag,i=(e.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?a.maximum=e.value:a.exclusiveMaximum=e.value)}),t._zod.check=s=>{(e.inclusive?s.value<=e.value:s.value<e.value)||s.issues.push({origin:r,code:"too_big",maximum:typeof e.value=="object"?e.value.getTime():e.value,input:s.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Qn=j("$ZodCheckGreaterThan",(t,e)=>{Ce.init(t,e);const r=Yn[typeof e.value];t._zod.onattach.push(s=>{const a=s._zod.bag,i=(e.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?a.minimum=e.value:a.exclusiveMinimum=e.value)}),t._zod.check=s=>{(e.inclusive?s.value>=e.value:s.value>e.value)||s.issues.push({origin:r,code:"too_small",minimum:typeof e.value=="object"?e.value.getTime():e.value,input:s.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),ll=j("$ZodCheckMultipleOf",(t,e)=>{Ce.init(t,e),t._zod.onattach.push(r=>{var s;(s=r._zod.bag).multipleOf??(s.multipleOf=e.value)}),t._zod.check=r=>{if(typeof r.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%e.value===BigInt(0):ho(r.value,e.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:e.value,input:r.value,inst:t,continue:!e.abort})}}),cl=j("$ZodCheckNumberFormat",(t,e)=>{Ce.init(t,e),e.format=e.format||"float64";const r=e.format?.includes("int"),s=r?"int":"number",[a,i]=xo[e.format];t._zod.onattach.push(o=>{const l=o._zod.bag;l.format=e.format,l.minimum=a,l.maximum=i,r&&(l.pattern=nl)}),t._zod.check=o=>{const l=o.value;if(r){if(!Number.isInteger(l)){o.issues.push({expected:s,format:e.format,code:"invalid_type",continue:!1,input:l,inst:t});return}if(!Number.isSafeInteger(l)){l>0?o.issues.push({input:l,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,inclusive:!0,continue:!e.abort}):o.issues.push({input:l,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:s,inclusive:!0,continue:!e.abort});return}}l<a&&o.issues.push({origin:"number",input:l,code:"too_small",minimum:a,inclusive:!0,inst:t,continue:!e.abort}),l>i&&o.issues.push({origin:"number",input:l,code:"too_big",maximum:i,inclusive:!0,inst:t,continue:!e.abort})}}),ul=j("$ZodCheckMaxLength",(t,e)=>{var r;Ce.init(t,e),(r=t._zod.def).when??(r.when=s=>{const a=s.value;return!ps(a)&&a.length!==void 0}),t._zod.onattach.push(s=>{const a=s._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<a&&(s._zod.bag.maximum=e.maximum)}),t._zod.check=s=>{const a=s.value;if(a.length<=e.maximum)return;const o=gs(a);s.issues.push({origin:o,code:"too_big",maximum:e.maximum,inclusive:!0,input:a,inst:t,continue:!e.abort})}}),dl=j("$ZodCheckMinLength",(t,e)=>{var r;Ce.init(t,e),(r=t._zod.def).when??(r.when=s=>{const a=s.value;return!ps(a)&&a.length!==void 0}),t._zod.onattach.push(s=>{const a=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>a&&(s._zod.bag.minimum=e.minimum)}),t._zod.check=s=>{const a=s.value;if(a.length>=e.minimum)return;const o=gs(a);s.issues.push({origin:o,code:"too_small",minimum:e.minimum,inclusive:!0,input:a,inst:t,continue:!e.abort})}}),hl=j("$ZodCheckLengthEquals",(t,e)=>{var r;Ce.init(t,e),(r=t._zod.def).when??(r.when=s=>{const a=s.value;return!ps(a)&&a.length!==void 0}),t._zod.onattach.push(s=>{const a=s._zod.bag;a.minimum=e.length,a.maximum=e.length,a.length=e.length}),t._zod.check=s=>{const a=s.value,i=a.length;if(i===e.length)return;const o=gs(a),l=i>e.length;s.issues.push({origin:o,...l?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:s.value,inst:t,continue:!e.abort})}}),Or=j("$ZodCheckStringFormat",(t,e)=>{var r,s;Ce.init(t,e),t._zod.onattach.push(a=>{const i=a._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(r=t._zod).check??(r.check=a=>{e.pattern.lastIndex=0,!e.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:e.format,input:a.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(s=t._zod).check??(s.check=()=>{})}),fl=j("$ZodCheckRegex",(t,e)=>{Or.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),pl=j("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=il),Or.init(t,e)}),ml=j("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=ol),Or.init(t,e)}),gl=j("$ZodCheckIncludes",(t,e)=>{Ce.init(t,e);const r=kt(e.includes),s=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=s,t._zod.onattach.push(a=>{const i=a._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(s)}),t._zod.check=a=>{a.value.includes(e.includes,e.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:a.value,inst:t,continue:!e.abort})}}),xl=j("$ZodCheckStartsWith",(t,e)=>{Ce.init(t,e);const r=new RegExp(`^${kt(e.prefix)}.*`);e.pattern??(e.pattern=r),t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.startsWith(e.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:s.value,inst:t,continue:!e.abort})}}),bl=j("$ZodCheckEndsWith",(t,e)=>{Ce.init(t,e);const r=new RegExp(`.*${kt(e.suffix)}$`);e.pattern??(e.pattern=r),t._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=s=>{s.value.endsWith(e.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:s.value,inst:t,continue:!e.abort})}}),yl=j("$ZodCheckOverwrite",(t,e)=>{Ce.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}});class vl{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const s=e.split(`
`).filter(o=>o),a=Math.min(...s.map(o=>o.length-o.trimStart().length)),i=s.map(o=>o.slice(a)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const e=Function,r=this?.args,a=[...(this?.content??[""]).map(i=>`  ${i}`)];return new e(...r,a.join(`
`))}}const wl={major:4,minor:3,patch:6},le=j("$ZodType",(t,e)=>{var r;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=wl;const s=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&s.unshift(t);for(const a of s)for(const i of a._zod.onattach)i(t);if(s.length===0)(r=t._zod).deferred??(r.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const a=(o,l,c)=>{let u=vt(o),d;for(const p of l){if(p._zod.def.when){if(!p._zod.def.when(o))continue}else if(u)continue;const f=o.issues.length,h=p._zod.check(o);if(h instanceof Promise&&c?.async===!1)throw new wt;if(d||h instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await h,o.issues.length!==f&&(u||(u=vt(o,f)))});else{if(o.issues.length===f)continue;u||(u=vt(o,f))}}return d?d.then(()=>o):o},i=(o,l,c)=>{if(vt(o))return o.aborted=!0,o;const u=a(l,s,c);if(u instanceof Promise){if(c.async===!1)throw new wt;return u.then(d=>t._zod.parse(d,c))}return t._zod.parse(u,c)};t._zod.run=(o,l)=>{if(l.skipChecks)return t._zod.parse(o,l);if(l.direction==="backward"){const u=t._zod.parse({value:o.value,issues:[]},{...l,skipChecks:!0});return u instanceof Promise?u.then(d=>i(d,o,l)):i(u,o,l)}const c=t._zod.parse(o,l);if(c instanceof Promise){if(l.async===!1)throw new wt;return c.then(u=>a(u,s,l))}return a(c,s,l)}}K(t,"~standard",()=>({validate:a=>{try{const i=Eo(t,a);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return Oo(t,a).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}))}),ys=j("$ZodString",(t,e)=>{le.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??sl(t._zod.bag),t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),re=j("$ZodStringFormat",(t,e)=>{Or.init(t,e),ys.init(t,e)}),_l=j("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=Zo),re.init(t,e)}),jl=j("$ZodUUID",(t,e)=>{if(e.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(s===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Ds(s))}else e.pattern??(e.pattern=Ds());re.init(t,e)}),kl=j("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=Wo),re.init(t,e)}),Nl=j("$ZodURL",(t,e)=>{re.init(t,e),t._zod.check=r=>{try{const s=r.value.trim(),a=new URL(s);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),e.normalize?r.value=a.href:r.value=s;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),Sl=j("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=Ho()),re.init(t,e)}),El=j("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=Fo),re.init(t,e)}),Ol=j("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=Lo),re.init(t,e)}),Cl=j("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=Do),re.init(t,e)}),Tl=j("$ZodULID",(t,e)=>{e.pattern??(e.pattern=Uo),re.init(t,e)}),Pl=j("$ZodXID",(t,e)=>{e.pattern??(e.pattern=Mo),re.init(t,e)}),Al=j("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=Bo),re.init(t,e)}),Rl=j("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=rl(e)),re.init(t,e)}),$l=j("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=el),re.init(t,e)}),Il=j("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=tl(e)),re.init(t,e)}),zl=j("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=qo),re.init(t,e)}),Ll=j("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=Jo),re.init(t,e),t._zod.bag.format="ipv4"}),Dl=j("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=Go),re.init(t,e),t._zod.bag.format="ipv6",t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!e.abort})}}}),Ul=j("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=Ko),re.init(t,e)}),Ml=j("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=Yo),re.init(t,e),t._zod.check=r=>{const s=r.value.split("/");try{if(s.length!==2)throw new Error;const[a,i]=s;if(!i)throw new Error;const o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${a}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!e.abort})}}});function ea(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const Bl=j("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=Xo),re.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=r=>{ea(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!e.abort})}});function Fl(t){if(!Jn.test(t))return!1;const e=t.replace(/[-_]/g,s=>s==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return ea(r)}const ql=j("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=Jn),re.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=r=>{Fl(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!e.abort})}}),Zl=j("$ZodE164",(t,e)=>{e.pattern??(e.pattern=Qo),re.init(t,e)});function Wl(t,e=null){try{const r=t.split(".");if(r.length!==3)return!1;const[s]=r;if(!s)return!1;const a=JSON.parse(atob(s));return!("typ"in a&&a?.typ!=="JWT"||!a.alg||e&&(!("alg"in a)||a.alg!==e))}catch{return!1}}const Vl=j("$ZodJWT",(t,e)=>{re.init(t,e),t._zod.check=r=>{Wl(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}}),ta=j("$ZodNumber",(t,e)=>{le.init(t,e),t._zod.pattern=t._zod.bag.pattern??al,t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=Number(r.value)}catch{}const a=r.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return r;const i=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:a,inst:t,...i?{received:i}:{}}),r}}),Hl=j("$ZodNumberFormat",(t,e)=>{cl.init(t,e),ta.init(t,e)}),Jl=j("$ZodUnknown",(t,e)=>{le.init(t,e),t._zod.parse=r=>r}),Gl=j("$ZodNever",(t,e)=>{le.init(t,e),t._zod.parse=(r,s)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)});function Us(t,e,r){t.issues.length&&e.issues.push(...Zn(r,t.issues)),e.value[r]=t.value}const Kl=j("$ZodArray",(t,e)=>{le.init(t,e),t._zod.parse=(r,s)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:t}),r;r.value=Array(a.length);const i=[];for(let o=0;o<a.length;o++){const l=a[o],c=e.element._zod.run({value:l,issues:[]},s);c instanceof Promise?i.push(c.then(u=>Us(u,r,o))):Us(c,r,o)}return i.length?Promise.all(i).then(()=>r):r}});function pr(t,e,r,s,a){if(t.issues.length){if(a&&!(r in s))return;e.issues.push(...Zn(r,t.issues))}t.value===void 0?r in s&&(e.value[r]=void 0):e.value[r]=t.value}function ra(t){const e=Object.keys(t.shape);for(const s of e)if(!t.shape?.[s]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);const r=go(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}}function sa(t,e,r,s,a,i){const o=[],l=a.keySet,c=a.catchall._zod,u=c.def.type,d=c.optout==="optional";for(const p in e){if(l.has(p))continue;if(u==="never"){o.push(p);continue}const f=c.run({value:e[p],issues:[]},s);f instanceof Promise?t.push(f.then(h=>pr(h,r,p,e,d))):pr(f,r,p,e,d)}return o.length&&r.issues.push({code:"unrecognized_keys",keys:o,input:e,inst:i}),t.length?Promise.all(t).then(()=>r):r}const Yl=j("$ZodObject",(t,e)=>{if(le.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const l=e.shape;Object.defineProperty(e,"shape",{get:()=>{const c={...l};return Object.defineProperty(e,"shape",{value:c}),c}})}const s=fs(()=>ra(e));K(t._zod,"propValues",()=>{const l=e.shape,c={};for(const u in l){const d=l[u]._zod;if(d.values){c[u]??(c[u]=new Set);for(const p of d.values)c[u].add(p)}}return c});const a=fr,i=e.catchall;let o;t._zod.parse=(l,c)=>{o??(o=s.value);const u=l.value;if(!a(u))return l.issues.push({expected:"object",code:"invalid_type",input:u,inst:t}),l;l.value={};const d=[],p=o.shape;for(const f of o.keys){const h=p[f],m=h._zod.optout==="optional",g=h._zod.run({value:u[f],issues:[]},c);g instanceof Promise?d.push(g.then(b=>pr(b,l,f,u,m))):pr(g,l,f,u,m)}return i?sa(d,u,l,c,s.value,t):d.length?Promise.all(d).then(()=>l):l}}),Xl=j("$ZodObjectJIT",(t,e)=>{Yl.init(t,e);const r=t._zod.parse,s=fs(()=>ra(e)),a=f=>{const h=new vl(["shape","payload","ctx"]),m=s.value,g=y=>{const N=Ls(y);return`shape[${N}]._zod.run({ value: input[${N}], issues: [] }, ctx)`};h.write("const input = payload.value;");const b=Object.create(null);let k=0;for(const y of m.keys)b[y]=`key_${k++}`;h.write("const newResult = {};");for(const y of m.keys){const N=b[y],S=Ls(y),B=f[y]?._zod?.optout==="optional";h.write(`const ${N} = ${g(y)};`),B?h.write(`
        if (${N}.issues.length) {
          if (${S} in input) {
            payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${S}, ...iss.path] : [${S}]
            })));
          }
        }
        
        if (${N}.value === undefined) {
          if (${S} in input) {
            newResult[${S}] = undefined;
          }
        } else {
          newResult[${S}] = ${N}.value;
        }
        
      `):h.write(`
        if (${N}.issues.length) {
          payload.issues = payload.issues.concat(${N}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${S}, ...iss.path] : [${S}]
          })));
        }
        
        if (${N}.value === undefined) {
          if (${S} in input) {
            newResult[${S}] = undefined;
          }
        } else {
          newResult[${S}] = ${N}.value;
        }
        
      `)}h.write("payload.value = newResult;"),h.write("return payload;");const w=h.compile();return(y,N)=>w(f,y,N)};let i;const o=fr,l=!Mn.jitless,u=l&&po.value,d=e.catchall;let p;t._zod.parse=(f,h)=>{p??(p=s.value);const m=f.value;return o(m)?l&&u&&h?.async===!1&&h.jitless!==!0?(i||(i=a(e.shape)),f=i(f,h),d?sa([],m,f,h,p,t):f):r(f,h):(f.issues.push({expected:"object",code:"invalid_type",input:m,inst:t}),f)}});function Ms(t,e,r,s){for(const i of t)if(i.issues.length===0)return e.value=i.value,e;const a=t.filter(i=>!vt(i));return a.length===1?(e.value=a[0].value,a[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(i=>i.issues.map(o=>ut(o,s,ct())))}),e)}const Ql=j("$ZodUnion",(t,e)=>{le.init(t,e),K(t._zod,"optin",()=>e.options.some(a=>a._zod.optin==="optional")?"optional":void 0),K(t._zod,"optout",()=>e.options.some(a=>a._zod.optout==="optional")?"optional":void 0),K(t._zod,"values",()=>{if(e.options.every(a=>a._zod.values))return new Set(e.options.flatMap(a=>Array.from(a._zod.values)))}),K(t._zod,"pattern",()=>{if(e.options.every(a=>a._zod.pattern)){const a=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${a.map(i=>ms(i.source)).join("|")})$`)}});const r=e.options.length===1,s=e.options[0]._zod.run;t._zod.parse=(a,i)=>{if(r)return s(a,i);let o=!1;const l=[];for(const c of e.options){const u=c._zod.run({value:a.value,issues:[]},i);if(u instanceof Promise)l.push(u),o=!0;else{if(u.issues.length===0)return u;l.push(u)}}return o?Promise.all(l).then(c=>Ms(c,a,t,i)):Ms(l,a,t,i)}}),ec=j("$ZodIntersection",(t,e)=>{le.init(t,e),t._zod.parse=(r,s)=>{const a=r.value,i=e.left._zod.run({value:a,issues:[]},s),o=e.right._zod.run({value:a,issues:[]},s);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([c,u])=>Bs(r,c,u)):Bs(r,i,o)}});function Hr(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Ut(t)&&Ut(e)){const r=Object.keys(e),s=Object.keys(t).filter(i=>r.indexOf(i)!==-1),a={...t,...e};for(const i of s){const o=Hr(t[i],e[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};a[i]=o.data}return{valid:!0,data:a}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let s=0;s<t.length;s++){const a=t[s],i=e[s],o=Hr(a,i);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};r.push(o.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Bs(t,e,r){const s=new Map;let a;for(const l of e.issues)if(l.code==="unrecognized_keys"){a??(a=l);for(const c of l.keys)s.has(c)||s.set(c,{}),s.get(c).l=!0}else t.issues.push(l);for(const l of r.issues)if(l.code==="unrecognized_keys")for(const c of l.keys)s.has(c)||s.set(c,{}),s.get(c).r=!0;else t.issues.push(l);const i=[...s].filter(([,l])=>l.l&&l.r).map(([l])=>l);if(i.length&&a&&t.issues.push({...a,keys:i}),vt(t))return t;const o=Hr(e.value,r.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return t.value=o.data,t}const tc=j("$ZodEnum",(t,e)=>{le.init(t,e);const r=Bn(e.entries),s=new Set(r);t._zod.values=s,t._zod.pattern=new RegExp(`^(${r.filter(a=>mo.has(typeof a)).map(a=>typeof a=="string"?kt(a):a.toString()).join("|")})$`),t._zod.parse=(a,i)=>{const o=a.value;return s.has(o)||a.issues.push({code:"invalid_value",values:r,input:o,inst:t}),a}}),rc=j("$ZodLiteral",(t,e)=>{if(le.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");const r=new Set(e.values);t._zod.values=r,t._zod.pattern=new RegExp(`^(${e.values.map(s=>typeof s=="string"?kt(s):s?kt(s.toString()):String(s)).join("|")})$`),t._zod.parse=(s,a)=>{const i=s.value;return r.has(i)||s.issues.push({code:"invalid_value",values:e.values,input:i,inst:t}),s}}),sc=j("$ZodTransform",(t,e)=>{le.init(t,e),t._zod.parse=(r,s)=>{if(s.direction==="backward")throw new Un(t.constructor.name);const a=e.transform(r.value,r);if(s.async)return(a instanceof Promise?a:Promise.resolve(a)).then(o=>(r.value=o,r));if(a instanceof Promise)throw new wt;return r.value=a,r}});function Fs(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const na=j("$ZodOptional",(t,e)=>{le.init(t,e),t._zod.optin="optional",t._zod.optout="optional",K(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),K(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${ms(r.source)})?$`):void 0}),t._zod.parse=(r,s)=>{if(e.innerType._zod.optin==="optional"){const a=e.innerType._zod.run(r,s);return a instanceof Promise?a.then(i=>Fs(i,r.value)):Fs(a,r.value)}return r.value===void 0?r:e.innerType._zod.run(r,s)}}),nc=j("$ZodExactOptional",(t,e)=>{na.init(t,e),K(t._zod,"values",()=>e.innerType._zod.values),K(t._zod,"pattern",()=>e.innerType._zod.pattern),t._zod.parse=(r,s)=>e.innerType._zod.run(r,s)}),ac=j("$ZodNullable",(t,e)=>{le.init(t,e),K(t._zod,"optin",()=>e.innerType._zod.optin),K(t._zod,"optout",()=>e.innerType._zod.optout),K(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${ms(r.source)}|null)$`):void 0}),K(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,s)=>r.value===null?r:e.innerType._zod.run(r,s)}),ic=j("$ZodDefault",(t,e)=>{le.init(t,e),t._zod.optin="optional",K(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,s)=>{if(s.direction==="backward")return e.innerType._zod.run(r,s);if(r.value===void 0)return r.value=e.defaultValue,r;const a=e.innerType._zod.run(r,s);return a instanceof Promise?a.then(i=>qs(i,e)):qs(a,e)}});function qs(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const oc=j("$ZodPrefault",(t,e)=>{le.init(t,e),t._zod.optin="optional",K(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,s)=>(s.direction==="backward"||r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,s))}),lc=j("$ZodNonOptional",(t,e)=>{le.init(t,e),K(t._zod,"values",()=>{const r=e.innerType._zod.values;return r?new Set([...r].filter(s=>s!==void 0)):void 0}),t._zod.parse=(r,s)=>{const a=e.innerType._zod.run(r,s);return a instanceof Promise?a.then(i=>Zs(i,t)):Zs(a,t)}});function Zs(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const cc=j("$ZodCatch",(t,e)=>{le.init(t,e),K(t._zod,"optin",()=>e.innerType._zod.optin),K(t._zod,"optout",()=>e.innerType._zod.optout),K(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,s)=>{if(s.direction==="backward")return e.innerType._zod.run(r,s);const a=e.innerType._zod.run(r,s);return a instanceof Promise?a.then(i=>(r.value=i.value,i.issues.length&&(r.value=e.catchValue({...r,error:{issues:i.issues.map(o=>ut(o,s,ct()))},input:r.value}),r.issues=[]),r)):(r.value=a.value,a.issues.length&&(r.value=e.catchValue({...r,error:{issues:a.issues.map(i=>ut(i,s,ct()))},input:r.value}),r.issues=[]),r)}}),uc=j("$ZodPipe",(t,e)=>{le.init(t,e),K(t._zod,"values",()=>e.in._zod.values),K(t._zod,"optin",()=>e.in._zod.optin),K(t._zod,"optout",()=>e.out._zod.optout),K(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,s)=>{if(s.direction==="backward"){const i=e.out._zod.run(r,s);return i instanceof Promise?i.then(o=>Yt(o,e.in,s)):Yt(i,e.in,s)}const a=e.in._zod.run(r,s);return a instanceof Promise?a.then(i=>Yt(i,e.out,s)):Yt(a,e.out,s)}});function Yt(t,e,r){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},r)}const dc=j("$ZodReadonly",(t,e)=>{le.init(t,e),K(t._zod,"propValues",()=>e.innerType._zod.propValues),K(t._zod,"values",()=>e.innerType._zod.values),K(t._zod,"optin",()=>e.innerType?._zod?.optin),K(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(r,s)=>{if(s.direction==="backward")return e.innerType._zod.run(r,s);const a=e.innerType._zod.run(r,s);return a instanceof Promise?a.then(Ws):Ws(a)}});function Ws(t){return t.value=Object.freeze(t.value),t}const hc=j("$ZodCustom",(t,e)=>{Ce.init(t,e),le.init(t,e),t._zod.parse=(r,s)=>r,t._zod.check=r=>{const s=r.value,a=e.fn(s);if(a instanceof Promise)return a.then(i=>Vs(i,r,s,t));Vs(a,r,s,t)}});function Vs(t,e,r,s){if(!t){const a={code:"custom",input:r,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(a.params=s._zod.def.params),e.issues.push(Mt(a))}}var Hs;class fc{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...r){const s=r[0];return this._map.set(e,s),s&&typeof s=="object"&&"id"in s&&this._idmap.set(s.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){const r=e._zod.parent;if(r){const s={...this.get(r)??{}};delete s.id;const a={...s,...this._map.get(e)};return Object.keys(a).length?a:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function pc(){return new fc}(Hs=globalThis).__zod_globalRegistry??(Hs.__zod_globalRegistry=pc());const It=globalThis.__zod_globalRegistry;function mc(t,e){return new t({type:"string",...P(e)})}function gc(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...P(e)})}function Js(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...P(e)})}function xc(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...P(e)})}function bc(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...P(e)})}function yc(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...P(e)})}function vc(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...P(e)})}function wc(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...P(e)})}function _c(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...P(e)})}function jc(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...P(e)})}function kc(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...P(e)})}function Nc(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...P(e)})}function Sc(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...P(e)})}function Ec(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...P(e)})}function Oc(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...P(e)})}function Cc(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...P(e)})}function Tc(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...P(e)})}function Pc(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...P(e)})}function Ac(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...P(e)})}function Rc(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...P(e)})}function $c(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...P(e)})}function Ic(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...P(e)})}function zc(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...P(e)})}function Lc(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...P(e)})}function Dc(t,e){return new t({type:"string",format:"date",check:"string_format",...P(e)})}function Uc(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...P(e)})}function Mc(t,e){return new t({type:"string",format:"duration",check:"string_format",...P(e)})}function Bc(t,e){return new t({type:"number",checks:[],...P(e)})}function Fc(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...P(e)})}function qc(t){return new t({type:"unknown"})}function Zc(t,e){return new t({type:"never",...P(e)})}function Gs(t,e){return new Xn({check:"less_than",...P(e),value:t,inclusive:!1})}function Ir(t,e){return new Xn({check:"less_than",...P(e),value:t,inclusive:!0})}function Ks(t,e){return new Qn({check:"greater_than",...P(e),value:t,inclusive:!1})}function zr(t,e){return new Qn({check:"greater_than",...P(e),value:t,inclusive:!0})}function Ys(t,e){return new ll({check:"multiple_of",...P(e),value:t})}function aa(t,e){return new ul({check:"max_length",...P(e),maximum:t})}function mr(t,e){return new dl({check:"min_length",...P(e),minimum:t})}function ia(t,e){return new hl({check:"length_equals",...P(e),length:t})}function Wc(t,e){return new fl({check:"string_format",format:"regex",...P(e),pattern:t})}function Vc(t){return new pl({check:"string_format",format:"lowercase",...P(t)})}function Hc(t){return new ml({check:"string_format",format:"uppercase",...P(t)})}function Jc(t,e){return new gl({check:"string_format",format:"includes",...P(e),includes:t})}function Gc(t,e){return new xl({check:"string_format",format:"starts_with",...P(e),prefix:t})}function Kc(t,e){return new bl({check:"string_format",format:"ends_with",...P(e),suffix:t})}function Ot(t){return new yl({check:"overwrite",tx:t})}function Yc(t){return Ot(e=>e.normalize(t))}function Xc(){return Ot(t=>t.trim())}function Qc(){return Ot(t=>t.toLowerCase())}function eu(){return Ot(t=>t.toUpperCase())}function tu(){return Ot(t=>fo(t))}function ru(t,e,r){return new t({type:"array",element:e,...P(r)})}function su(t,e,r){return new t({type:"custom",check:"custom",fn:e,...P(r)})}function nu(t){const e=au(r=>(r.addIssue=s=>{if(typeof s=="string")r.issues.push(Mt(s,r.value,e._zod.def));else{const a=s;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=e),a.continue??(a.continue=!e._zod.def.abort),r.issues.push(Mt(a))}},t(r.value,r)));return e}function au(t,e){const r=new Ce({check:"custom",...P(e)});return r._zod.check=t,r}function oa(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??It,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function ve(t,e,r={path:[],schemaPath:[]}){var s;const a=t._zod.def,i=e.seen.get(t);if(i)return i.count++,r.schemaPath.includes(t)&&(i.cycle=r.path),i.schema;const o={schema:{},count:1,cycle:void 0,path:r.path};e.seen.set(t,o);const l=t._zod.toJSONSchema?.();if(l)o.schema=l;else{const d={...r,schemaPath:[...r.schemaPath,t],path:r.path};if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,o.schema,d);else{const f=o.schema,h=e.processors[a.type];if(!h)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${a.type}`);h(t,e,f,d)}const p=t._zod.parent;p&&(o.ref||(o.ref=p),ve(p,e,d),e.seen.get(p).isParent=!0)}const c=e.metadataRegistry.get(t);return c&&Object.assign(o.schema,c),e.io==="input"&&ke(t)&&(delete o.schema.examples,delete o.schema.default),e.io==="input"&&o.schema._prefault&&((s=o.schema).default??(s.default=o.schema._prefault)),delete o.schema._prefault,e.seen.get(t).schema}function la(t,e){const r=t.seen.get(e);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=new Map;for(const o of t.seen.entries()){const l=t.metadataRegistry.get(o[0])?.id;if(l){const c=s.get(l);if(c&&c!==o[0])throw new Error(`Duplicate schema id "${l}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);s.set(l,o[0])}}const a=o=>{const l=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const p=t.external.registry.get(o[0])?.id,f=t.external.uri??(m=>m);if(p)return{ref:f(p)};const h=o[1].defId??o[1].schema.id??`schema${t.counter++}`;return o[1].defId=h,{defId:h,ref:`${f("__shared")}#/${l}/${h}`}}if(o[1]===r)return{ref:"#"};const u=`#/${l}/`,d=o[1].schema.id??`__schema${t.counter++}`;return{defId:d,ref:u+d}},i=o=>{if(o[1].schema.$ref)return;const l=o[1],{ref:c,defId:u}=a(o);l.def={...l.schema},u&&(l.defId=u);const d=l.schema;for(const p in d)delete d[p];d.$ref=c};if(t.cycles==="throw")for(const o of t.seen.entries()){const l=o[1];if(l.cycle)throw new Error(`Cycle detected: #/${l.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const o of t.seen.entries()){const l=o[1];if(e===o[0]){i(o);continue}if(t.external){const u=t.external.registry.get(o[0])?.id;if(e!==o[0]&&u){i(o);continue}}if(t.metadataRegistry.get(o[0])?.id){i(o);continue}if(l.cycle){i(o);continue}if(l.count>1&&t.reused==="ref"){i(o);continue}}}function ca(t,e){const r=t.seen.get(e);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=o=>{const l=t.seen.get(o);if(l.ref===null)return;const c=l.def??l.schema,u={...c},d=l.ref;if(l.ref=null,d){s(d);const f=t.seen.get(d),h=f.schema;if(h.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(c.allOf=c.allOf??[],c.allOf.push(h)):Object.assign(c,h),Object.assign(c,u),o._zod.parent===d)for(const g in c)g==="$ref"||g==="allOf"||g in u||delete c[g];if(h.$ref&&f.def)for(const g in c)g==="$ref"||g==="allOf"||g in f.def&&JSON.stringify(c[g])===JSON.stringify(f.def[g])&&delete c[g]}const p=o._zod.parent;if(p&&p!==d){s(p);const f=t.seen.get(p);if(f?.schema.$ref&&(c.$ref=f.schema.$ref,f.def))for(const h in c)h==="$ref"||h==="allOf"||h in f.def&&JSON.stringify(c[h])===JSON.stringify(f.def[h])&&delete c[h]}t.override({zodSchema:o,jsonSchema:c,path:l.path??[]})};for(const o of[...t.seen.entries()].reverse())s(o[0]);const a={};if(t.target==="draft-2020-12"?a.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?a.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?a.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){const o=t.external.registry.get(e)?.id;if(!o)throw new Error("Schema is missing an `id` property");a.$id=t.external.uri(o)}Object.assign(a,r.def??r.schema);const i=t.external?.defs??{};for(const o of t.seen.entries()){const l=o[1];l.def&&l.defId&&(i[l.defId]=l.def)}t.external||Object.keys(i).length>0&&(t.target==="draft-2020-12"?a.$defs=i:a.definitions=i);try{const o=JSON.parse(JSON.stringify(a));return Object.defineProperty(o,"~standard",{value:{...e["~standard"],jsonSchema:{input:gr(e,"input",t.processors),output:gr(e,"output",t.processors)}},enumerable:!1,writable:!1}),o}catch{throw new Error("Error converting schema to JSON.")}}function ke(t,e){const r=e??{seen:new Set};if(r.seen.has(t))return!1;r.seen.add(t);const s=t._zod.def;if(s.type==="transform")return!0;if(s.type==="array")return ke(s.element,r);if(s.type==="set")return ke(s.valueType,r);if(s.type==="lazy")return ke(s.getter(),r);if(s.type==="promise"||s.type==="optional"||s.type==="nonoptional"||s.type==="nullable"||s.type==="readonly"||s.type==="default"||s.type==="prefault")return ke(s.innerType,r);if(s.type==="intersection")return ke(s.left,r)||ke(s.right,r);if(s.type==="record"||s.type==="map")return ke(s.keyType,r)||ke(s.valueType,r);if(s.type==="pipe")return ke(s.in,r)||ke(s.out,r);if(s.type==="object"){for(const a in s.shape)if(ke(s.shape[a],r))return!0;return!1}if(s.type==="union"){for(const a of s.options)if(ke(a,r))return!0;return!1}if(s.type==="tuple"){for(const a of s.items)if(ke(a,r))return!0;return!!(s.rest&&ke(s.rest,r))}return!1}const iu=(t,e={})=>r=>{const s=oa({...r,processors:e});return ve(t,s),la(s,t),ca(s,t)},gr=(t,e,r={})=>s=>{const{libraryOptions:a,target:i}=s??{},o=oa({...a??{},target:i,io:e,processors:r});return ve(t,o),la(o,t),ca(o,t)},ou={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},lu=(t,e,r,s)=>{const a=r;a.type="string";const{minimum:i,maximum:o,format:l,patterns:c,contentEncoding:u}=t._zod.bag;if(typeof i=="number"&&(a.minLength=i),typeof o=="number"&&(a.maxLength=o),l&&(a.format=ou[l]??l,a.format===""&&delete a.format,l==="time"&&delete a.format),u&&(a.contentEncoding=u),c&&c.size>0){const d=[...c];d.length===1?a.pattern=d[0].source:d.length>1&&(a.allOf=[...d.map(p=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:p.source}))])}},cu=(t,e,r,s)=>{const a=r,{minimum:i,maximum:o,format:l,multipleOf:c,exclusiveMaximum:u,exclusiveMinimum:d}=t._zod.bag;typeof l=="string"&&l.includes("int")?a.type="integer":a.type="number",typeof d=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(a.minimum=d,a.exclusiveMinimum=!0):a.exclusiveMinimum=d),typeof i=="number"&&(a.minimum=i,typeof d=="number"&&e.target!=="draft-04"&&(d>=i?delete a.minimum:delete a.exclusiveMinimum)),typeof u=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(a.maximum=u,a.exclusiveMaximum=!0):a.exclusiveMaximum=u),typeof o=="number"&&(a.maximum=o,typeof u=="number"&&e.target!=="draft-04"&&(u<=o?delete a.maximum:delete a.exclusiveMaximum)),typeof c=="number"&&(a.multipleOf=c)},uu=(t,e,r,s)=>{r.not={}},du=(t,e,r,s)=>{},hu=(t,e,r,s)=>{const a=t._zod.def,i=Bn(a.entries);i.every(o=>typeof o=="number")&&(r.type="number"),i.every(o=>typeof o=="string")&&(r.type="string"),r.enum=i},fu=(t,e,r,s)=>{const a=t._zod.def,i=[];for(const o of a.values)if(o===void 0){if(e.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof o=="bigint"){if(e.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");i.push(Number(o))}else i.push(o);if(i.length!==0)if(i.length===1){const o=i[0];r.type=o===null?"null":typeof o,e.target==="draft-04"||e.target==="openapi-3.0"?r.enum=[o]:r.const=o}else i.every(o=>typeof o=="number")&&(r.type="number"),i.every(o=>typeof o=="string")&&(r.type="string"),i.every(o=>typeof o=="boolean")&&(r.type="boolean"),i.every(o=>o===null)&&(r.type="null"),r.enum=i},pu=(t,e,r,s)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},mu=(t,e,r,s)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},gu=(t,e,r,s)=>{const a=r,i=t._zod.def,{minimum:o,maximum:l}=t._zod.bag;typeof o=="number"&&(a.minItems=o),typeof l=="number"&&(a.maxItems=l),a.type="array",a.items=ve(i.element,e,{...s,path:[...s.path,"items"]})},xu=(t,e,r,s)=>{const a=r,i=t._zod.def;a.type="object",a.properties={};const o=i.shape;for(const u in o)a.properties[u]=ve(o[u],e,{...s,path:[...s.path,"properties",u]});const l=new Set(Object.keys(o)),c=new Set([...l].filter(u=>{const d=i.shape[u]._zod;return e.io==="input"?d.optin===void 0:d.optout===void 0}));c.size>0&&(a.required=Array.from(c)),i.catchall?._zod.def.type==="never"?a.additionalProperties=!1:i.catchall?i.catchall&&(a.additionalProperties=ve(i.catchall,e,{...s,path:[...s.path,"additionalProperties"]})):e.io==="output"&&(a.additionalProperties=!1)},bu=(t,e,r,s)=>{const a=t._zod.def,i=a.inclusive===!1,o=a.options.map((l,c)=>ve(l,e,{...s,path:[...s.path,i?"oneOf":"anyOf",c]}));i?r.oneOf=o:r.anyOf=o},yu=(t,e,r,s)=>{const a=t._zod.def,i=ve(a.left,e,{...s,path:[...s.path,"allOf",0]}),o=ve(a.right,e,{...s,path:[...s.path,"allOf",1]}),l=u=>"allOf"in u&&Object.keys(u).length===1,c=[...l(i)?i.allOf:[i],...l(o)?o.allOf:[o]];r.allOf=c},vu=(t,e,r,s)=>{const a=t._zod.def,i=ve(a.innerType,e,s),o=e.seen.get(t);e.target==="openapi-3.0"?(o.ref=a.innerType,r.nullable=!0):r.anyOf=[i,{type:"null"}]},wu=(t,e,r,s)=>{const a=t._zod.def;ve(a.innerType,e,s);const i=e.seen.get(t);i.ref=a.innerType},_u=(t,e,r,s)=>{const a=t._zod.def;ve(a.innerType,e,s);const i=e.seen.get(t);i.ref=a.innerType,r.default=JSON.parse(JSON.stringify(a.defaultValue))},ju=(t,e,r,s)=>{const a=t._zod.def;ve(a.innerType,e,s);const i=e.seen.get(t);i.ref=a.innerType,e.io==="input"&&(r._prefault=JSON.parse(JSON.stringify(a.defaultValue)))},ku=(t,e,r,s)=>{const a=t._zod.def;ve(a.innerType,e,s);const i=e.seen.get(t);i.ref=a.innerType;let o;try{o=a.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}r.default=o},Nu=(t,e,r,s)=>{const a=t._zod.def,i=e.io==="input"?a.in._zod.def.type==="transform"?a.out:a.in:a.out;ve(i,e,s);const o=e.seen.get(t);o.ref=i},Su=(t,e,r,s)=>{const a=t._zod.def;ve(a.innerType,e,s);const i=e.seen.get(t);i.ref=a.innerType,r.readOnly=!0},ua=(t,e,r,s)=>{const a=t._zod.def;ve(a.innerType,e,s);const i=e.seen.get(t);i.ref=a.innerType},Eu=j("ZodISODateTime",(t,e)=>{Rl.init(t,e),se.init(t,e)});function Ou(t){return Lc(Eu,t)}const Cu=j("ZodISODate",(t,e)=>{$l.init(t,e),se.init(t,e)});function Tu(t){return Dc(Cu,t)}const Pu=j("ZodISOTime",(t,e)=>{Il.init(t,e),se.init(t,e)});function Au(t){return Uc(Pu,t)}const Ru=j("ZodISODuration",(t,e)=>{zl.init(t,e),se.init(t,e)});function $u(t){return Mc(Ru,t)}const Iu=(t,e)=>{Vn.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:r=>So(t,r)},flatten:{value:r=>No(t,r)},addIssue:{value:r=>{t.issues.push(r),t.message=JSON.stringify(t.issues,Vr,2)}},addIssues:{value:r=>{t.issues.push(...r),t.message=JSON.stringify(t.issues,Vr,2)}},isEmpty:{get(){return t.issues.length===0}}})},Pe=j("ZodError",Iu,{Parent:Error}),zu=xs(Pe),Lu=bs(Pe),Du=Sr(Pe),Uu=Er(Pe),Mu=Co(Pe),Bu=To(Pe),Fu=Po(Pe),qu=Ao(Pe),Zu=Ro(Pe),Wu=$o(Pe),Vu=Io(Pe),Hu=zo(Pe),ce=j("ZodType",(t,e)=>(le.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:gr(t,"input"),output:gr(t,"output")}}),t.toJSONSchema=iu(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>t.clone(Ye(e,{checks:[...e.checks??[],...r.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),{parent:!0}),t.with=t.check,t.clone=(r,s)=>Xe(t,r,s),t.brand=()=>t,t.register=((r,s)=>(r.add(t,s),t)),t.parse=(r,s)=>zu(t,r,s,{callee:t.parse}),t.safeParse=(r,s)=>Du(t,r,s),t.parseAsync=async(r,s)=>Lu(t,r,s,{callee:t.parseAsync}),t.safeParseAsync=async(r,s)=>Uu(t,r,s),t.spa=t.safeParseAsync,t.encode=(r,s)=>Mu(t,r,s),t.decode=(r,s)=>Bu(t,r,s),t.encodeAsync=async(r,s)=>Fu(t,r,s),t.decodeAsync=async(r,s)=>qu(t,r,s),t.safeEncode=(r,s)=>Zu(t,r,s),t.safeDecode=(r,s)=>Wu(t,r,s),t.safeEncodeAsync=async(r,s)=>Vu(t,r,s),t.safeDecodeAsync=async(r,s)=>Hu(t,r,s),t.refine=(r,s)=>t.check(Bd(r,s)),t.superRefine=r=>t.check(Fd(r)),t.overwrite=r=>t.check(Ot(r)),t.optional=()=>rn(t),t.exactOptional=()=>Od(t),t.nullable=()=>sn(t),t.nullish=()=>rn(sn(t)),t.nonoptional=r=>$d(t,r),t.array=()=>xd(t),t.or=r=>vd([t,r]),t.and=r=>_d(t,r),t.transform=r=>nn(t,Sd(r)),t.default=r=>Pd(t,r),t.prefault=r=>Rd(t,r),t.catch=r=>zd(t,r),t.pipe=r=>nn(t,r),t.readonly=()=>Ud(t),t.describe=r=>{const s=t.clone();return It.add(s,{description:r}),s},Object.defineProperty(t,"description",{get(){return It.get(t)?.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return It.get(t);const s=t.clone();return It.add(s,r[0]),s},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t.apply=r=>r(t),t)),da=j("_ZodString",(t,e)=>{ys.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(s,a,i)=>lu(t,s,a);const r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...s)=>t.check(Wc(...s)),t.includes=(...s)=>t.check(Jc(...s)),t.startsWith=(...s)=>t.check(Gc(...s)),t.endsWith=(...s)=>t.check(Kc(...s)),t.min=(...s)=>t.check(mr(...s)),t.max=(...s)=>t.check(aa(...s)),t.length=(...s)=>t.check(ia(...s)),t.nonempty=(...s)=>t.check(mr(1,...s)),t.lowercase=s=>t.check(Vc(s)),t.uppercase=s=>t.check(Hc(s)),t.trim=()=>t.check(Xc()),t.normalize=(...s)=>t.check(Yc(...s)),t.toLowerCase=()=>t.check(Qc()),t.toUpperCase=()=>t.check(eu()),t.slugify=()=>t.check(tu())}),Ju=j("ZodString",(t,e)=>{ys.init(t,e),da.init(t,e),t.email=r=>t.check(gc(Gu,r)),t.url=r=>t.check(wc(Ku,r)),t.jwt=r=>t.check(zc(dd,r)),t.emoji=r=>t.check(_c(Yu,r)),t.guid=r=>t.check(Js(Xs,r)),t.uuid=r=>t.check(xc(Xt,r)),t.uuidv4=r=>t.check(bc(Xt,r)),t.uuidv6=r=>t.check(yc(Xt,r)),t.uuidv7=r=>t.check(vc(Xt,r)),t.nanoid=r=>t.check(jc(Xu,r)),t.guid=r=>t.check(Js(Xs,r)),t.cuid=r=>t.check(kc(Qu,r)),t.cuid2=r=>t.check(Nc(ed,r)),t.ulid=r=>t.check(Sc(td,r)),t.base64=r=>t.check(Rc(ld,r)),t.base64url=r=>t.check($c(cd,r)),t.xid=r=>t.check(Ec(rd,r)),t.ksuid=r=>t.check(Oc(sd,r)),t.ipv4=r=>t.check(Cc(nd,r)),t.ipv6=r=>t.check(Tc(ad,r)),t.cidrv4=r=>t.check(Pc(id,r)),t.cidrv6=r=>t.check(Ac(od,r)),t.e164=r=>t.check(Ic(ud,r)),t.datetime=r=>t.check(Ou(r)),t.date=r=>t.check(Tu(r)),t.time=r=>t.check(Au(r)),t.duration=r=>t.check($u(r))});function me(t){return mc(Ju,t)}const se=j("ZodStringFormat",(t,e)=>{re.init(t,e),da.init(t,e)}),Gu=j("ZodEmail",(t,e)=>{kl.init(t,e),se.init(t,e)}),Xs=j("ZodGUID",(t,e)=>{_l.init(t,e),se.init(t,e)}),Xt=j("ZodUUID",(t,e)=>{jl.init(t,e),se.init(t,e)}),Ku=j("ZodURL",(t,e)=>{Nl.init(t,e),se.init(t,e)}),Yu=j("ZodEmoji",(t,e)=>{Sl.init(t,e),se.init(t,e)}),Xu=j("ZodNanoID",(t,e)=>{El.init(t,e),se.init(t,e)}),Qu=j("ZodCUID",(t,e)=>{Ol.init(t,e),se.init(t,e)}),ed=j("ZodCUID2",(t,e)=>{Cl.init(t,e),se.init(t,e)}),td=j("ZodULID",(t,e)=>{Tl.init(t,e),se.init(t,e)}),rd=j("ZodXID",(t,e)=>{Pl.init(t,e),se.init(t,e)}),sd=j("ZodKSUID",(t,e)=>{Al.init(t,e),se.init(t,e)}),nd=j("ZodIPv4",(t,e)=>{Ll.init(t,e),se.init(t,e)}),ad=j("ZodIPv6",(t,e)=>{Dl.init(t,e),se.init(t,e)}),id=j("ZodCIDRv4",(t,e)=>{Ul.init(t,e),se.init(t,e)}),od=j("ZodCIDRv6",(t,e)=>{Ml.init(t,e),se.init(t,e)}),ld=j("ZodBase64",(t,e)=>{Bl.init(t,e),se.init(t,e)}),cd=j("ZodBase64URL",(t,e)=>{ql.init(t,e),se.init(t,e)}),ud=j("ZodE164",(t,e)=>{Zl.init(t,e),se.init(t,e)}),dd=j("ZodJWT",(t,e)=>{Vl.init(t,e),se.init(t,e)}),ha=j("ZodNumber",(t,e)=>{ta.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(s,a,i)=>cu(t,s,a),t.gt=(s,a)=>t.check(Ks(s,a)),t.gte=(s,a)=>t.check(zr(s,a)),t.min=(s,a)=>t.check(zr(s,a)),t.lt=(s,a)=>t.check(Gs(s,a)),t.lte=(s,a)=>t.check(Ir(s,a)),t.max=(s,a)=>t.check(Ir(s,a)),t.int=s=>t.check(en(s)),t.safe=s=>t.check(en(s)),t.positive=s=>t.check(Ks(0,s)),t.nonnegative=s=>t.check(zr(0,s)),t.negative=s=>t.check(Gs(0,s)),t.nonpositive=s=>t.check(Ir(0,s)),t.multipleOf=(s,a)=>t.check(Ys(s,a)),t.step=(s,a)=>t.check(Ys(s,a)),t.finite=()=>t;const r=t._zod.bag;t.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),t.isFinite=!0,t.format=r.format??null});function Qs(t){return Bc(ha,t)}const hd=j("ZodNumberFormat",(t,e)=>{Hl.init(t,e),ha.init(t,e)});function en(t){return Fc(hd,t)}const fd=j("ZodUnknown",(t,e)=>{Jl.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>du()});function tn(){return qc(fd)}const pd=j("ZodNever",(t,e)=>{Gl.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>uu(t,r,s)});function md(t){return Zc(pd,t)}const gd=j("ZodArray",(t,e)=>{Kl.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>gu(t,r,s,a),t.element=e.element,t.min=(r,s)=>t.check(mr(r,s)),t.nonempty=r=>t.check(mr(1,r)),t.max=(r,s)=>t.check(aa(r,s)),t.length=(r,s)=>t.check(ia(r,s)),t.unwrap=()=>t.element});function xd(t,e){return ru(gd,t,e)}const bd=j("ZodObject",(t,e)=>{Xl.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>xu(t,r,s,a),K(t,"shape",()=>e.shape),t.keyof=()=>fa(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:tn()}),t.loose=()=>t.clone({...t._zod.def,catchall:tn()}),t.strict=()=>t.clone({...t._zod.def,catchall:md()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>vo(t,r),t.safeExtend=r=>wo(t,r),t.merge=r=>_o(t,r),t.pick=r=>bo(t,r),t.omit=r=>yo(t,r),t.partial=(...r)=>jo(pa,t,r[0]),t.required=(...r)=>ko(ma,t,r[0])});function Wt(t,e){const r={type:"object",shape:t??{},...P(e)};return new bd(r)}const yd=j("ZodUnion",(t,e)=>{Ql.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>bu(t,r,s,a),t.options=e.options});function vd(t,e){return new yd({type:"union",options:t,...P(e)})}const wd=j("ZodIntersection",(t,e)=>{ec.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>yu(t,r,s,a)});function _d(t,e){return new wd({type:"intersection",left:t,right:e})}const Jr=j("ZodEnum",(t,e)=>{tc.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(s,a,i)=>hu(t,s,a),t.enum=e.entries,t.options=Object.values(e.entries);const r=new Set(Object.keys(e.entries));t.extract=(s,a)=>{const i={};for(const o of s)if(r.has(o))i[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new Jr({...e,checks:[],...P(a),entries:i})},t.exclude=(s,a)=>{const i={...e.entries};for(const o of s)if(r.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new Jr({...e,checks:[],...P(a),entries:i})}});function fa(t,e){const r=Array.isArray(t)?Object.fromEntries(t.map(s=>[s,s])):t;return new Jr({type:"enum",entries:r,...P(e)})}const jd=j("ZodLiteral",(t,e)=>{rc.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>fu(t,r,s),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function kd(t,e){return new jd({type:"literal",values:Array.isArray(t)?t:[t],...P(e)})}const Nd=j("ZodTransform",(t,e)=>{sc.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>mu(t,r),t._zod.parse=(r,s)=>{if(s.direction==="backward")throw new Un(t.constructor.name);r.addIssue=i=>{if(typeof i=="string")r.issues.push(Mt(i,r.value,e));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=t),r.issues.push(Mt(o))}};const a=e.transform(r.value,r);return a instanceof Promise?a.then(i=>(r.value=i,r)):(r.value=a,r)}});function Sd(t){return new Nd({type:"transform",transform:t})}const pa=j("ZodOptional",(t,e)=>{na.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>ua(t,r,s,a),t.unwrap=()=>t._zod.def.innerType});function rn(t){return new pa({type:"optional",innerType:t})}const Ed=j("ZodExactOptional",(t,e)=>{nc.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>ua(t,r,s,a),t.unwrap=()=>t._zod.def.innerType});function Od(t){return new Ed({type:"optional",innerType:t})}const Cd=j("ZodNullable",(t,e)=>{ac.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>vu(t,r,s,a),t.unwrap=()=>t._zod.def.innerType});function sn(t){return new Cd({type:"nullable",innerType:t})}const Td=j("ZodDefault",(t,e)=>{ic.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>_u(t,r,s,a),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function Pd(t,e){return new Td({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():qn(e)}})}const Ad=j("ZodPrefault",(t,e)=>{oc.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>ju(t,r,s,a),t.unwrap=()=>t._zod.def.innerType});function Rd(t,e){return new Ad({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():qn(e)}})}const ma=j("ZodNonOptional",(t,e)=>{lc.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>wu(t,r,s,a),t.unwrap=()=>t._zod.def.innerType});function $d(t,e){return new ma({type:"nonoptional",innerType:t,...P(e)})}const Id=j("ZodCatch",(t,e)=>{cc.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>ku(t,r,s,a),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function zd(t,e){return new Id({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const Ld=j("ZodPipe",(t,e)=>{uc.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>Nu(t,r,s,a),t.in=e.in,t.out=e.out});function nn(t,e){return new Ld({type:"pipe",in:t,out:e})}const Dd=j("ZodReadonly",(t,e)=>{dc.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>Su(t,r,s,a),t.unwrap=()=>t._zod.def.innerType});function Ud(t){return new Dd({type:"readonly",innerType:t})}const Md=j("ZodCustom",(t,e)=>{hc.init(t,e),ce.init(t,e),t._zod.processJSONSchema=(r,s,a)=>pu(t,r)});function Bd(t,e={}){return su(Md,t,e)}function Fd(t){return nu(t)}const te=t=>t.trim().replace(/[<>]/g,""),qd=Wt({name:me().min(2,"Name must be at least 2 characters").max(50,"Name must be less than 50 characters").transform(te),email:me().email("Invalid email address").max(100,"Email must be less than 100 characters").transform(te),password:me().min(8,"Password must be at least 8 characters").max(100,"Password must be less than 100 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number")}),Zd=Wt({email:me().email("Invalid email address").transform(te),password:me().min(1,"Password is required")}),Wd=Wt({name:me().min(2,"Name is too short").max(50).transform(te),email:me().email("Invalid email address").transform(te),message:me().min(10,"Message is too short").max(1e3).transform(te)}),Vd=Wt({name:me().min(2).max(100).transform(te),email:me().email().transform(te),seller_type:fa(["honey","beehive"]),phone:me().regex(/^\+?[\d\s-]{10,}$/,"Invalid phone number").transform(te),address:me().min(5).max(200).transform(te),city:me().min(2).max(50).transform(te),state:me().min(2).max(50).transform(te),zip:me().regex(/^\d{5,6}$/,"Invalid zip code").transform(te)}),Hd=Wt({name:me().min(2,"Name is too short").max(100).transform(te),description:me().min(10,"Description is too short").max(2e3).transform(te),price:Qs().positive("Price must be positive"),category:me().min(1,"Category is required").transform(te),stock:Qs().int().nonnegative("Stock cannot be negative"),image_url:me().url("Invalid image URL").or(kd("")).transform(te)}),Jd={limit:5,windowMs:60*1e3},Nt={check:(t,e=Jd)=>{const r=Date.now(),s=`rate_limit_${t}`,a=localStorage.getItem(s);let i=[];if(a)try{i=JSON.parse(a).filter(o=>r-o<e.windowMs)}catch{i=[]}return i.length>=e.limit?{allowed:!1,remaining:0,resetTime:i[0]+e.windowMs}:(i.push(r),localStorage.setItem(s,JSON.stringify(i)),{allowed:!0,remaining:e.limit-i.length})},getWaitTimeSeconds:t=>Math.max(0,Math.ceil((t-Date.now())/1e3))},Gd=()=>{const[t,e]=_.useState(""),[r,s]=_.useState(""),[a,i]=_.useState(""),[o,l]=_.useState(!1),[c,u]=_.useState(null),d=async p=>{p.preventDefault(),l(!0),u(null);const f=Nt.check("contact",{limit:2,windowMs:60*1e3});if(!f.allowed){const m=Nt.getWaitTimeSeconds(f.resetTime);u({type:"error",message:`Too many submissions. Please wait ${m} seconds.`}),l(!1);return}const h=Wd.safeParse({name:t,email:r,message:a});if(!h.success){u({type:"error",message:h.error.issues[0].message}),l(!1);return}try{const m=await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h.data)}),g=await m.json();m.ok?(u({type:"success",message:"Message sent successfully!"}),e(""),s(""),i("")):u({type:"error",message:g.error||"Failed to send message."})}catch{u({type:"error",message:"An unexpected error occurred."})}finally{l(!1)}};return n.jsx("div",{className:"bg-honeybee-background text-honeybee-secondary",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-24",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-3xl md:text-4xl font-serif font-bold text-honeybee-primary",children:"Contact Us"}),n.jsx("p",{className:"mt-4 text-base md:text-lg max-w-2xl mx-auto",children:"We'd love to hear from you! Whether you have a question about our products, our practices, or anything else, our team is ready to answer all your questions."})]}),n.jsxs("div",{className:"mt-12 md:mt-20 grid md:grid-cols-2 gap-8 md:gap-16",children:[n.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-lg shadow-lg",children:[n.jsx("h2",{className:"text-xl md:text-2xl font-serif font-bold mb-6",children:"Send us a message"}),c&&n.jsx("div",{className:`mb-4 p-3 rounded ${c.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:c.message}),n.jsxs("form",{onSubmit:d,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium mb-1",children:"Name"}),n.jsx("input",{type:"text",id:"name",value:t,onChange:p=>e(p.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-md focus:ring-2 focus:ring-honeybee-primary focus:border-honeybee-primary bg-white text-base"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:"Email"}),n.jsx("input",{type:"email",id:"email",value:r,onChange:p=>s(p.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-md focus:ring-2 focus:ring-honeybee-primary focus:border-honeybee-primary bg-white text-base"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"message",className:"block text-sm font-medium mb-1",children:"Message"}),n.jsx("textarea",{id:"message",rows:4,value:a,onChange:p=>i(p.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-md focus:ring-2 focus:ring-honeybee-primary focus:border-honeybee-primary bg-white text-base"})]}),n.jsx(je,{type:"submit",variant:"primary",className:"w-full py-3 text-base",disabled:o,children:o?"Sending...":"Send Message"})]})]}),n.jsxs("div",{className:"space-y-6 md:space-y-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg md:text-xl font-serif font-bold mb-2",children:"Email Us"}),n.jsx("p",{className:"text-sm md:text-base",children:"beebridgeshop@gmail.com"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg md:text-xl font-serif font-bold mb-2",children:"Call Us"}),n.jsx("p",{className:"text-sm md:text-base",children:"(123) 456-7890"})]})]})]})]})})},ga=_.createContext(void 0),Kd=({children:t})=>{const[e,r]=_.useState([]),s=c=>{const u=c.name.includes("Subscription Plan"),d=e.some(p=>p.name.includes("Subscription Plan"));if(u)r([{...c,quantity:1}]);else{if(d)return;r(p=>p.find(h=>h.id===c.id)?p.map(h=>h.id===c.id?{...h,quantity:Math.min(h.quantity+1,5)}:h):[...p,{...c,quantity:1}])}},a=c=>{r(u=>u.filter(d=>d.id!==c))},i=(c,u)=>{if(u<=0){a(c);return}const d=Math.min(u,5);r(p=>p.map(f=>f.id===c?{...f,quantity:d}:f))},o=()=>{r([])},l=()=>e.reduce((c,u)=>c+u.price*u.quantity,0);return n.jsx(ga.Provider,{value:{cartItems:e,addToCart:s,removeFromCart:a,updateQuantity:i,clearCart:o,getTotal:l},children:t})},Ct=()=>{const t=_.useContext(ga);if(!t)throw new Error("useCart must be used within a CartProvider");return t};var Ze={},Qt={},Gr=function(t,e){return Gr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},Gr(t,e)};function xa(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Gr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var xr=function(){return xr=Object.assign||function(e){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},xr.apply(this,arguments)};function Tt(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r}function ba(t,e,r,s){var a=arguments.length,i=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,r):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,s);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function ya(t,e){return function(r,s){e(r,s,t)}}function va(t,e,r,s,a,i){function o(k){if(k!==void 0&&typeof k!="function")throw new TypeError("Function expected");return k}for(var l=s.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!e&&t?s.static?t:t.prototype:null,d=e||(u?Object.getOwnPropertyDescriptor(u,s.name):{}),p,f=!1,h=r.length-1;h>=0;h--){var m={};for(var g in s)m[g]=g==="access"?{}:s[g];for(var g in s.access)m.access[g]=s.access[g];m.addInitializer=function(k){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(k||null))};var b=(0,r[h])(l==="accessor"?{get:d.get,set:d.set}:d[c],m);if(l==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(p=o(b.get))&&(d.get=p),(p=o(b.set))&&(d.set=p),(p=o(b.init))&&a.unshift(p)}else(p=o(b))&&(l==="field"?a.unshift(p):d[c]=p)}u&&Object.defineProperty(u,s.name,d),f=!0}function wa(t,e,r){for(var s=arguments.length>2,a=0;a<e.length;a++)r=s?e[a].call(t,r):e[a].call(t);return s?r:void 0}function _a(t){return typeof t=="symbol"?t:"".concat(t)}function ja(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function ka(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function E(t,e,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(p){o(p)}}function c(d){try{u(s.throw(d))}catch(p){o(p)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})}function Na(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,a,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(s=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{s=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Cr=Object.create?(function(t,e,r,s){s===void 0&&(s=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,s,a)}):(function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]});function Sa(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Cr(e,t,r)}function br(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],s=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vs(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var s=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)i.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return i}function Ea(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(vs(arguments[e]));return t}function Oa(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var s=Array(t),a=0,e=0;e<r;e++)for(var i=arguments[e],o=0,l=i.length;o<l;o++,a++)s[a]=i[o];return s}function Ca(t,e,r){if(r||arguments.length===2)for(var s=0,a=e.length,i;s<a;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))}function St(t){return this instanceof St?(this.v=t,this):new St(t)}function Ta(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(t,e||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(h){return function(m){return Promise.resolve(m).then(h,p)}}function l(h,m){s[h]&&(a[h]=function(g){return new Promise(function(b,k){i.push([h,g,b,k])>1||c(h,g)})},m&&(a[h]=m(a[h])))}function c(h,m){try{u(s[h](m))}catch(g){f(i[0][3],g)}}function u(h){h.value instanceof St?Promise.resolve(h.value.v).then(d,p):f(i[0][2],h)}function d(h){c("next",h)}function p(h){c("throw",h)}function f(h,m){h(m),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Pa(t){var e,r;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,i){e[a]=t[a]?function(o){return(r=!r)?{value:St(t[a](o)),done:!1}:i?i(o):o}:i}}function Aa(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof br=="function"?br(t):t[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(i){r[i]=t[i]&&function(o){return new Promise(function(l,c){o=t[i](o),a(l,c,o.done,o.value)})}}function a(i,o,l,c){Promise.resolve(c).then(function(u){i({value:u,done:l})},o)}}function Ra(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Yd=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},Kr=function(t){return Kr=Object.getOwnPropertyNames||function(e){var r=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[r.length]=s);return r},Kr(t)};function $a(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Kr(t),s=0;s<r.length;s++)r[s]!=="default"&&Cr(e,t,r[s]);return Yd(e,t),e}function Ia(t){return t&&t.__esModule?t:{default:t}}function za(t,e,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(t):s?s.value:e.get(t)}function La(t,e,r,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r}function Da(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Ua(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],r&&(a=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:s,async:r})}else r&&t.stack.push({async:!0});return e}var Xd=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var s=new Error(r);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function Ma(t){function e(i){t.error=t.hasError?new Xd(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,s=0;function a(){for(;r=t.stack.pop();)try{if(!r.async&&s===1)return s=0,t.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(i).then(a,function(o){return e(o),a()})}else s|=1}catch(o){e(o)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function Ba(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,a,i,o){return s?e?".jsx":".js":a&&(!i||!o)?r:a+i+"."+o.toLowerCase()+"js"}):t}const Qd={__extends:xa,__assign:xr,__rest:Tt,__decorate:ba,__param:ya,__esDecorate:va,__runInitializers:wa,__propKey:_a,__setFunctionName:ja,__metadata:ka,__awaiter:E,__generator:Na,__createBinding:Cr,__exportStar:Sa,__values:br,__read:vs,__spread:Ea,__spreadArrays:Oa,__spreadArray:Ca,__await:St,__asyncGenerator:Ta,__asyncDelegator:Pa,__asyncValues:Aa,__makeTemplateObject:Ra,__importStar:$a,__importDefault:Ia,__classPrivateFieldGet:za,__classPrivateFieldSet:La,__classPrivateFieldIn:Da,__addDisposableResource:Ua,__disposeResources:Ma,__rewriteRelativeImportExtension:Ba},eh=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Ua,get __assign(){return xr},__asyncDelegator:Pa,__asyncGenerator:Ta,__asyncValues:Aa,__await:St,__awaiter:E,__classPrivateFieldGet:za,__classPrivateFieldIn:Da,__classPrivateFieldSet:La,__createBinding:Cr,__decorate:ba,__disposeResources:Ma,__esDecorate:va,__exportStar:Sa,__extends:xa,__generator:Na,__importDefault:Ia,__importStar:$a,__makeTemplateObject:Ra,__metadata:ka,__param:ya,__propKey:_a,__read:vs,__rest:Tt,__rewriteRelativeImportExtension:Ba,__runInitializers:wa,__setFunctionName:ja,__spread:Ea,__spreadArray:Ca,__spreadArrays:Oa,__values:br,default:Qd},Symbol.toStringTag,{value:"Module"})),th=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let Tr=class extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}},Fa=class extends Tr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Yr=class extends Tr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Xr=class extends Tr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var yr;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(yr||(yr={}));class rh{constructor(e,{headers:r={},customFetch:s,region:a=yr.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=th(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return E(this,arguments,void 0,function*(r,s={}){var a;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:p}=s;let f={},{region:h}=s;h||(h=this.region);const m=new URL(`${this.url}/${r}`);h&&h!=="any"&&(f["x-region"]=h,m.searchParams.set("forceFunctionRegion",h));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(f["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(f["Content-Type"]="application/json",g=JSON.stringify(u)):g=u;let b=d;p&&(o=new AbortController,i=setTimeout(()=>o.abort(),p),d?(b=o.signal,d.addEventListener("abort",()=>o.abort())):b=o.signal);const k=yield this.fetch(m.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:g,signal:b}).catch(S=>{throw new Fa(S)}),w=k.headers.get("x-relay-error");if(w&&w==="true")throw new Yr(k);if(!k.ok)throw new Xr(k);let y=((a=k.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),N;return y==="application/json"?N=yield k.json():y==="application/octet-stream"||y==="application/pdf"?N=yield k.blob():y==="text/event-stream"?N=k:y==="multipart/form-data"?N=yield k.formData():N=yield k.text(),{data:N,error:null,response:k}}catch(l){return{data:null,error:l,response:l instanceof Xr||l instanceof Yr?l.context:void 0}}finally{i&&clearTimeout(i)}})}}const sh=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return yr},FunctionsClient:rh,FunctionsError:Tr,FunctionsFetchError:Fa,FunctionsHttpError:Xr,FunctionsRelayError:Yr},Symbol.toStringTag,{value:"Module"})),qa=qt(sh);var _e={};const Pt=qt(eh);var er={},tr={},rr={},sr={},nr={},ar={},an;function Za(){if(an)return ar;an=1,Object.defineProperty(ar,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return ar.default=t,ar}var on;function Wa(){if(on)return nr;on=1,Object.defineProperty(nr,"__esModule",{value:!0});const e=Pt.__importDefault(Za());let r=class{constructor(a){var i,o;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(o=a.isMaybeSingle)!==null&&o!==void 0?o:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,p,f;let h=null,m=null,g=null,b=c.status,k=c.statusText;if(c.ok){if(this.method!=="HEAD"){const S=await c.text();S===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?m=S:m=JSON.parse(S))}const y=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),N=(p=c.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");y&&N&&N.length>1&&(g=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(h={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,g=null,b=406,k="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const y=await c.text();try{h=JSON.parse(y),Array.isArray(h)&&c.status===404&&(m=[],h=null,b=200,k="OK")}catch{c.status===404&&y===""?(b=204,k="No Content"):h={message:y}}if(h&&this.isMaybeSingle&&(!((f=h?.details)===null||f===void 0)&&f.includes("0 rows"))&&(h=null,b=200,k="OK"),h&&this.shouldThrowOnError)throw new e.default(h)}return{error:h,data:m,count:g,status:b,statusText:k}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,p,f,h,m;let g="";const b=c?.cause;if(b){const k=(u=b?.message)!==null&&u!==void 0?u:"",w=(d=b?.code)!==null&&d!==void 0?d:"";g=`${(p=c?.name)!==null&&p!==void 0?p:"FetchError"}: ${c?.message}`,g+=`

Caused by: ${(f=b?.name)!==null&&f!==void 0?f:"Error"}: ${k}`,w&&(g+=` (${w})`),b?.stack&&(g+=`
${b.stack}`)}else g=(h=c?.stack)!==null&&h!==void 0?h:"";return{error:{message:`${(m=c?.name)!==null&&m!==void 0?m:"FetchError"}: ${c?.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(a,i)}returns(){return this}overrideTypes(){return this}};return nr.default=r,nr}var ln;function Va(){if(ln)return sr;ln=1,Object.defineProperty(sr,"__esModule",{value:!0});const e=Pt.__importDefault(Wa());let r=class extends e.default{select(a){let i=!1;const o=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const p=[a?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${f}"; options=${p};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};return sr.default=r,sr}var cn;function ws(){if(cn)return rr;cn=1,Object.defineProperty(rr,"__esModule",{value:!0});const e=Pt.__importDefault(Va()),r=new RegExp("[,()]");let s=class extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${u}fts${d}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}};return rr.default=s,rr}var un;function Ha(){if(un)return tr;un=1,Object.defineProperty(tr,"__esModule",{value:!0});const e=Pt.__importDefault(ws());let r=class{constructor(a,{headers:i={},schema:o,fetch:l}){this.url=a,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(a,i){const{head:o=!1,count:l}=i??{},c=o?"HEAD":"GET";let u=!1;const d=(a??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:o=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const u=a.reduce((d,p)=>d.concat(Object.keys(p)),[]);if(u.length>0){const d=[...new Set(u)].map(p=>`"${p}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(p.length>0){const f=[...new Set(p)].map(h=>`"${h}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(a,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:a}={}){var i;const o="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};return tr.default=r,tr}var dn;function nh(){if(dn)return er;dn=1,Object.defineProperty(er,"__esModule",{value:!0});const t=Pt,e=t.__importDefault(Ha()),r=t.__importDefault(ws());let s=class Ja{constructor(i,{headers:o={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new Ja(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:c=!1,count:u}={}){var d;let p;const f=new URL(`${this.url}/rpc/${i}`);let h;l||c?(p=l?"HEAD":"GET",Object.entries(o).filter(([g,b])=>b!==void 0).map(([g,b])=>[g,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([g,b])=>{f.searchParams.append(g,b)})):(p="POST",h=o);const m=new Headers(this.headers);return u&&m.set("Prefer",`count=${u}`),new r.default({method:p,url:f,headers:m,schema:this.schemaName,body:h,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};return er.default=s,er}var hn;function Ga(){if(hn)return _e;hn=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.PostgrestError=_e.PostgrestBuilder=_e.PostgrestTransformBuilder=_e.PostgrestFilterBuilder=_e.PostgrestQueryBuilder=_e.PostgrestClient=void 0;const t=Pt,e=t.__importDefault(nh());_e.PostgrestClient=e.default;const r=t.__importDefault(Ha());_e.PostgrestQueryBuilder=r.default;const s=t.__importDefault(ws());_e.PostgrestFilterBuilder=s.default;const a=t.__importDefault(Va());_e.PostgrestTransformBuilder=a.default;const i=t.__importDefault(Wa());_e.PostgrestBuilder=i.default;const o=t.__importDefault(Za());return _e.PostgrestError=o.default,_e.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:i.default,PostgrestError:o.default},_e}class Ka{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ah="2.87.1",ih=`realtime-js/${ah}`,Ya="1.0.0",oh="2.0.0",fn=Ya,Qr=1e4,lh=1e3,ch=100;var it;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(it||(it={}));var ue;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ue||(ue={}));var ze;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ze||(ze={}));var es;(function(t){t.websocket="websocket"})(es||(es={}));var ot;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ot||(ot={}));class uh{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,s;const a=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var r,s;const a=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,s){var a,i;const o=e.topic,l=(a=e.ref)!==null&&a!==void 0?a:"",c=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},p=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+p.length,h=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(h),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,c.length),m.setUint8(g++,l.length),m.setUint8(g++,o.length),m.setUint8(g++,u.length),m.setUint8(g++,p.length),m.setUint8(g++,r),Array.from(c,k=>m.setUint8(g++,k.charCodeAt(0))),Array.from(l,k=>m.setUint8(g++,k.charCodeAt(0))),Array.from(o,k=>m.setUint8(g++,k.charCodeAt(0))),Array.from(u,k=>m.setUint8(g++,k.charCodeAt(0))),Array.from(p,k=>m.setUint8(g++,k.charCodeAt(0)));var b=new Uint8Array(h.byteLength+s.byteLength);return b.set(new Uint8Array(h),0),b.set(new Uint8Array(s),h.byteLength),b.buffer}decode(e,r){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return r(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,i,o,l,c]=s;return r({join_ref:a,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(e){const r=new DataView(e),s=r.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,a)}}_decodeUserBroadcast(e,r,s){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=s.decode(e.slice(c,c+a));c=c+a;const d=s.decode(e.slice(c,c+i));c=c+i;const p=s.decode(e.slice(c,c+o));c=c+o;const f=e.slice(c,e.byteLength),h=l===this.JSON_ENCODING?JSON.parse(s.decode(f)):f,m={type:this.BROADCAST_EVENT,event:d,payload:h};return o>0&&(m.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>r.includes(s)))}}class Xa{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var X;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(X||(X={}));const pn=(t,e,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=dh(o,t,e,a),i),{}):{}},dh=(t,e,r,s)=>{const a=e.find(l=>l.name===t),i=a?.type,o=r[t];return i&&!s.includes(i)?Qa(i,o):ts(o)},Qa=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return mh(e,r)}switch(t){case X.bool:return hh(e);case X.float4:case X.float8:case X.int2:case X.int4:case X.int8:case X.numeric:case X.oid:return fh(e);case X.json:case X.jsonb:return ph(e);case X.timestamp:return gh(e);case X.abstime:case X.date:case X.daterange:case X.int4range:case X.int8range:case X.money:case X.reltime:case X.text:case X.time:case X.timestamptz:case X.timetz:case X.tsrange:case X.tstzrange:return ts(e);default:return ts(e)}},ts=t=>t,hh=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},fh=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ph=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},mh=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Qa(e,l))}return t},gh=t=>typeof t=="string"?t.replace(" ","T"):t,ei=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Lr{constructor(e,r,s={},a=Qr){this.channel=e,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var rs;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(rs||(rs={}));let ti=class lr{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lr.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=lr.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=lr.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,a){const i=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const p=i[u];if(p){const f=d.map(b=>b.presence_ref),h=p.map(b=>b.presence_ref),m=d.filter(b=>h.indexOf(b.presence_ref)<0),g=p.filter(b=>f.indexOf(b.presence_ref)<0);m.length>0&&(l[u]=m),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},s,a)}static syncDiff(e,r,s,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const p=e[l].map(h=>h.presence_ref),f=d.filter(h=>p.indexOf(h.presence_ref)<0);e[l].unshift(...f)}s(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(p=>p.presence_ref);u=u.filter(p=>d.indexOf(p.presence_ref)<0),e[l]=u,a(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const a=e[s];return"metas"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var ss;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ss||(ss={}));var _t;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(_t||(_t={}));var Fe;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Fe||(Fe={}));const xh=ue;let ri=class zt{constructor(e,r={config:{}},s){var a,i;if(this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=ue.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Lr(this,ze.join,this.params,this.timeout),this.rejoinTimer=new Xa(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ue.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ue.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ue.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ze.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new ti(this),this.broadcastEndpointURL=ei(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var s,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ue.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(h=>h.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[_t.PRESENCE]&&this.bindings[_t.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(h=>e?.(Fe.CHANNEL_ERROR,h)),this._onClose(()=>e?.(Fe.CLOSED)),this.updateJoinPayload(Object.assign({config:f},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){e?.(Fe.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,b=(m=g?.length)!==null&&m!==void 0?m:0,k=[];for(let w=0;w<b;w++){const y=g[w],{filter:{event:N,schema:S,table:I,filter:B}}=y,J=h&&h[w];if(J&&J.event===N&&zt.isFilterValueEqual(J.schema,S)&&zt.isFilterValueEqual(J.table,I)&&zt.isFilterValueEqual(J.filter,B))k.push(Object.assign(Object.assign({},y),{id:J.id}));else{this.unsubscribe(),this.state=ue.errored,e?.(Fe.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(Fe.SUBSCRIBED);return}}).receive("error",h=>{this.state=ue.errored,e?.(Fe.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e?.(Fe.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===ue.joined&&e===_t.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,s)}async httpSend(e,r,s={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ue.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ze.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Lr(this,ze.leave,{},e),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ue.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Lr(this,e,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ch){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var a,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=ze;if(s&&[l,c,u,d].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(h=>{var m,g,b;return((m=h.filter)===null||m===void 0?void 0:m.event)==="*"||((b=(g=h.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(h=>h.callback(f,s)):(i=this.bindings[o])===null||i===void 0||i.filter(h=>{var m,g,b,k,w,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const N=h.id,S=(m=h.filter)===null||m===void 0?void 0:m.event;return N&&((g=r.ids)===null||g===void 0?void 0:g.includes(N))&&(S==="*"||S?.toLocaleLowerCase()===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const N=(w=(k=h?.filter)===null||k===void 0?void 0:k.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return N==="*"||N===((y=r?.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:b,commit_timestamp:k,type:w,errors:y}=m;f=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:k,eventType:w,new:{},old:{},errors:y}),this._getPayloadRecords(m))}h.callback(f,s)})}_isClosed(){return this.state===ue.closed}_isJoined(){return this.state===ue.joined}_isJoining(){return this.state===ue.joining}_isLeaving(){return this.state===ue.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const a=e.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&zt.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ze.close,{},e)}_onError(e){this._on(ze.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ue.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=pn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=pn(e.columns,e.old_record)),r}};const Dr=()=>{},ir={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},bh=[1e3,2e3,5e3,1e4],yh=1e4,vh=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let wh=class{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Qr,this.transport=null,this.heartbeatIntervalMs=ir.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Dr,this.ref=0,this.reconnectTimer=null,this.vsn=fn,this.logger=Dr,this.conn=null,this.sendBuffer=[],this.serializer=new uh,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((s=r?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${es.websocket}`,this.httpEndpoint=ei(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ka.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case it.connecting:return ot.Connecting;case it.open:return ot.Open;case it.closing:return ot.Closing;default:return ot.Closed}}isConnected(){return this.connectionState()===ot.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new ri(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:s,payload:a,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(lh,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ir.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${s} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===it.open||this.conn.readyState===it.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ze.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${s}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([vh],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,s=!1;if(e)r=e,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:ih};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(ze.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Xa(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ir.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,a,i,o,l,c,u,d,p,f,h;switch(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:Qr,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:ir.HEARTBEAT_INTERVAL,this.worker=(i=e?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e?.heartbeatCallback)!==null&&l!==void 0?l:Dr,this.vsn=(c=e?.vsn)!==null&&c!==void 0?c:fn,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e?.reconnectAfterMs)!==null&&u!==void 0?u:(m=>bh[m-1]||yh),this.vsn){case Ya:this.encode=(d=e?.encode)!==null&&d!==void 0?d:((m,g)=>g(JSON.stringify(m))),this.decode=(p=e?.decode)!==null&&p!==void 0?p:((m,g)=>g(JSON.parse(m)));break;case oh:this.encode=(f=e?.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(h=e?.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}};const _h=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:xh,get REALTIME_LISTEN_TYPES(){return _t},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return ss},get REALTIME_PRESENCE_LISTEN_EVENTS(){return rs},get REALTIME_SUBSCRIBE_STATES(){return Fe},RealtimeChannel:ri,RealtimeClient:wh,RealtimePresence:ti,WebSocketFactory:Ka},Symbol.toStringTag,{value:"Module"})),si=qt(_h);class Vt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ee(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class ni extends Vt{constructor(e,r,s){super(e),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vr extends Vt{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const _s=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),jh=()=>Response,ns=t=>{if(Array.isArray(t))return t.map(r=>ns(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=ns(s)}),e},kh=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Nh=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),Ur=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Sh=(t,e,r)=>E(void 0,void 0,void 0,function*(){const s=yield jh();t instanceof s&&!r?.noResolveJson?t.json().then(a=>{const i=t.status||500,o=a?.statusCode||i+"";e(new ni(Ur(a),i,o))}).catch(a=>{e(new vr(Ur(a),a))}):e(new vr(Ur(t),t))}),Eh=(t,e,r,s)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||!s?a:(kh(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),r))};function Ht(t,e,r,s,a,i){return E(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,Eh(e,s,a,i)).then(c=>{if(!c.ok)throw c;return s?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Sh(c,l,s))})})}function Bt(t,e,r,s){return E(this,void 0,void 0,function*(){return Ht(t,"GET",e,r,s)})}function Ie(t,e,r,s,a){return E(this,void 0,void 0,function*(){return Ht(t,"POST",e,s,a,r)})}function as(t,e,r,s,a){return E(this,void 0,void 0,function*(){return Ht(t,"PUT",e,s,a,r)})}function Oh(t,e,r,s){return E(this,void 0,void 0,function*(){return Ht(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function js(t,e,r,s,a){return E(this,void 0,void 0,function*(){return Ht(t,"DELETE",e,s,a,r)})}class Ch{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return E(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ee(e))return{data:null,error:e};throw e}})}}var ai;class Th{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[ai]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ch(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return E(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ee(e))return{data:null,error:e};throw e}})}}ai=Symbol.toStringTag;const Ph={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ah{constructor(e,r={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=s,this.fetch=_s(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,s,a){return E(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},mn),a);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),a?.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),p=yield(e=="PUT"?as:Ie)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ee(i))return{data:null,error:i};throw i}})}upload(e,r,s){return E(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,a){return E(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:mn.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const p=yield as(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ee(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return E(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);r?.upsert&&(a["x-upsert"]="true");const i=yield Ie(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Vt("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}update(e,r,s){return E(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return E(this,void 0,void 0,function*(){try{return{data:yield Ie(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ee(a))return{data:null,error:a};throw a}})}copy(e,r,s){return E(this,void 0,void 0,function*(){try{return{data:{path:(yield Ie(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ee(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,s){return E(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield Ie(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s?.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ee(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,s){return E(this,void 0,void 0,function*(){try{const a=yield Ie(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ee(a))return{data:null,error:a};throw a}})}download(e,r){const a=typeof r?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(r?.transform||{}),o=i?`?${i}`:"",l=this._getFinalPath(e),c=()=>Bt(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new Th(c,this.shouldThrowOnError)}info(e){return E(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield Bt(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ns(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}exists(e){return E(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Oh(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s)&&s instanceof vr){const a=s.originalError;if([400,404].includes(a?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),a=[],i=r?.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof r?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(r?.transform||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}remove(e){return E(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}list(e,r,s){return E(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Ph),r),{prefix:e||""});return{data:yield Ie(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ee(a))return{data:null,error:a};throw a}})}listV2(e,r){return E(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Ie(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const ii="2.87.1",oi={"X-Client-Info":`storage-js/${ii}`};class Rh{constructor(e,r={},s,a){this.shouldThrowOnError=!1;const i=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oi),r),this.fetch=_s(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return E(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Bt(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}getBucket(e){return E(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}createBucket(e){return E(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield Ie(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ee(a))return{data:null,error:a};throw a}})}updateBucket(e,r){return E(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}emptyBucket(e){return E(this,void 0,void 0,function*(){try{return{data:yield Ie(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}deleteBucket(e){return E(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Ft=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function $h(t,e,r){const s=new URL(e,t);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&s.searchParams.set(a,i);return s.toString()}async function Ih(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function zh(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:a,body:i,headers:o}){const l=$h(t.baseUrl,s,a),c=await Ih(t.auth),u=await e(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),p=(u.headers.get("content-type")||"").includes("application/json"),f=p&&d?JSON.parse(d):d;if(!u.ok){const h=p?f:void 0,m=h?.error;throw new Ft(m?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:m?.type,icebergCode:m?.code,details:h})}return{status:u.status,headers:u.headers,data:f}}}}function or(t){return t.join("")}var Lh=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:or(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${or(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${or(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${or(t.namespace)}`}),!0}catch(e){if(e instanceof Ft&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Ft&&r.status===409)return;throw r}}};function ht(t){return t.join("")}var Dh=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ht(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ht(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ht(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ht(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ht(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ht(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Ft&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Ft&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},Uh=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=zh({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new Lh(this.client,e),this.tableOps=new Dh(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class li{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oi),r),this.fetch=_s(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return E(this,void 0,void 0,function*(){try{return{data:yield Ie(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}listBuckets(e){return E(this,void 0,void 0,function*(){try{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const s=r.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Bt(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}deleteBucket(e){return E(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ee(r))return{data:null,error:r};throw r}})}from(e){if(!Nh(e))throw new Vt("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Uh({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>E(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(i,o){const l=i[o];return typeof l!="function"?l:(...c)=>E(this,void 0,void 0,function*(){try{return{data:yield l.apply(i,c),error:null}}catch(u){if(s)throw u;return{data:null,error:u}}})}})}}const ks={"X-Client-Info":`storage-js/${ii}`,"Content-Type":"application/json"};class Ns extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Oe(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class cr extends Ns{constructor(e,r,s){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ci extends Ns{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var is;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(is||(is={}));const Pr=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Mh=()=>Response,ui=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Bh=t=>Array.from(new Float32Array(t)),Fh=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},gn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),qh=(t,e,r)=>E(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!r?.noResolveJson){const a=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const l=o?.statusCode||o?.code||a+"";e(new cr(gn(o),a,l))}).catch(()=>{const o=a+"",l=i.statusText||`HTTP ${a} error`;e(new cr(l,a,o))});else{const o=a+"",l=i.statusText||`HTTP ${a} error`;e(new cr(l,a,o))}}else e(new ci(gn(t),t))}),Zh=(t,e,r,s)=>{const a={method:t,headers:e?.headers||{}};return s?(ui(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),r)):a};function Wh(t,e,r,s,a,i){return E(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,Zh(e,s,a,i)).then(c=>{if(!c.ok)throw c;if(s?.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>qh(c,l,s))})})}function Te(t,e,r,s,a){return E(this,void 0,void 0,function*(){return Wh(t,"POST",e,s,a,r)})}class di{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ks),r),this.fetch=Pr(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return E(this,void 0,void 0,function*(){try{return{data:(yield Te(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}getIndex(e,r){return E(this,void 0,void 0,function*(){try{return{data:yield Te(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}listIndexes(e){return E(this,void 0,void 0,function*(){try{return{data:yield Te(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return E(this,void 0,void 0,function*(){try{return{data:(yield Te(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}}class hi{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ks),r),this.fetch=Pr(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return E(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Te(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}getVectors(e){return E(this,void 0,void 0,function*(){try{return{data:yield Te(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}listVectors(e){return E(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Te(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}queryVectors(e){return E(this,void 0,void 0,function*(){try{return{data:yield Te(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}deleteVectors(e){return E(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Te(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}}class fi{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ks),r),this.fetch=Pr(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return E(this,void 0,void 0,function*(){try{return{data:(yield Te(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}getBucket(e){return E(this,void 0,void 0,function*(){try{return{data:yield Te(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}listBuckets(){return E(this,arguments,void 0,function*(e={}){try{return{data:yield Te(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}deleteBucket(e){return E(this,void 0,void 0,function*(){try{return{data:(yield Te(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}}class pi extends fi{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new mi(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return E(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return E(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return E(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return E(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class mi extends di{constructor(e,r,s,a){super(e,r,a),this.vectorBucketName=s}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return E(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return E(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return E(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return E(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new gi(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class gi extends hi{constructor(e,r,s,a,i){super(e,r,i),this.vectorBucketName=s,this.indexName=a}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return E(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return E(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return E(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return E(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return E(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Vh extends Rh{constructor(e,r={},s,a){super(e,r,s,a)}from(e){return new Ah(this.url,this.headers,e,this.fetch)}get vectors(){return new pi(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new li(this.url+"/iceberg",this.headers,this.fetch)}}const Hh=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:li,StorageApiError:ni,StorageClient:Vh,StorageError:Vt,StorageUnknownError:vr,StorageVectorsApiError:cr,StorageVectorsClient:pi,StorageVectorsError:Ns,get StorageVectorsErrorCode(){return is},StorageVectorsUnknownError:ci,VectorBucketApi:fi,VectorBucketScope:mi,VectorDataApi:hi,VectorIndexApi:di,VectorIndexScope:gi,isPlainObject:ui,isStorageError:ee,isStorageVectorsError:Oe,normalizeToFloat32:Bh,resolveFetch:Pr,resolveResponse:Mh,validateVectorDimension:Fh},Symbol.toStringTag,{value:"Module"})),Jh=qt(Hh);var Mr={},Rt={},xn;function Gh(){return xn||(xn=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.version=void 0,Rt.version="2.87.1"),Rt}var bn;function Kh(){return bn||(bn=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=Gh();let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(Mr)),Mr}var Br={},yn;function Yh(){return yn||(yn=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=a=>a?(...i)=>a(...i):(...i)=>fetch(...i);t.resolveFetch=e;const r=()=>Headers;t.resolveHeadersConstructor=r;const s=(a,i,o)=>{const l=(0,t.resolveFetch)(o),c=(0,t.resolveHeadersConstructor)();return async(u,d)=>{var p;const f=(p=await i())!==null&&p!==void 0?p:a;let h=new c(d?.headers);return h.has("apikey")||h.set("apikey",a),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),l(u,Object.assign(Object.assign({},d),{headers:h}))}};t.fetchWithAuth=s})(Br)),Br}var We={},vn;function Xh(){if(vn)return We;vn=1,Object.defineProperty(We,"__esModule",{value:!0}),We.isBrowser=void 0,We.uuid=t,We.ensureTrailingSlash=e,We.applySettingDefaults=s,We.validateSupabaseUrl=a;function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var o=Math.random()*16|0,l=i=="x"?o:o&3|8;return l.toString(16)})}function e(i){return i.endsWith("/")?i:i+"/"}const r=()=>typeof window<"u";We.isBrowser=r;function s(i,o){var l,c;const{db:u,auth:d,realtime:p,global:f}=i,{db:h,auth:m,realtime:g,global:b}=o,k={db:Object.assign(Object.assign({},h),u),auth:Object.assign(Object.assign({},m),d),realtime:Object.assign(Object.assign({},g),p),storage:{},global:Object.assign(Object.assign(Object.assign({},b),f),{headers:Object.assign(Object.assign({},(l=b?.headers)!==null&&l!==void 0?l:{}),(c=f?.headers)!==null&&c!==void 0?c:{})}),accessToken:async()=>""};return i.accessToken?k.accessToken=i.accessToken:delete k.accessToken,k}function a(i){const o=i?.trim();if(!o)throw new Error("supabaseUrl is required.");if(!o.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e(o))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return We}var $t={};const xi="2.87.1",bt=30*1e3,os=3,Fr=os*bt,Qh="http://localhost:9999",ef="supabase.auth.token",tf={"X-Client-Info":`gotrue-js/${xi}`},ls="X-Supabase-Api-Version",bi={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},rf=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sf=600*1e3;let Et=class extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}};function O(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let yi=class extends Et{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}};function vi(t){return O(t)&&t.name==="AuthApiError"}let Je=class extends Et{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}},Ve=class extends Et{constructor(e,r,s,a){super(e,s,a),this.name=r,this.status=s}},Ee=class extends Ve{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function wi(t){return O(t)&&t.name==="AuthSessionMissingError"}let rt=class extends Ve{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Lt=class extends Ve{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Dt=class extends Ve{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function _i(t){return O(t)&&t.name==="AuthImplicitGrantRedirectError"}let cs=class extends Ve{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},wr=class extends Ve{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}};function ur(t){return O(t)&&t.name==="AuthRetryableFetchError"}let us=class extends Ve{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}};function nf(t){return O(t)&&t.name==="AuthWeakPasswordError"}let _r=class extends Ve{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const jr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wn=` 	
\r=`.split(""),af=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<wn.length;e+=1)t[wn[e].charCodeAt(0)]=-2;for(let e=0;e<jr.length;e+=1)t[jr[e].charCodeAt(0)]=e;return t})();function _n(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(jr[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(jr[s]),e.queuedBits-=6}}function ji(t,e,r){const s=af[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function jn(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{cf(o,s,r)};for(let o=0;o<t.length;o+=1)ji(t.charCodeAt(o),a,i);return e.join("")}function of(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function lf(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}of(s,e)}}function cf(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function jt(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)ji(t.charCodeAt(a),r,s);return new Uint8Array(e)}function uf(t){const e=[];return lf(t,r=>e.push(r)),new Uint8Array(e)}function lt(t){const e=[],r={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>_n(a,r,s)),_n(null,r,s),e.join("")}function df(t){return Math.round(Date.now()/1e3)+t}function hf(){return Symbol("auth-callback")}const ye=()=>typeof window<"u"&&typeof document<"u",et={tested:!1,writable:!1},ki=()=>{if(!ye())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(et.tested)return et.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),et.tested=!0,et.writable=!0}catch{et.tested=!0,et.writable=!1}return et.writable};function ff(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{e[a]=s}),e}const Ni=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),pf=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",yt=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},tt=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},be=async(t,e)=>{await t.removeItem(e)};class Ar{constructor(){this.promise=new Ar.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Ar.promiseConstructor=Promise;function qr(t){const e=t.split(".");if(e.length!==3)throw new _r("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!rf.test(e[s]))throw new _r("JWT not in base64url format");return{header:JSON.parse(jn(e[0])),payload:JSON.parse(jn(e[1])),signature:jt(e[2]),raw:{header:e[0],payload:e[1]}}}async function mf(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function gf(t,e){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function xf(t){return("0"+t.toString(16)).substr(-2)}function bf(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,xf).join("")}async function yf(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function vf(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await yf(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ft(t,e,r=!1){const s=bf();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await yt(t,`${e}-code-verifier`,a);const i=await vf(s);return[i,s===i?"plain":"s256"]}const wf=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _f(t){const e=t.headers.get(ls);if(!e||!e.match(wf))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function jf(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function kf(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Nf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pt(t){if(!Nf.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zr(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Sf(t,e){return new Proxy(t,{get:(r,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,s,a)}})}function kn(t){return JSON.parse(JSON.stringify(t))}const st=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ef=[502,503,504];async function Nn(t){var e;if(!pf(t))throw new wr(st(t),0);if(Ef.includes(t.status))throw new wr(st(t),t.status);let r;try{r=await t.json()}catch(i){throw new Je(st(i),i)}let s;const a=_f(t);if(a&&a.getTime()>=bi["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new us(st(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Ee}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new us(st(r),t.status,r.weak_password.reasons);throw new yi(st(r),t.status||500,s)}const Of=(t,e,r,s)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function $(t,e,r,s){var a;const i=Object.assign({},s?.headers);i[ls]||(i[ls]=bi["2024-01-01"].name),s?.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s?.query)!==null&&a!==void 0?a:{};s?.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Cf(t,e,r+l,{headers:i,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(c):{data:Object.assign({},c),error:null}}async function Cf(t,e,r,s,a,i){const o=Of(e,s,a,i);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new wr(st(c),0)}if(l.ok||await Nn(l),s?.noResolveJson)return l;try{return await l.json()}catch(c){await Nn(c)}}function $e(t){var e;let r=null;Af(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=df(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function Sn(t){const e=$e(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ge(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Tf(t){return{data:t,error:null}}function Pf(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=t,o=Tt(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function En(t){return t}function Af(t){return t.access_token&&t.refresh_token&&t.expires_in}const dr=["global","local","others"];let Ss=class{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=Ni(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=dr[0]){if(dr.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${dr.join(", ")}`);try{return await $(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(O(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await $(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ge})}catch(s){if(O(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=Tt(e,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s?.newEmail,delete a.newEmail),await $(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Pf,redirectTo:r?.redirectTo})}catch(r){if(O(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await $(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ge})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await $(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:En});if(d.error)throw d.error;const p=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(O(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){pt(e);try{return await $(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ge})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){pt(e);try{return await $(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Ge})}catch(s){if(O(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){pt(e);try{return await $(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ge})}catch(s){if(O(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){pt(e.userId);try{const{data:r,error:s}=await $(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _deleteFactor(e){pt(e.userId),pt(e.id);try{return{data:await $(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,s,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await $(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:En});if(d.error)throw d.error;const p=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(O(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await $(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await $(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await $(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(O(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await $(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await $(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}};function On(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const nt={debug:!!(globalThis&&ki()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Es extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let Si=class extends Es{};class Rf extends Es{}async function Ei(t,e,r){nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),nt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Si(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(nt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const Cn={};async function $f(t,e,r){var s;const a=(s=Cn[t])!==null&&s!==void 0?s:Promise.resolve(),i=Promise.race([a.catch(()=>null),e>=0?new Promise((o,l)=>{setTimeout(()=>{l(new Rf(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await r());return Cn[t]=i.catch(async o=>{if(o&&o.isAcquireTimeout)return await a,null;throw o}),await i}function If(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Oi(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function zf(t){return parseInt(t,16)}function Lf(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function Df(t){var e;const{chainId:r,domain:s,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:p,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const h=Oi(t.address),m=d?`${d}://${s}`:s,g=t.statement?`${t.statement}
`:"",b=`${m} wants you to sign in with your Ethereum account:
${h}

${g}`;let k=`URI: ${p}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(k+=`
Expiration Time: ${a.toISOString()}`),l&&(k+=`
Not Before: ${l.toISOString()}`),c&&(k+=`
Request ID: ${c}`),u){let w=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);w+=`
- ${y}`}k+=w}return`${b}
${k}`}class de extends Error{constructor({message:e,code:r,cause:s,name:a}){var i;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=a??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class kr extends de{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function Uf({error:t,options:e}){var r,s,a;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new de({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new de({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new de({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new de({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new de({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new de({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new de({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new de({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Ci(o)){if(i.rp.id!==o)return new de({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new de({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new de({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new de({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new de({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Mf({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new de({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new de({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(Ci(s)){if(r.rpId!==s)return new de({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new de({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new de({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new de({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Bf{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Ff=new Bf;function qf(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:s}=t,a=Tt(t,["challenge","user","excludeCredentials"]),i=jt(e).buffer,o=Object.assign(Object.assign({},r),{id:jt(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(s&&s.length>0){l.excludeCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const u=s[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:jt(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function Zf(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,s=Tt(t,["challenge","allowCredentials"]),a=jt(e).buffer,i=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:jt(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Wf(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:lt(new Uint8Array(t.response.attestationObject)),clientDataJSON:lt(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Vf(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,s=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:lt(new Uint8Array(a.authenticatorData)),clientDataJSON:lt(new Uint8Array(a.clientDataJSON)),signature:lt(new Uint8Array(a.signature)),userHandle:a.userHandle?lt(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ci(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Tn(){var t,e;return!!(ye()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Hf(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new kr("Browser returned unexpected credential type",e)}:{data:null,error:new kr("Empty credential response",e)}}catch(e){return{data:null,error:Uf({error:e,options:t})}}}async function Jf(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new kr("Browser returned unexpected credential type",e)}:{data:null,error:new kr("Empty credential response",e)}}catch(e){return{data:null,error:Mf({error:e,options:t})}}}const Gf={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Kf={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Nr(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of t)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))s[i]=o;else if(r(o))s[i]=o;else if(e(o)){const l=s[i];e(l)?s[i]=Nr(l,o):s[i]=Nr(o)}else s[i]=o}return s}function Yf(t,e){return Nr(Gf,t,e||{})}function Xf(t,e){return Nr(Kf,t,e||{})}class Qf{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:s,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:l};const c=a??Ff.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${s}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=Yf(o.webauthn.credential_options.publicKey,i?.create),{data:d,error:p}=await Hf({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}case"request":{const u=Xf(o.webauthn.credential_options.publicKey,i?.request),{data:d,error:p}=await Jf(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:p}}}}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new Je("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Et("rpId is required for WebAuthn authentication")};try{if(!Tn())return{data:null,error:new Je("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:s,credential_response:c.credential_response}})}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new Je("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Et("rpId is required for WebAuthn registration")};try{if(!Tn())return{data:null,error:new Je("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var p;return(p=d.data)===null||p===void 0?void 0:p.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d?.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:s,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new Je("Unexpected error in register",o)}}}}If();const ep={url:Qh,storageKey:ef,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tf,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Pn(t,e,r){return await r()}const mt={};let Os=class ds{get jwks(){var e,r;return(r=(e=mt[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){mt[this.storageKey]=Object.assign(Object.assign({},mt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=mt[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){mt[this.storageKey]=Object.assign(Object.assign({},mt[this.storageKey]),{cachedAt:e})}constructor(e){var r,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},ep),e);if(this.storageKey=i.storageKey,this.instanceID=(r=ds.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,ds.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&ye()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Ss({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Ni(i.fetch),this.lock=i.lock||Pn,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&ye()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=Ei:this.lock=Pn,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Qf(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:ki()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=On(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=On(this.memoryStorage)),ye()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${xi}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},s="none";if(ye()&&(r=ff(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),ye()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),_i(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return O(r)?this._returnResult({error:r}):this._returnResult({error:new Je("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,a;try{const i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:$e}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(O(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,s,a;try{let i;if("email"in e){const{email:d,password:p,options:f}=e;let h=null,m=null;this.flowType==="pkce"&&([h,m]=await ft(this.storage,this.storageKey)),i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:p,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:h,code_challenge_method:m},xform:$e})}else if("phone"in e){const{phone:d,password:p,options:f}=e;i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(s=f?.data)!==null&&s!==void 0?s:{},channel:(a=f?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:$e})}else throw new Lt("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await be(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await be(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Sn})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Sn})}else throw new Lt("You must provide either an email or phone number and a password");const{data:s,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const i=new rt;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,s,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,s,a,i,o,l,c,u,d,p,f;let h,m;if("message"in e)h=e.message,m=e.signature;else{const{chain:g,wallet:b,statement:k,options:w}=e;let y;if(ye())if(typeof b=="object")y=b;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")y=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=b}const N=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href),S=await y.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=Oi(S[0]);let B=(s=w?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!B){const A=await y.request({method:"eth_chainId"});B=zf(A)}const J={domain:N.host,address:I,statement:k,uri:N.href,version:"1",chainId:B,nonce:(a=w?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=w?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=w?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=w?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=w?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=w?.signInWithEthereum)===null||d===void 0?void 0:d.resources};h=Df(J),m=await y.request({method:"personal_sign",params:[Lf(h),I]})}try{const{data:g,error:b}=await $(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:m},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:$e});if(b)throw b;if(!g||!g.session||!g.user){const k=new rt;return this._returnResult({data:{user:null,session:null},error:k})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:b})}catch(g){if(O(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var r,s,a,i,o,l,c,u,d,p,f,h;let m,g;if("message"in e)m=e.message,g=e.signature;else{const{chain:b,wallet:k,statement:w,options:y}=e;let N;if(ye())if(typeof k=="object")N=k;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))N=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!y?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=k}const S=new URL((r=y?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in N&&N.signIn){const I=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y?.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),w?{statement:w}:null));let B;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")B=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)B=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)m=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),g=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${S.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(a=(s=y?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=y?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((p=(d=y?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...y.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const I=await N.signMessage(new TextEncoder().encode(m),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=I}}try{const{data:b,error:k}=await $(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:lt(g)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:$e});if(k)throw k;if(!b||!b.session||!b.user){const w=new rt;return this._returnResult({data:{user:null,session:null},error:w})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:k})}catch(b){if(O(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const r=await tt(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:i,error:o}=await $(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:$e});if(await be(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new rt;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await be(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:s,token:a,access_token:i,nonce:o}=e,l=await $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:$e}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new rt;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,s,a,i,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ft(this.storage,this.storageKey));const{error:p}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c?.data)!==null&&a!==void 0?a:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new Lt("You must provide either an email or phone number.")}catch(l){if(await be(this.storage,`${this.storageKey}-code-verifier`),O(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var r,s;try{let a,i;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await $(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:$e});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(O(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var r,s,a,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await ft(this.storage,this.storageKey));const u=await $(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:Tf});return!((i=u.data)===null||i===void 0)&&i.url&&ye()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await be(this.storage,`${this.storageKey}-code-verifier`),O(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new Ee;const{error:a}=await $(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(O(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:i}=e,{error:o}=await $(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:s,type:a,options:i}=e,{data:o,error:l}=await $(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:l})}throw new Lt("You must provide either an email or phone number and a type")}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await tt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Fr:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const o=await tt(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=Zr()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Sf(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ge}):await this._useSession(async r=>{var s,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ee}:await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Ge})})}catch(r){if(O(r))return wi(r)&&(await this._removeSession(),await be(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new Ee;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await ft(this.storage,this.storageKey));const{data:u,error:d}=await $(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ge});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(await be(this.storage,`${this.storageKey}-code-verifier`),O(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ee;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:o}=qr(e.access_token);if(o.exp&&(s=o.exp,a=s<=r),a){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(O(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Ee;const{data:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(O(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!ye())throw new Dt("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Dt(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new cs("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Dt("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new cs("No code detected.");const{data:w,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!o||!u)throw new Dt("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(l);let f=d+p;c&&(f=parseInt(c));const h=f-d;h*1e3<=bt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${p}s`);const m=f-p;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:g,error:b}=await this._getUser(i);if(b)throw b;const k={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:p,expires_at:f,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:k,redirectType:e.type},error:null})}catch(s){if(O(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await tt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(vi(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await be(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=hf(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await ft(this.storage,this.storageKey,!0));try{return await $(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await be(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:p,error:f}=i;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await $(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return ye()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:e.provider,url:s?.url},error:null})}catch(s){if(O(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:u,nonce:d}=e,p=await $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:$e}),{data:f,error:h}=p;return h?this._returnResult({data:{user:null,session:null},error:h}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new rt}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:h}))}catch(a){if(await be(this.storage,`${this.storageKey}-code-verifier`),O(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)throw o;return await $(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await gf(async a=>(a>0&&await mf(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await $(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:$e})),(a,i)=>{const o=200*Math.pow(2,a);return i&&ur(i)&&Date.now()+o-s<bt})}catch(s){if(this._debug(r,"error",s),O(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),ye()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await tt(this.storage,this.storageKey);if(a&&this.userStorage){let o=await tt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await yt(this.userStorage,this.storageKey+"-user",o)),a.user=(e=o?.user)!==null&&e!==void 0?e:Zr()}else if(a&&!a.user&&!a.user){const o=await tt(this.storage,this.storageKey+"-user");o&&o?.user?(a.user=o.user,await be(this.storage,this.storageKey+"-user"),await yt(this.storage,this.storageKey,a)):a.user=Zr()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Fr;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Fr}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),ur(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&o?.user?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new Ee;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ar;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ee;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),O(i)){const o={data:null,error:i};return ur(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await be(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await yt(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=kn(a);await yt(this.storage,this.storageKey,i)}else{const a=kn(r);await yt(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await be(this.storage,this.storageKey),await be(this.storage,this.storageKey+"-code-verifier"),await be(this.storage,this.storageKey+"-user"),this.userStorage&&await be(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ye()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),bt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/bt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${bt}ms, refresh threshold is ${os} ticks`),a<=os&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Es)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ye()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await ft(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(s?.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s?.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await $(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await $(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&c.type==="totp"&&(!((a=c?.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Wf(e.webauthn.credential_response):Vf(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await $(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await $(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:qf(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Zf(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r?.factors)!==null&&e!==void 0?e:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=qr(s.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(e=s.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?await $(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ee})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Ee});const o=await $(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ye()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(s){if(O(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Ee});const o=await $(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ye()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(s){if(O(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;return s?this._returnResult({data:null,error:s}):r?await $(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ee})})}catch(e){if(O(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?(await $(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ee})})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(l=>l.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+sf>a)return s;const{data:i,error:o}=await $(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:h,error:m}=await this.getSession();if(m||!h.session)return this._returnResult({data:null,error:m});s=h.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=qr(s);r?.allowExpired||jf(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){const{error:h}=await this.getUser(s);if(h)throw h;return{data:{claims:i,header:a,signature:o},error:null}}const d=kf(a.alg),p=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,p,o,uf(`${l}.${c}`)))throw new _r("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(s){if(O(s))return this._returnResult({data:null,error:s});throw s}}};Os.nextInstanceID={};const tp=Ss,rp=Os,sp=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:tp,AuthApiError:yi,AuthClient:rp,AuthError:Et,AuthImplicitGrantRedirectError:Dt,AuthInvalidCredentialsError:Lt,AuthInvalidJwtError:_r,AuthInvalidTokenResponseError:rt,AuthPKCEGrantCodeExchangeError:cs,AuthRetryableFetchError:wr,AuthSessionMissingError:Ee,AuthUnknownError:Je,AuthWeakPasswordError:us,CustomAuthError:Ve,GoTrueAdminApi:Ss,GoTrueClient:Os,NavigatorLockAcquireTimeoutError:Si,SIGN_OUT_SCOPES:dr,isAuthApiError:vi,isAuthError:O,isAuthImplicitGrantRedirectError:_i,isAuthRetryableFetchError:ur,isAuthSessionMissingError:wi,isAuthWeakPasswordError:nf,lockInternals:nt,navigatorLock:Ei,processLock:$f},Symbol.toStringTag,{value:"Module"})),Ti=qt(sp);var An;function np(){if(An)return $t;An=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.SupabaseAuthClient=void 0;const t=Ti;let e=class extends t.AuthClient{constructor(s){super(s)}};return $t.SupabaseAuthClient=e,$t}var Rn;function $n(){if(Rn)return Qt;Rn=1,Object.defineProperty(Qt,"__esModule",{value:!0});const t=qa,e=Ga(),r=si,s=Jh,a=Kh(),i=Yh(),o=Xh(),l=np();class c{constructor(d,p,f){var h,m,g;this.supabaseUrl=d,this.supabaseKey=p;const b=(0,o.validateSupabaseUrl)(d);if(!p)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",b),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",b),this.storageUrl=new URL("storage/v1",b),this.functionsUrl=new URL("functions/v1",b);const k=`sb-${b.hostname.split(".")[0]}-auth-token`,w={db:a.DEFAULT_DB_OPTIONS,realtime:a.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},a.DEFAULT_AUTH_OPTIONS),{storageKey:k}),global:a.DEFAULT_GLOBAL_OPTIONS},y=(0,o.applySettingDefaults)(f??{},w);this.storageKey=(h=y.auth.storageKey)!==null&&h!==void 0?h:"",this.headers=(m=y.global.headers)!==null&&m!==void 0?m:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(N,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((g=y.auth)!==null&&g!==void 0?g:{},this.headers,y.global.fetch),this.fetch=(0,i.fetchWithAuth)(p,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.accessToken&&this.accessToken().then(N=>this.realtime.setAuth(N)).catch(N=>console.warn("Failed to set initial Realtime auth token:",N)),this.rest=new e.PostgrestClient(new URL("rest/v1",b).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new s.StorageClient(this.storageUrl.href,this.headers,this.fetch,f?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new t.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(d){return this.rest.from(d)}schema(d){return this.rest.schema(d)}rpc(d,p={},f={head:!1,get:!1,count:void 0}){return this.rest.rpc(d,p,f)}channel(d,p={config:{}}){return this.realtime.channel(d,p)}getChannels(){return this.realtime.getChannels()}removeChannel(d){return this.realtime.removeChannel(d)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var d,p;if(this.accessToken)return await this.accessToken();const{data:f}=await this.auth.getSession();return(p=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&p!==void 0?p:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:d,persistSession:p,detectSessionInUrl:f,storage:h,userStorage:m,storageKey:g,flowType:b,lock:k,debug:w,throwOnError:y},N,S){const I={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new l.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},I),N),storageKey:g,autoRefreshToken:d,persistSession:p,detectSessionInUrl:f,storage:h,userStorage:m,flowType:b,lock:k,debug:w,throwOnError:y,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(B=>B.toLowerCase()==="authorization")})}_initRealtimeClient(d){return new r.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},d),{params:Object.assign({apikey:this.supabaseKey},d?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((p,f)=>{this._handleTokenChanged(p,"CLIENT",f?.access_token)})}_handleTokenChanged(d,p,f){(d==="TOKEN_REFRESHED"||d==="SIGNED_IN")&&this.changedAccessToken!==f?(this.changedAccessToken=f,this.realtime.setAuth(f)):d==="SIGNED_OUT"&&(this.realtime.setAuth(),p=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Qt.default=c,Qt}var In;function ap(){return In||(In=1,(function(t){var e=Ze&&Ze.__createBinding||(Object.create?(function(d,p,f,h){h===void 0&&(h=f);var m=Object.getOwnPropertyDescriptor(p,f);(!m||("get"in m?!p.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return p[f]}}),Object.defineProperty(d,h,m)}):(function(d,p,f,h){h===void 0&&(h=f),d[h]=p[f]})),r=Ze&&Ze.__exportStar||function(d,p){for(var f in d)f!=="default"&&!Object.prototype.hasOwnProperty.call(p,f)&&e(p,d,f)},s=Ze&&Ze.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const a=s($n());r(Ti,t);var i=Ga();Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return i.PostgrestError}});var o=qa;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return o.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return o.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return o.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return o.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return o.FunctionRegion}}),r(si,t);var l=$n();Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return s(l).default}});const c=(d,p,f)=>new a.default(d,p,f);t.createClient=c;function u(){if(typeof window<"u"||typeof process>"u")return!1;const d=process.version;if(d==null)return!1;const p=d.match(/^v(\d+)\./);return p?parseInt(p[1],10)<=18:!1}u()&&console.warn("â ï¸  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Ze)),Ze}var Pi=ap();const Ai=Ji(Pi),ip=Yi({__proto__:null,default:Ai},[Pi]),{PostgrestError:Sm,FunctionsHttpError:Em,FunctionsFetchError:Om,FunctionsRelayError:Cm,FunctionsError:Tm,FunctionRegion:Pm,SupabaseClient:Am,createClient:op,GoTrueAdminApi:Rm,GoTrueClient:$m,AuthAdminApi:Im,AuthClient:zm,navigatorLock:Lm,NavigatorLockAcquireTimeoutError:Dm,lockInternals:Um,processLock:Mm,SIGN_OUT_SCOPES:Bm,AuthError:Fm,AuthApiError:qm,AuthUnknownError:Zm,CustomAuthError:Wm,AuthSessionMissingError:Vm,AuthInvalidTokenResponseError:Hm,AuthInvalidCredentialsError:Jm,AuthImplicitGrantRedirectError:Gm,AuthPKCEGrantCodeExchangeError:Km,AuthRetryableFetchError:Ym,AuthWeakPasswordError:Xm,AuthInvalidJwtError:Qm,isAuthError:eg,isAuthApiError:tg,isAuthSessionMissingError:rg,isAuthImplicitGrantRedirectError:sg,isAuthRetryableFetchError:ng,isAuthWeakPasswordError:ag,RealtimePresence:ig,RealtimeChannel:og,RealtimeClient:lg,REALTIME_LISTEN_TYPES:cg,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:ug,REALTIME_PRESENCE_LISTEN_EVENTS:dg,REALTIME_SUBSCRIBE_STATES:hg,REALTIME_CHANNEL_STATES:fg}=Ai||ip,lp="https://uigjzcwdyfulrmmeyeys.supabase.co",cp="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVpZ2p6Y3dkeWZ1bHJtbWV5ZXlzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI1MzUyNDYsImV4cCI6MjA3ODExMTI0Nn0.nwpTzz450fNh6vQRCpRX0dV0XqBxcOjny6eUkYQiYEA",q=op(lp,cp,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),up=Object.freeze(Object.defineProperty({__proto__:null,supabase:q},Symbol.toStringTag,{value:"Module"})),gt="/assets/honey_jar-ZSNxEqtH.jpg",at="/assets/beehive_new-cPfHjPMl.png",dp=[{id:"default-1",name:"Wildflower Honey",description:"Pure, raw wildflower honey with a rich, complex flavor.",price:450,category:"honey",stock:5,image_url:gt,seller_id:"",is_active:!0,created_at:"",updated_at:""},{id:"default-2",name:"Acacia Honey",description:"Light and mild acacia honey, perfect for tea and desserts.",price:550,category:"honey",stock:5,image_url:gt,seller_id:"",is_active:!0,created_at:"",updated_at:""},{id:"default-3",name:"Manuka Honey",description:"Premium New Zealand Manuka honey with UMF 10+ rating.",price:1200,category:"honey",stock:5,image_url:gt,seller_id:"",is_active:!0,created_at:"",updated_at:""},{id:"default-4",name:"Raw Forest Honey",description:"Unprocessed forest honey collected from pristine environments.",price:380,category:"honey",stock:5,image_url:gt,seller_id:"",is_active:!0,created_at:"",updated_at:""},{id:"default-5",name:"Organic Clover Honey",description:"Certified organic clover honey with a sweet, mild taste.",price:420,category:"honey",stock:5,image_url:gt,seller_id:"",is_active:!0,created_at:"",updated_at:""},{id:"default-6",name:"Eucalyptus Honey",description:"Aromatic eucalyptus honey with natural healing properties.",price:480,category:"honey",stock:5,image_url:gt,seller_id:"",is_active:!0,created_at:"",updated_at:""},{id:"beehive-starter-kit",name:"Beehive Wooden Box",description:"Complete Beehive Kit for Beekeeper with 1 small box",price:5e3,category:"beehive",stock:5,image_url:at,seller_id:"pollibee-official",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],hp=()=>{const t=Ke(),{addToCart:e,cartItems:r,updateQuantity:s,removeFromCart:a}=Ct(),[i,o]=_.useState([]),[l,c]=_.useState(!0),[u,d]=_.useState(null);_.useEffect(()=>{(async()=>{try{c(!0);const{data:h,error:m}=await q.from("products").select("*");if(m)throw m;o(h&&h.length>0?h:dp)}catch(h){d(h instanceof Error?h.message:"Failed to fetch products."),console.error("Error fetching products:",h)}finally{c(!1)}})()},[]);const p=f=>{e(f)};return n.jsx("div",{className:"bg-honeybee-background text-honeybee-secondary",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 lg:py-24",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-serif font-bold text-honeybee-primary",children:"Our Honey Selection"}),n.jsx("p",{className:"mt-3 lg:mt-4 text-sm lg:text-lg max-w-2xl mx-auto",children:"Explore our collection of premium, all-natural honey."})]}),l&&n.jsx("div",{className:"text-center mt-16",children:"Loading products..."}),u&&n.jsx("div",{className:"text-center mt-16 text-red-500",children:u}),!l&&!u&&n.jsx("div",{className:"mt-8 lg:mt-16 grid grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-8",children:i.map(f=>n.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition duration-300",children:[n.jsx("div",{className:"h-32 sm:h-48 lg:h-56 overflow-hidden",children:n.jsx("img",{src:f.image_url,alt:f.name,className:"w-full h-full object-cover transform hover:scale-105 transition duration-500"})}),n.jsxs("div",{className:"p-3 lg:p-6",children:[n.jsx("h3",{className:"text-sm lg:text-lg font-medium text-honeybee-secondary line-clamp-1",children:f.name}),n.jsx("p",{className:"text-honeybee-dark-brown mt-1 lg:mt-2 text-xs lg:text-sm line-clamp-2 hidden sm:block",children:f.description}),n.jsxs("div",{className:"mt-2 lg:mt-4 flex items-center justify-between",children:[n.jsxs("span",{className:"text-black font-bold text-sm lg:text-base",children:["â¹",f.price.toFixed(0)]}),(()=>{const h=r.find(m=>m.id===f.id);return h?n.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-full px-2 py-1",children:[n.jsx("button",{onClick:()=>{h.quantity>1?s(h.id,h.quantity-1):a(h.id)},className:"text-honeybee-primary hover:text-honeybee-accent font-bold px-2",children:"-"}),n.jsx("span",{className:"text-sm font-semibold",children:h.quantity}),n.jsx("button",{onClick:()=>{h.quantity<5&&s(h.id,h.quantity+1)},className:`text-honeybee-primary hover:text-honeybee-accent font-bold px-2 ${h.quantity>=5?"opacity-50 cursor-not-allowed":""}`,disabled:h.quantity>=5,children:"+"})]}):f.category==="beehive"?n.jsx("button",{onClick:()=>t("/product/beehive"),className:"bg-honeybee-primary hover:bg-honeybee-accent text-white rounded-full px-4 py-2 text-sm transition duration-300 font-semibold",children:"View Details"}):n.jsx("button",{onClick:()=>p(f),className:"bg-honeybee-primary hover:bg-honeybee-accent text-white rounded-full p-2 transition duration-300",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})})()]})]})]},f.id))})]})})};var Jt={};(function t(e,r,s,a){var i=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=(function(){if(!e.OffscreenCanvas)return!1;try{var v=new OffscreenCanvas(1,1),x=v.getContext("2d");x.fillRect(0,0,1,1);var T=v.transferToImageBitmap();x.createPattern(T,"no-repeat")}catch{return!1}return!0})();function c(){}function u(v){var x=r.exports.Promise,T=x!==void 0?x:e.Promise;return typeof T=="function"?new T(v):(v(c,c),null)}var d=(function(v,x){return{transform:function(T){if(v)return T;if(x.has(T))return x.get(T);var z=new OffscreenCanvas(T.width,T.height),M=z.getContext("2d");return M.drawImage(T,0,0),x.set(T,z),z},clear:function(){x.clear()}}})(l,new Map),p=(function(){var v=Math.floor(16.666666666666668),x,T,z={},M=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(x=function(F){var R=Math.random();return z[R]=requestAnimationFrame(function L(Z){M===Z||M+v-1<Z?(M=Z,delete z[R],F()):z[R]=requestAnimationFrame(L)}),R},T=function(F){z[F]&&cancelAnimationFrame(z[F])}):(x=function(F){return setTimeout(F,v)},T=function(F){return clearTimeout(F)}),{frame:x,cancel:T}})(),f=(function(){var v,x,T={};function z(M){function F(R,L){M.postMessage({options:R||{},callback:L})}M.init=function(L){var Z=L.transferControlToOffscreen();M.postMessage({canvas:Z},[Z])},M.fire=function(L,Z,Y){if(x)return F(L,null),x;var ae=Math.random().toString(36).slice(2);return x=u(function(Q){function ie(xe){xe.data.callback===ae&&(delete T[ae],M.removeEventListener("message",ie),x=null,d.clear(),Y(),Q())}M.addEventListener("message",ie),F(L,ae),T[ae]=ie.bind(null,{data:{callback:ae}})}),x},M.reset=function(){M.postMessage({reset:!0});for(var L in T)T[L](),delete T[L]}}return function(){if(v)return v;if(!s&&i){var M=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{v=new Worker(URL.createObjectURL(new Blob([M])))}catch(F){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ð Could not load worker",F),null}z(v)}return v}})(),h={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function m(v,x){return x?x(v):v}function g(v){return v!=null}function b(v,x,T){return m(v&&g(v[x])?v[x]:h[x],T)}function k(v){return v<0?0:Math.floor(v)}function w(v,x){return Math.floor(Math.random()*(x-v))+v}function y(v){return parseInt(v,16)}function N(v){return v.map(S)}function S(v){var x=String(v).replace(/[^0-9a-f]/gi,"");return x.length<6&&(x=x[0]+x[0]+x[1]+x[1]+x[2]+x[2]),{r:y(x.substring(0,2)),g:y(x.substring(2,4)),b:y(x.substring(4,6))}}function I(v){var x=b(v,"origin",Object);return x.x=b(x,"x",Number),x.y=b(x,"y",Number),x}function B(v){v.width=document.documentElement.clientWidth,v.height=document.documentElement.clientHeight}function J(v){var x=v.getBoundingClientRect();v.width=x.width,v.height=x.height}function A(v){var x=document.createElement("canvas");return x.style.position="fixed",x.style.top="0px",x.style.left="0px",x.style.pointerEvents="none",x.style.zIndex=v,x}function D(v,x,T,z,M,F,R,L,Z){v.save(),v.translate(x,T),v.rotate(F),v.scale(z,M),v.arc(0,0,1,R,L,Z),v.restore()}function W(v){var x=v.angle*(Math.PI/180),T=v.spread*(Math.PI/180);return{x:v.x,y:v.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:v.startVelocity*.5+Math.random()*v.startVelocity,angle2D:-x+(.5*T-Math.random()*T),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:v.color,shape:v.shape,tick:0,totalTicks:v.ticks,decay:v.decay,drift:v.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:v.gravity*3,ovalScalar:.6,scalar:v.scalar,flat:v.flat}}function G(v,x){x.x+=Math.cos(x.angle2D)*x.velocity+x.drift,x.y+=Math.sin(x.angle2D)*x.velocity+x.gravity,x.velocity*=x.decay,x.flat?(x.wobble=0,x.wobbleX=x.x+10*x.scalar,x.wobbleY=x.y+10*x.scalar,x.tiltSin=0,x.tiltCos=0,x.random=1):(x.wobble+=x.wobbleSpeed,x.wobbleX=x.x+10*x.scalar*Math.cos(x.wobble),x.wobbleY=x.y+10*x.scalar*Math.sin(x.wobble),x.tiltAngle+=.1,x.tiltSin=Math.sin(x.tiltAngle),x.tiltCos=Math.cos(x.tiltAngle),x.random=Math.random()+2);var T=x.tick++/x.totalTicks,z=x.x+x.random*x.tiltCos,M=x.y+x.random*x.tiltSin,F=x.wobbleX+x.random*x.tiltCos,R=x.wobbleY+x.random*x.tiltSin;if(v.fillStyle="rgba("+x.color.r+", "+x.color.g+", "+x.color.b+", "+(1-T)+")",v.beginPath(),o&&x.shape.type==="path"&&typeof x.shape.path=="string"&&Array.isArray(x.shape.matrix))v.fill(C(x.shape.path,x.shape.matrix,x.x,x.y,Math.abs(F-z)*.1,Math.abs(R-M)*.1,Math.PI/10*x.wobble));else if(x.shape.type==="bitmap"){var L=Math.PI/10*x.wobble,Z=Math.abs(F-z)*.1,Y=Math.abs(R-M)*.1,ae=x.shape.bitmap.width*x.scalar,Q=x.shape.bitmap.height*x.scalar,ie=new DOMMatrix([Math.cos(L)*Z,Math.sin(L)*Z,-Math.sin(L)*Y,Math.cos(L)*Y,x.x,x.y]);ie.multiplySelf(new DOMMatrix(x.shape.matrix));var xe=v.createPattern(d.transform(x.shape.bitmap),"no-repeat");xe.setTransform(ie),v.globalAlpha=1-T,v.fillStyle=xe,v.fillRect(x.x-ae/2,x.y-Q/2,ae,Q),v.globalAlpha=1}else if(x.shape==="circle")v.ellipse?v.ellipse(x.x,x.y,Math.abs(F-z)*x.ovalScalar,Math.abs(R-M)*x.ovalScalar,Math.PI/10*x.wobble,0,2*Math.PI):D(v,x.x,x.y,Math.abs(F-z)*x.ovalScalar,Math.abs(R-M)*x.ovalScalar,Math.PI/10*x.wobble,0,2*Math.PI);else if(x.shape==="star")for(var H=Math.PI/2*3,Se=4*x.scalar,Ae=8*x.scalar,Re=x.x,qe=x.y,Qe=5,Ue=Math.PI/Qe;Qe--;)Re=x.x+Math.cos(H)*Ae,qe=x.y+Math.sin(H)*Ae,v.lineTo(Re,qe),H+=Ue,Re=x.x+Math.cos(H)*Se,qe=x.y+Math.sin(H)*Se,v.lineTo(Re,qe),H+=Ue;else v.moveTo(Math.floor(x.x),Math.floor(x.y)),v.lineTo(Math.floor(x.wobbleX),Math.floor(M)),v.lineTo(Math.floor(F),Math.floor(R)),v.lineTo(Math.floor(z),Math.floor(x.wobbleY));return v.closePath(),v.fill(),x.tick<x.totalTicks}function ne(v,x,T,z,M){var F=x.slice(),R=v.getContext("2d"),L,Z,Y=u(function(ae){function Q(){L=Z=null,R.clearRect(0,0,z.width,z.height),d.clear(),M(),ae()}function ie(){s&&!(z.width===a.width&&z.height===a.height)&&(z.width=v.width=a.width,z.height=v.height=a.height),!z.width&&!z.height&&(T(v),z.width=v.width,z.height=v.height),R.clearRect(0,0,z.width,z.height),F=F.filter(function(xe){return G(R,xe)}),F.length?L=p.frame(ie):Q()}L=p.frame(ie),Z=Q});return{addFettis:function(ae){return F=F.concat(ae),Y},canvas:v,promise:Y,reset:function(){L&&p.cancel(L),Z&&Z()}}}function U(v,x){var T=!v,z=!!b(x||{},"resize"),M=!1,F=b(x,"disableForReducedMotion",Boolean),R=i&&!!b(x||{},"useWorker"),L=R?f():null,Z=T?B:J,Y=v&&L?!!v.__confetti_initialized:!1,ae=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Q;function ie(H,Se,Ae){for(var Re=b(H,"particleCount",k),qe=b(H,"angle",Number),Qe=b(H,"spread",Number),Ue=b(H,"startVelocity",Number),Li=b(H,"decay",Number),Di=b(H,"gravity",Number),Ui=b(H,"drift",Number),Cs=b(H,"colors",N),Mi=b(H,"ticks",Number),Ts=b(H,"shapes"),Bi=b(H,"scalar"),Fi=!!b(H,"flat"),Ps=I(H),As=Re,Rr=[],qi=v.width*Ps.x,Zi=v.height*Ps.y;As--;)Rr.push(W({x:qi,y:Zi,angle:qe,spread:Qe,startVelocity:Ue,color:Cs[As%Cs.length],shape:Ts[w(0,Ts.length)],ticks:Mi,decay:Li,gravity:Di,drift:Ui,scalar:Bi,flat:Fi}));return Q?Q.addFettis(Rr):(Q=ne(v,Rr,Z,Se,Ae),Q.promise)}function xe(H){var Se=F||b(H,"disableForReducedMotion",Boolean),Ae=b(H,"zIndex",Number);if(Se&&ae)return u(function(Ue){Ue()});T&&Q?v=Q.canvas:T&&!v&&(v=A(Ae),document.body.appendChild(v)),z&&!Y&&Z(v);var Re={width:v.width,height:v.height};L&&!Y&&L.init(v),Y=!0,L&&(v.__confetti_initialized=!0);function qe(){if(L){var Ue={getBoundingClientRect:function(){if(!T)return v.getBoundingClientRect()}};Z(Ue),L.postMessage({resize:{width:Ue.width,height:Ue.height}});return}Re.width=Re.height=null}function Qe(){Q=null,z&&(M=!1,e.removeEventListener("resize",qe)),T&&v&&(document.body.contains(v)&&document.body.removeChild(v),v=null,Y=!1)}return z&&!M&&(M=!0,e.addEventListener("resize",qe,!1)),L?L.fire(H,Re,Qe):ie(H,Re,Qe)}return xe.reset=function(){L&&L.reset(),Q&&Q.reset()},xe}var he;function we(){return he||(he=U(null,{useWorker:!0,resize:!0})),he}function C(v,x,T,z,M,F,R){var L=new Path2D(v),Z=new Path2D;Z.addPath(L,new DOMMatrix(x));var Y=new Path2D;return Y.addPath(Z,new DOMMatrix([Math.cos(R)*M,Math.sin(R)*M,-Math.sin(R)*F,Math.cos(R)*F,T,z])),Y}function V(v){if(!o)throw new Error("path confetti are not supported in this browser");var x,T;typeof v=="string"?x=v:(x=v.path,T=v.matrix);var z=new Path2D(x),M=document.createElement("canvas"),F=M.getContext("2d");if(!T){for(var R=1e3,L=R,Z=R,Y=0,ae=0,Q,ie,xe=0;xe<R;xe+=2)for(var H=0;H<R;H+=2)F.isPointInPath(z,xe,H,"nonzero")&&(L=Math.min(L,xe),Z=Math.min(Z,H),Y=Math.max(Y,xe),ae=Math.max(ae,H));Q=Y-L,ie=ae-Z;var Se=10,Ae=Math.min(Se/Q,Se/ie);T=[Ae,0,0,Ae,-Math.round(Q/2+L)*Ae,-Math.round(ie/2+Z)*Ae]}return{type:"path",path:x,matrix:T}}function fe(v){var x,T=1,z="#000000",M='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof v=="string"?x=v:(x=v.text,T="scalar"in v?v.scalar:T,M="fontFamily"in v?v.fontFamily:M,z="color"in v?v.color:z);var F=10*T,R=""+F+"px "+M,L=new OffscreenCanvas(F,F),Z=L.getContext("2d");Z.font=R;var Y=Z.measureText(x),ae=Math.ceil(Y.actualBoundingBoxRight+Y.actualBoundingBoxLeft),Q=Math.ceil(Y.actualBoundingBoxAscent+Y.actualBoundingBoxDescent),ie=2,xe=Y.actualBoundingBoxLeft+ie,H=Y.actualBoundingBoxAscent+ie;ae+=ie+ie,Q+=ie+ie,L=new OffscreenCanvas(ae,Q),Z=L.getContext("2d"),Z.font=R,Z.fillStyle=z,Z.fillText(x,xe,H);var Se=1/T;return{type:"bitmap",bitmap:L.transferToImageBitmap(),matrix:[Se,0,0,Se,-ae*Se/2,-Q*Se/2]}}r.exports=function(){return we().apply(this,arguments)},r.exports.reset=function(){we().reset()},r.exports.create=U,r.exports.shapeFromPath=V,r.exports.shapeFromText=fe})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),Jt,!1);const hr=Jt.exports;Jt.exports.create;const fp=()=>{const{cartItems:t,getTotal:e,removeFromCart:r}=Ct(),[s,a]=_.useState(1),[i,o]=_.useState(""),[l,c]=_.useState(0),[u,d]=_.useState(""),[p,f]=_.useState({email:"",signUp:!1}),[h,m]=_.useState({firstName:"",lastName:"",company:"",address:"",apartment:"",city:"",country:"",state:"",zip:"",phone:""}),g=t.every(U=>U.name.includes("Subscription Plan")),b=e(),k=b-b*l,w={HONEY10:.1,BEE20:.2,OFFER:.1},y=()=>{const U=i.toUpperCase();w[U]?(c(w[U]),d(""),hr({particleCount:400,spread:160,origin:{y:.6},startVelocity:60,zIndex:9999})):(c(0),d("Invalid coupon code"))},N=()=>{},S=()=>{g?s<3&&a(s+1):s<4&&a(s+1)},I=()=>{s>1&&a(s-1)},B=U=>{const{name:he,value:we,type:C,checked:V}=U.target;f(fe=>({...fe,[he]:C==="checkbox"?V:we}))},J=U=>{const{name:he,value:we}=U.target;m(C=>({...C,[he]:we}))},A=()=>null,D=()=>n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Contact information"}),n.jsx("input",{type:"email",name:"email",value:p.email,onChange:B,placeholder:"Email",className:"w-full border border-gray-300 rounded px-3 py-2 mb-2 focus:outline-none focus:ring-2 focus:ring-purple-700"}),n.jsxs("label",{className:"inline-flex items-center text-sm mb-4",children:[n.jsx("input",{type:"checkbox",name:"signUp",checked:p.signUp,onChange:B,className:"form-checkbox text-purple-700"}),n.jsx("span",{className:"ml-2",children:"Sign up for exclusive offers and news via text messages & email."})]}),n.jsx("div",{className:"flex justify-between",children:n.jsx("button",{onClick:S,className:"bg-black text-white py-2 px-4 rounded hover:bg-gray-800 transition",children:g?"Continue to payment":"Continue to shipping"})})]}),W=()=>n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Shipping address"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[n.jsx("input",{type:"text",name:"firstName",value:h.firstName,onChange:J,placeholder:"First name",className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-700"}),n.jsx("input",{type:"text",name:"lastName",value:h.lastName,onChange:J,placeholder:"Last name",className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-700"})]}),n.jsx("input",{type:"text",name:"company",value:h.company,onChange:J,placeholder:"Company (optional)",className:"w-full border border-gray-300 rounded px-3 py-2 mb-2 focus:outline-none focus:ring-2 focus:ring-purple-700"}),n.jsx("input",{type:"text",name:"address",value:h.address,onChange:J,placeholder:"Address",className:"w-full border border-gray-300 rounded px-3 py-2 mb-2 focus:outline-none focus:ring-2 focus:ring-purple-700"}),n.jsx("input",{type:"text",name:"apartment",value:h.apartment,onChange:J,placeholder:"Apartment, suite, etc. (optional)",className:"w-full border border-gray-300 rounded px-3 py-2 mb-2 focus:outline-none focus:ring-2 focus:ring-purple-700"}),n.jsx("input",{type:"text",name:"city",value:h.city,onChange:J,placeholder:"City",className:"w-full border border-gray-300 rounded px-3 py-2 mb-2 focus:outline-none focus:ring-2 focus:ring-purple-700"}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-2",children:[n.jsxs("select",{name:"country",value:h.country,onChange:J,className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-700",children:[n.jsx("option",{value:"",children:"Country/region"}),n.jsx("option",{value:"United States",children:"United States"}),n.jsx("option",{value:"Canada",children:"Canada"})]}),n.jsxs("select",{name:"state",value:h.state,onChange:J,className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-700",children:[n.jsx("option",{value:"",children:"State"}),n.jsx("option",{value:"State",children:"State"})]}),n.jsx("input",{type:"text",name:"zip",value:h.zip,onChange:J,placeholder:"ZIP code",className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-700"})]}),n.jsx("input",{type:"text",name:"phone",value:h.phone,onChange:J,placeholder:"Phone number for shipping updates and offers (optional)",className:"w-full border border-gray-300 rounded px-3 py-2 mb-4 focus:outline-none focus:ring-2 focus:ring-purple-700"}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("button",{onClick:I,className:"underline text-purple-700",children:"Return to cart"}),n.jsx("button",{onClick:S,className:"bg-black text-white py-2 px-4 rounded hover:bg-gray-800 transition",children:"Choose shipping method"})]})]}),G=()=>n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Payment"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"coupon",className:"block font-semibold mb-1",children:"Gift card or discount code"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("input",{id:"coupon",type:"text",value:i,onChange:U=>o(U.target.value),placeholder:"Enter coupon code",className:"flex-grow border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-700"}),n.jsx("button",{onClick:y,className:"bg-gray-300 px-4 rounded hover:bg-gray-400 transition",children:"Apply"})]}),u&&n.jsx("p",{className:"text-red-600 mt-1",children:u}),l>0&&n.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg animate-fade-in",children:[n.jsxs("div",{className:"flex items-center text-green-800 font-bold mb-2",children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),'Coupon "',i.toUpperCase(),'" Applied Successfully!']}),n.jsxs("div",{className:"text-green-700 text-sm space-y-1",children:[n.jsxs("p",{className:"flex justify-between",children:[n.jsx("span",{children:"Savings:"}),n.jsxs("span",{className:"font-bold",children:["-â¹",(b*l).toFixed(2)]})]}),n.jsx("div",{className:"border-t border-green-200 my-2"}),n.jsxs("p",{className:"flex justify-between text-base font-bold text-green-900",children:[n.jsx("span",{children:"Total to pay:"}),n.jsxs("span",{children:["â¹",k.toFixed(2)]})]})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("p",{className:"flex justify-between font-semibold",children:[n.jsx("span",{children:"Subtotal"}),n.jsxs("span",{children:["â¹",b.toFixed(2)]})]}),n.jsxs("p",{className:"flex justify-between font-semibold",children:[n.jsx("span",{children:"Shipping"}),n.jsx("span",{children:"Calculated at next step"})]}),n.jsxs("p",{className:"flex justify-between font-bold text-lg",children:[n.jsx("span",{children:"Total"}),n.jsxs("span",{children:["â¹",k.toFixed(2)]})]})]}),n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("button",{className:"bg-white border border-gray-300 rounded flex items-center justify-center py-3 px-6 hover:bg-gray-100 transition",children:n.jsx("img",{src:"https://5.imimg.com/data5/SELLER/Default/2023/9/348603242/KE/OR/XP/29083784/razorpay-software-250x250.png",alt:"Razorpay",className:"h-16 w-auto"})})}),n.jsx(je,{onClick:N,variant:"primary",className:"w-full",children:"Place Order"}),n.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:[n.jsx("p",{children:"Refund policy"}),n.jsx("p",{children:"Shipping policy"}),n.jsx("p",{children:"I consent to receive recurring automated marketing by text message through an automatic telephone dialing system. Consent is not a condition to purchase. STOP to cancel. HELP for help. Message and Data rates may apply. View Privacy Policy & TOS"}),n.jsx("p",{children:"Terms of service"})]})]}),ne=()=>n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Your cart"}),t.length===0?n.jsx("p",{children:"Your cart is empty"}):n.jsxs(n.Fragment,{children:[t.map(U=>n.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[!U.name.includes("Subscription Plan")&&n.jsx("img",{src:U.image_url,alt:U.name,className:"w-8 h-8 object-cover rounded"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-semibold",children:U.name}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Quantity: ",U.quantity]})]}),n.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[n.jsxs("p",{className:"font-semibold",children:["â¹",(U.price*U.quantity).toFixed(2)]}),n.jsx("button",{onClick:()=>r(U.id),className:"text-red-600 hover:text-red-800 p-1",title:"Delete item",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},U.id)),n.jsxs("div",{className:"flex justify-between font-semibold border-t border-gray-300 pt-2",children:[n.jsx("span",{children:"Subtotal"}),n.jsxs("span",{children:["â¹",b.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between font-semibold border-t border-gray-300 pt-2",children:[n.jsx("span",{children:"Shipping"}),n.jsx("span",{children:"Calculated at next step"})]}),n.jsxs("div",{className:"flex justify-between font-bold text-lg border-t border-gray-300 pt-2",children:[n.jsx("span",{children:"Total"}),n.jsxs("span",{children:["â¹",k.toFixed(2)]})]})]})]});return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"max-w-6xl mx-auto p-6 grid grid-cols-1 md:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"md:col-span-2 bg-white rounded-lg shadow-lg p-6",children:[n.jsx("nav",{className:"text-sm mb-6",children:n.jsxs("ol",{className:"list-reset flex text-gray-600 space-x-2",children:[n.jsxs("li",{children:["Cart ",">"]}),n.jsxs("li",{className:s===1?"font-bold":"",children:["Information ",">"]}),!g&&n.jsxs("li",{className:s===2?"font-bold":"",children:["Shipping ",">"]}),n.jsx("li",{className:s===(g?2:3)?"font-bold":"",children:"Payment"})]})}),s===1&&n.jsxs(n.Fragment,{children:[A(),n.jsx("hr",{className:"my-4"}),D()]}),s===2&&!g&&W(),s===2&&g&&G(),s===3&&!g&&G()]}),n.jsx("div",{className:"md:col-span-1",children:ne()})]})})},Ri=_.createContext(void 0),pp=({children:t})=>{const[e,r]=_.useState(null),[s,a]=_.useState(!0);_.useEffect(()=>{(async()=>{try{const{data:{session:h},error:m}=await q.auth.getSession();h?.user?r({id:h.user.id,name:h.user.user_metadata?.full_name||h.user.user_metadata?.name||"",email:h.user.email||""}):r(null)}catch(h){console.error("Error checking auth session:",h),r(null)}finally{a(!1)}})();const p=setTimeout(()=>{a(h=>h&&(console.warn("Auth check timed out, forcing loading false"),!1))},5e3),{data:{subscription:f}}=q.auth.onAuthStateChange(async(h,m)=>{m?.user?r({id:m.user.id,name:m.user.user_metadata?.full_name||m.user.user_metadata?.name||"",email:m.user.email||""}):r(null),a(!1)});return()=>{f.unsubscribe(),clearTimeout(p)}},[]);const i=async(d,p)=>{const{data:f,error:h}=await q.auth.signInWithPassword({email:d,password:p});if(h)throw h;return{id:f.user?.id||"",name:f.user?.user_metadata?.full_name||f.user?.user_metadata?.name||"",email:f.user?.email||d}},o=async(d,p,f)=>{const{data:h,error:m}=await q.auth.signUp({email:p,password:f,options:{data:{full_name:d,name:d}}});if(m)throw m;return h.session&&await q.auth.signOut(),{id:h.user?.id||"",name:d,email:h.user?.email||p}},l=async()=>{const{error:d}=await q.auth.signInWithOAuth({provider:"google"});if(d)throw d},c=async()=>{try{localStorage.setItem("justLoggedOut","true"),localStorage.removeItem("guestMode"),r(null);const{error:d}=await q.auth.signOut();d&&console.error("Logout error:",d)}catch(d){console.error("Logout error:",d)}},u=async d=>{const{error:p}=await q.auth.resetPasswordForEmail(d,{redirectTo:`${window.location.origin}/login`});if(p)throw p};return n.jsx(Ri.Provider,{value:{user:e,loading:s,signInWithEmail:i,signUpWithEmail:o,signInWithGoogle:l,resetPassword:u,logout:c},children:t})},mp=()=>{const t=_.useContext(Ri);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},De=()=>mp(),Wr={HONEY10:.1,BEE20:.2,OFFER:.1},gp=()=>{const{cartItems:t,getTotal:e,clearCart:r}=Ct(),{user:s}=De(),[a,i]=_.useState(""),[o,l]=_.useState(0),[c,u]=_.useState(""),[d,p]=_.useState(!1),[f,h]=_.useState(""),m=e(),g=m-m*o,b=()=>{const w=a.toUpperCase();Wr[w]?(l(Wr[w]),u(""),l(Wr[w]),u(""),hr({particleCount:400,spread:160,origin:{y:.6},startVelocity:60,zIndex:9999})):(l(0),u("Invalid coupon code"))},k=async()=>{if(!s){alert("Please log in to place an order.");return}if(t.length===0){alert("Your cart is empty.");return}const w=t.reduce((y,N)=>{const S=N.seller_id;return y[S]||(y[S]=[]),y[S].push(N),y},{});try{const y=[];for(const A in w){const D=w[A],W=D.reduce((fe,v)=>fe+v.price*v.quantity,0),G=W/m*(m*o),ne=W-G,{data:U,error:he}=await q.from("orders").insert({user_id:s.id,seller_id:A,total:W,discounted_total:o>0?ne:void 0,coupon:o>0?a.toUpperCase():void 0,discount:o>0?G/W:void 0,status:"pending",customer_email:s.email,customer_name:s.name}).select().single();if(he)throw he;const we=U.id;y.push(we);const C=D.map(fe=>({order_id:we,product_id:fe.id,name:fe.name,price:fe.price,quantity:fe.quantity})),{error:V}=await q.from("order_items").insert(C);if(V)throw V}h(y.join(", ")),p(!0),r();const N=3e3,S=Date.now()+N,I={startVelocity:30,spread:360,ticks:60,zIndex:0},B=(A,D)=>Math.random()*(D-A)+A,J=setInterval(function(){const A=S-Date.now();if(A<=0)return clearInterval(J);const D=50*(A/N);hr({...I,particleCount:D,origin:{x:B(.1,.3),y:Math.random()-.2}}),hr({...I,particleCount:D,origin:{x:B(.7,.9),y:Math.random()-.2}})},250)}catch(y){console.error("Error placing order:",y),alert(`Failed to place order: ${y.message}`)}};return d?n.jsx(n.Fragment,{children:n.jsxs("div",{className:"max-w-4xl mx-auto p-6 text-center",children:[n.jsx("h2",{className:"text-3xl font-bold text-honeybee-primary mb-6",children:"Thank you for your order!"}),n.jsx("p",{children:"Your order has been placed successfully."}),f&&n.jsxs("p",{className:"text-lg mt-4",children:["Order ID(s): ",n.jsx("span",{className:"font-bold",children:f})]})]})}):n.jsx(n.Fragment,{children:n.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-6 bg-honeybee-background text-honeybee-secondary rounded-lg shadow-lg",children:[n.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-honeybee-primary mb-6",children:"Checkout"}),n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Order Summary"}),t.map(w=>n.jsxs("div",{className:"flex justify-between mb-2 text-sm md:text-base",children:[n.jsxs("span",{children:[w.name," x ",w.quantity]}),n.jsxs("span",{children:["â¹",(w.price*w.quantity).toFixed(2)]})]},w.id)),n.jsxs("div",{className:"flex justify-between font-bold border-t border-gray-300 pt-2 text-sm md:text-base",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["â¹",m.toFixed(2)]})]}),o>0&&n.jsxs("div",{className:"flex justify-between font-bold text-green-600 pt-2 text-sm md:text-base",children:[n.jsx("span",{children:"Discount:"}),n.jsxs("span",{children:["-â¹",(m*o).toFixed(2)]})]}),o>0&&n.jsxs("div",{className:"flex justify-between font-bold border-t border-gray-300 pt-2 text-sm md:text-base",children:[n.jsx("span",{children:"Amount to Pay:"}),n.jsxs("span",{children:["â¹",g.toFixed(2)]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{htmlFor:"coupon",className:"block font-semibold mb-1",children:"Have a coupon?"}),n.jsx("input",{id:"coupon",type:"text",value:a,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded px-3 py-3 w-full text-base",placeholder:"Enter coupon code"}),c&&n.jsx("p",{className:"text-red-600 mt-1",children:c}),o>0&&n.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg animate-fade-in",children:[n.jsxs("div",{className:"flex items-center text-green-800 font-bold mb-2",children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),'Coupon "',a.toUpperCase(),'" Applied Successfully!']}),n.jsxs("div",{className:"text-green-700 text-sm space-y-1",children:[n.jsxs("p",{className:"flex justify-between",children:[n.jsx("span",{children:"Savings:"}),n.jsxs("span",{className:"font-bold",children:["-â¹",(m*o).toFixed(2)]})]}),n.jsx("div",{className:"border-t border-green-200 my-2"}),n.jsxs("p",{className:"flex justify-between text-base font-bold text-green-900",children:[n.jsx("span",{children:"Total to pay:"}),n.jsxs("span",{children:["â¹",g.toFixed(2)]})]})]})]}),n.jsx(je,{onClick:b,variant:"accent",className:"mt-2 w-full md:w-auto",children:"Apply Coupon"})]}),n.jsx("div",{children:n.jsx(je,{onClick:k,variant:"primary",className:"w-full py-3 text-base",children:"Place Order"})})]})]})})},xp=()=>{const{user:t}=De(),[e,r]=_.useState({name:"",age:"",location:"",address:"",pincode:"",email:"",phone:""}),[s,a]=_.useState(!0),[i,o]=_.useState(!0),[l,c]=_.useState(e),[u,d]=_.useState(null);_.useEffect(()=>{(async()=>{if(t)try{const{data:b,error:k}=await q.from("profiles").select("*").eq("user_id",t.id).single();k&&k.code!=="PGRST116"?(console.error("Error fetching profile:",k),o(!0)):b?(r(b),c(b),o(!1)):(r({name:"",age:"",location:"",address:"",pincode:"",email:"",phone:""}),c({name:"",age:"",location:"",address:"",pincode:"",email:"",phone:""}),o(!0))}catch(b){console.error("Error fetching profile:",b),o(!0)}a(!1)})()},[t]);const p=g=>{const{name:b,value:k}=g.target;c(w=>({...w,[b]:k}))},f=async()=>{if(t){d(null);try{const{error:g}=await q.from("profiles").upsert({user_id:t.id,name:l.name,age:l.age,location:l.location,address:l.address,pincode:l.pincode,email:l.email,phone:l.phone});g?(console.error("Error saving profile:",g),d({type:"error",text:"Failed to save profile. Please try again."})):(r(l),o(!1),d({type:"success",text:"Profile saved successfully!"}))}catch(g){console.error("Error saving profile:",g),d({type:"error",text:"Failed to save profile. Please try again."})}}},h=()=>{c(e),o(!0)},m=()=>{c(e),o(!1)};return s?n.jsx("div",{children:"Loading profile..."}):n.jsxs("div",{className:"max-w-2xl mx-auto p-4 md:p-6",children:[n.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-6",children:"Profile"}),u&&n.jsx("div",{className:`mb-4 p-3 rounded-lg text-center ${u.type==="success"?"bg-green-50 border border-green-200 text-green-600":"bg-red-50 border border-red-200 text-red-600"}`,children:u.text}),i?n.jsx("div",{className:"group",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),n.jsx("input",{type:"text",name:"name",value:l.name,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white",placeholder:"Enter your name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Age"}),n.jsx("input",{type:"number",name:"age",value:l.age,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white",placeholder:"Enter your age"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),n.jsx("input",{type:"text",name:"location",value:l.location,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white",placeholder:"Enter your location"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode"}),n.jsx("input",{type:"text",name:"pincode",value:l.pincode,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white",placeholder:"Enter your pincode"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),n.jsx("input",{type:"email",name:"email",value:l.email,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white",placeholder:"Enter your email"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),n.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white",placeholder:"Enter your phone number"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),n.jsx("textarea",{name:"address",value:l.address,onChange:p,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white",placeholder:"Enter your full address"})]})]}),n.jsxs("div",{className:"group",children:[n.jsx(je,{onClick:f,className:"w-full",variant:"primary",children:"Save Profile"}),n.jsx("button",{onClick:m,className:"w-full mt-2 py-2 px-4 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100",children:"Cancel"})]})]})}):n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Name"}),n.jsx("p",{className:"text-gray-900",children:e.name})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Age"}),n.jsx("p",{className:"text-gray-900",children:e.age})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Location"}),n.jsx("p",{className:"text-gray-900",children:e.location})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Pincode"}),n.jsx("p",{className:"text-gray-900",children:e.pincode})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Email"}),n.jsx("p",{className:"text-gray-900",children:e.email})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Phone"}),n.jsx("p",{className:"text-gray-900",children:e.phone})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Address"}),n.jsx("p",{className:"text-gray-900",children:e.address})]})]}),n.jsx("button",{onClick:h,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700 focus:outline-none","aria-label":"Edit Profile",children:"Edit Profile"})]})]})},He=()=>{const{user:t}=De(),[e,r]=_.useState(null),[s,a]=_.useState(!0),[i,o]=_.useState(null),l=_.useCallback(async()=>{if(!t){r(null),a(!1);return}try{const{data:c,error:u}=await q.from("sellers").select("*").eq("user_id",t.id).single();if(u)if(u.code==="PGRST116")r(null);else throw u;else r(c)}catch(c){console.error("Error fetching seller:",c),o(c)}finally{a(!1)}},[t]);return _.useEffect(()=>{l()},[l]),{seller:e,loading:s,error:i,refreshSeller:l}},bp={email:"",name:"",profilePic:null,acceptTerms:!1,city:"",state:"",zip:"",phone:"",idProof:null,sellerType:"",latitude:null,longitude:null,detectedAddress:""},yp=()=>{const[t,e]=_.useState(0),[r,s]=_.useState(bp),[a,i]=_.useState(""),[o,l]=_.useState(null),{user:c}=De(),{seller:u,loading:d,refreshSeller:p}=He(),f=Ke();if(d)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 border-4 border-purple-200 border-t-purple-700 rounded-full animate-spin"}),n.jsx("p",{className:"text-gray-500 font-medium",children:"Verifying registration status..."})]})});if(u)return n.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 p-4",children:n.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md w-full text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Already Registered"}),n.jsxs("p",{className:"text-gray-600 mb-6",children:["You have already registered as a seller.",u.is_approved?" Access your dashboard to manage your products.":" Your application is currently under review."]}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("button",{onClick:()=>f("/applications"),className:"w-full bg-purple-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-purple-700 transition",children:"Go to Dashboard"}),n.jsx("button",{onClick:()=>f("/home"),className:"w-full bg-gray-100 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-200 transition",children:"Return Home"})]}),n.jsxs("p",{className:"mt-4 text-xs text-gray-400",children:["Seller ID: ",u.seller_id]})]})});const h=A=>{const{name:D,value:W,type:G,checked:ne}=A.target;s(U=>({...U,[D]:G==="checkbox"?ne:W}))},m=A=>{const{name:D,files:W}=A.target;W&&W[0]&&s(G=>({...G,[D]:W[0]}))},g=()=>{t<5&&e(t+1)},b=()=>{t>1&&e(t-1)},k=async A=>{if(A.preventDefault(),t===3){g();return}if(t===4&&!r.detectedAddress){l({type:"error",text:"Please detect your location before submitting."});return}if(t===4||t===4&&r.detectedAddress){if(!c){l({type:"error",text:"Please sign in to submit the application."}),setTimeout(()=>f("/login"),2e3);return}const{data:{session:D},error:W}=await q.auth.getSession();if(W||!D){l({type:"error",text:"Session expired. Please sign in again."}),setTimeout(()=>f("/login"),2e3);return}if(!a){l({type:"error",text:"Please select a seller type (Honey or Bee Hive)."});return}const G={name:te(r.name),email:c.email,seller_type:a,phone:te(r.phone),address:te(r.detectedAddress||`${r.city}, ${r.state}, ${r.zip}`),city:te(r.city),state:te(r.state),zip:te(r.zip)},ne=Vd.safeParse(G);if(!ne.success){l({type:"error",text:ne.error.issues[0].message});return}if(!r.acceptTerms){l({type:"error",text:"Please accept the terms and conditions."});return}try{const U=`SELLER-${Date.now()}`;let he="",we="";if(r.profilePic){const V=`${c.email}/${U}/profile_${Date.now()}.${r.profilePic.name.split(".").pop()}`,{error:fe}=await q.storage.from("sellerid_details").upload(V,r.profilePic);if(fe)throw fe;const{data:v}=q.storage.from("sellerid_details").getPublicUrl(V);he=v.publicUrl}if(r.idProof){const V=`${c.email}/${U}/id_${Date.now()}.${r.idProof.name.split(".").pop()}`,{error:fe}=await q.storage.from("sellerid_details").upload(V,r.idProof);if(fe)throw fe;const{data:v}=q.storage.from("sellerid_details").getPublicUrl(V);we=v.publicUrl}const{error:C}=await q.from("sellers").insert([{user_id:c.id,seller_id:U,name:r.name,email:c.email,seller_type:a,phone:r.phone,address:r.detectedAddress||`${r.city}, ${r.state}, ${r.zip}`,city:r.city,state:r.state,zip:r.zip,id_proof_url:we,profile_pic_url:he,is_approved:!1,kyc_verified:!1,latitude:r.latitude,longitude:r.longitude}]);if(C)throw C;l({type:"success",text:"Seller registration submitted successfully! Your application will be reviewed."}),await p(),localStorage.setItem("justRegisteredSeller","true"),f("/applications")}catch(U){console.error("Error submitting application:",U),l({type:"error",text:`Registration failed: ${U instanceof Error?U.message:"Unknown error"}`})}return}g()},w=()=>{const A=["Personal Information","Address","Contact","Location","Finish"];return n.jsx("div",{className:"flex justify-center space-x-8 mb-8",children:A.map((D,W)=>{const G=W+1,ne=G===t,U=G<t;return n.jsxs("div",{className:"flex flex-col items-center text-center",children:[n.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${ne||U?"border-purple-700":"border-gray-300"}`,children:U?n.jsx("svg",{className:"w-4 h-4 text-purple-700",fill:"none",stroke:"currentColor",strokeWidth:"3",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):n.jsx("div",{className:`w-3 h-3 rounded-full ${ne?"bg-purple-700":"bg-gray-300"}`})}),n.jsx("span",{className:`mt-1 text-xs font-semibold ${ne||U?"text-purple-700":"text-gray-400"}`,children:D.split(" ").map((he,we)=>n.jsxs(Zt.Fragment,{children:[he,n.jsx("br",{})]},we))})]},D)})})},y=()=>n.jsx("div",{className:"max-w-4xl mx-auto p-6 text-center",children:n.jsxs("div",{className:"flex justify-center gap-8",children:[n.jsx("button",{onClick:()=>{i("honey"),e(1)},className:"gradient-bg-primary hover:shadow-2xl text-black font-semibold py-4 px-10 rounded-full transition-all duration-300 ease-out modern-shadow-hover transform hover:scale-105",children:"Sell Honey"}),n.jsx("button",{onClick:()=>{i("beehive"),e(1)},className:"gradient-bg-primary hover:shadow-2xl text-black font-semibold py-4 px-10 rounded-full transition-all duration-300 ease-out modern-shadow-hover transform hover:scale-105",children:"Sell Bee Hive"})]})}),N=()=>n.jsxs("form",{onSubmit:k,className:"max-w-md mx-auto bg-white p-6 rounded shadow",children:[n.jsx("h2",{className:"text-xl font-bold mb-6",children:"Personal Information"}),n.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"Your Email"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"email",name:"email",value:c?.email||"",readOnly:!0,disabled:!0,className:"w-full mb-4 px-3 py-2 border rounded bg-gray-200 text-gray-600 cursor-not-allowed"}),n.jsx("svg",{className:"w-4 h-4 text-gray-500 absolute right-3 top-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]}),n.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"Your Name"}),n.jsx("input",{type:"text",name:"name",placeholder:"e.g. John Doe",value:r.name,onChange:h,required:!0,className:"w-full mb-4 px-3 py-2 border rounded bg-gray-100 text-gray-700 placeholder-gray-400"}),n.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"Profile Picture"}),n.jsx("input",{type:"file",name:"profilePic",accept:"image/*",onChange:m,required:!0,className:"w-full mb-2 px-3 py-2 border rounded bg-gray-100 text-gray-700"}),r.profilePic&&n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["File: ",r.profilePic.name," | Size: ",(r.profilePic.size/1024).toFixed(2)," KB | Type: ",r.profilePic.type]}),n.jsxs("label",{className:"inline-flex items-center mb-4",children:[n.jsx("input",{type:"checkbox",name:"acceptTerms",checked:r.acceptTerms,onChange:h,required:!0,className:"form-checkbox text-purple-700"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"I Accept Terms & Conditions"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("button",{type:"button",onClick:()=>{e(0)},className:"text-purple-700 underline",children:"Back to Options"}),n.jsxs(je,{type:"submit",variant:"primary",className:"flex items-center space-x-2",children:[n.jsx("span",{children:"Next"}),n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]}),S=()=>n.jsxs("form",{onSubmit:k,className:"max-w-md mx-auto bg-white p-6 rounded shadow",children:[n.jsx("h2",{className:"text-xl font-bold mb-6",children:"Address"}),n.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"City"}),n.jsx("input",{type:"text",name:"city",value:r.city,onChange:h,required:!0,className:"w-full mb-4 px-3 py-2 border rounded bg-gray-100 text-gray-700 placeholder-gray-400"}),n.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"State"}),n.jsx("input",{type:"text",name:"state",value:r.state,onChange:h,required:!0,className:"w-full mb-4 px-3 py-2 border rounded bg-gray-100 text-gray-700 placeholder-gray-400"}),n.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"Zip"}),n.jsx("input",{type:"text",name:"zip",value:r.zip,onChange:h,required:!0,className:"w-full mb-4 px-3 py-2 border rounded bg-gray-100 text-gray-700 placeholder-gray-400"}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("button",{type:"button",onClick:b,className:"text-purple-700 underline",children:"Back"}),n.jsxs(je,{type:"submit",variant:"primary",className:"flex items-center space-x-2",children:[n.jsx("span",{children:"Next"}),n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]}),I=()=>n.jsxs("form",{onSubmit:k,className:"max-w-md mx-auto bg-white p-6 rounded shadow",children:[n.jsx("h2",{className:"text-xl font-bold mb-6",children:"Contact"}),n.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"Phone"}),n.jsx("input",{type:"text",name:"phone",value:r.phone,onChange:h,required:!0,className:"w-full mb-4 px-3 py-2 border rounded bg-gray-100 text-gray-700 placeholder-gray-400"}),n.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"ID Proof"}),n.jsx("input",{type:"file",name:"idProof",accept:"image/*,.pdf",onChange:m,required:!0,className:"w-full mb-2 px-3 py-2 border rounded bg-gray-100 text-gray-700"}),r.idProof&&n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["File: ",r.idProof.name," | Size: ",(r.idProof.size/1024).toFixed(2)," KB | Type: ",r.idProof.type]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("button",{type:"button",onClick:b,className:"text-purple-700 underline",children:"Back"}),n.jsx(je,{type:"submit",variant:"primary",children:"Sign up"})]})]}),B=()=>n.jsxs("div",{className:"max-w-md mx-auto bg-white p-6 rounded shadow text-center",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Location Access"}),n.jsx("p",{className:"mb-6 text-gray-600",children:"Please allow location access to verify your selling region and improve customer discovery."}),r.detectedAddress?n.jsxs("div",{className:"animate-fade-in",children:[n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200 mb-4",children:[n.jsx("p",{className:"text-green-800 font-semibold mb-1",children:"Location Detected!"}),n.jsx("p",{className:"text-gray-700 text-sm",children:r.detectedAddress})]}),n.jsx(je,{onClick:k,variant:"primary",className:"w-full",children:"Complete Registration"})]}):n.jsxs(je,{onClick:()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(async A=>{const{latitude:D,longitude:W}=A.coords;try{const U=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${D}&lon=${W}`)).json()).display_name;s(he=>({...he,latitude:D,longitude:W,detectedAddress:U}))}catch(G){console.error("Geocoding error:",G),alert("Could not detect address. Please try again.")}},A=>{console.error("Location error:",A),alert("Location access denied. You can proceed without it.")}):alert("Geolocation is not supported by your browser.")},variant:"primary",className:"w-full flex justify-center items-center gap-2",children:[n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Detect My Location"]})]}),J=()=>n.jsxs("div",{className:"max-w-md mx-auto bg-white p-8 rounded shadow text-center",children:[n.jsx("svg",{className:"mx-auto mb-6 w-16 h-16 text-green-500",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),n.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Application Submitted"}),n.jsx("p",{className:"mb-4",children:"Your seller application has been submitted successfully. You will be redirected to your dashboard shortly."}),n.jsx("a",{href:"/applications",className:"text-purple-700 underline",children:"Go to Dashboard"})]});return n.jsxs("div",{className:"min-h-screen py-12 px-4 md:px-6",children:[n.jsx("h1",{className:"text-center font-semibold text-lg md:text-xl mb-4",children:"Register as a Seller"}),o&&n.jsx("div",{className:`max-w-md mx-auto mb-4 p-3 rounded-lg text-center ${o.type==="success"?"bg-green-50 border border-green-200 text-green-600":"bg-red-50 border border-red-200 text-red-600"}`,children:o.text}),n.jsxs(n.Fragment,{children:[t===0&&y(),t>0&&w(),t===1&&N(),t===2&&S(),t===3&&I(),t===4&&B(),t===5&&J()]})]})},vp="modulepreload",wp=function(t){return"/"+t},zn={},_p=function(e,r,s){let a=Promise.resolve();if(r&&r.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");a=c(r.map(u=>{if(u=wp(u),u in zn)return;zn[u]=!0;const d=u.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":vp,d||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Le=({children:t,title:e})=>{const r=Ke(),s=hs(),{seller:a,loading:i,refreshSeller:o}=He(),[l,c]=_.useState(!1),[u,d]=_.useState(!1),p=[{path:"/applications",icon:"ð",label:"Dashboard"},{path:"/earnings",icon:"ð°",label:"Earnings"},{path:"/orders",icon:"ð",label:"Orders"},{path:"/analytics",icon:"ð",label:"Analytics"},{path:"/products",icon:"ð¦",label:"Products"},{path:"/settings",icon:"âï¸",label:"Settings"}],f=async()=>{u||(d(!0),"geolocation"in navigator?navigator.geolocation.getCurrentPosition(async h=>{const{latitude:m,longitude:g}=h.coords;try{const k=await(await fetch(`https://api.bigdatacloud.com/data/reverse-geocode-client?latitude=${m}&longitude=${g}&localityLanguage=en`)).json(),w=`${k.principalSubdivision||""}, ${k.city||""}`.trim().replace(/^, /,""),{supabase:y}=await _p(async()=>{const{supabase:S}=await Promise.resolve().then(()=>up);return{supabase:S}},void 0),{error:N}=await y.from("sellers").update({address:w,city:k.city,state:k.principalSubdivision,latitude:m,longitude:g}).eq("user_id",a?.user_id);if(N)throw N;await o(),alert("Location updated successfully!")}catch(b){console.error("Error updating location:",b),alert("Failed to update location.")}finally{d(!1)}},h=>{console.error("Location error:",h),alert("Location access denied."),d(!1)}):(alert("Geolocation not supported."),d(!1)))};return i?n.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:n.jsx("div",{className:"w-12 h-12 border-4 border-purple-200 border-t-purple-700 rounded-full animate-spin"})}):n.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col lg:flex-row",children:[n.jsxs("div",{className:"lg:hidden bg-white shadow-sm px-4 py-3 flex items-center justify-between sticky top-0 z-40",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>c(!0),className:"p-2 -ml-2",children:n.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),n.jsx("h1",{className:"font-bold text-purple-700",children:"HoneyBee"})]}),a?.address&&n.jsxs("div",{className:"flex items-center gap-1 text-[10px] bg-purple-50 text-purple-700 px-2 py-1 rounded-full border border-purple-100 max-w-[140px] truncate",children:[n.jsx("svg",{className:"w-3 h-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),n.jsx("span",{className:"truncate",children:a.address.split(",")[0]})]})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 lg:hidden",onClick:()=>c(!1),children:n.jsxs("div",{className:"w-64 bg-white h-full shadow-lg flex flex-col",onClick:h=>h.stopPropagation(),children:[n.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-purple-600 text-white",children:[n.jsx("span",{className:"font-bold",children:"Seller Menu"}),n.jsx("button",{onClick:()=>c(!1),className:"p-1 hover:bg-purple-700 rounded",children:"â"})]}),n.jsx("nav",{className:"p-2 flex-1 overflow-y-auto",children:p.map(h=>n.jsxs("button",{onClick:()=>{r(h.path),c(!1)},className:`flex items-center w-full px-4 py-3 rounded-lg mb-1 transition-all ${s.pathname===h.path?"bg-purple-100 text-purple-700 font-bold":"text-gray-600 hover:bg-gray-100"}`,children:[n.jsx("span",{className:"mr-3",children:h.icon})," ",h.label]},h.path))})]})}),n.jsxs("div",{className:"hidden lg:flex flex-col w-64 bg-white shadow-xl min-h-screen sticky top-0",children:[n.jsxs("div",{className:"p-6 border-b",children:[n.jsx("h2",{className:"text-2xl font-black text-purple-700 tracking-tight",children:"HoneyBee"}),n.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest mt-1",children:"Seller Studio"})]}),n.jsx("nav",{className:"p-4 flex-1",children:p.map(h=>n.jsxs("button",{onClick:()=>r(h.path),className:`flex items-center w-full px-4 py-3 rounded-xl mb-2 transition-all group ${s.pathname===h.path?"bg-purple-600 text-white shadow-lg shadow-purple-200":"text-gray-500 hover:bg-purple-50 hover:text-purple-600"}`,children:[n.jsx("span",{className:"mr-3 text-lg transition-transform group-hover:scale-110",children:h.icon}),n.jsx("span",{className:"font-semibold",children:h.label})]},h.path))}),a&&n.jsx("div",{className:"p-4 border-t border-gray-100",children:n.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4 border border-gray-100 relative overflow-hidden group",children:[n.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-purple-100 rounded-full -mr-8 -mt-8 opacity-20"}),n.jsxs("div",{className:"relative z-10 space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[9px] text-gray-400 uppercase font-black tracking-[0.2em] mb-1",children:"Store ID"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-mono text-xs font-bold text-gray-700 truncate mr-2",children:a.seller_id}),n.jsx("button",{onClick:()=>{navigator.clipboard.writeText(a.seller_id),alert("ID Copied!")},className:"text-gray-300 hover:text-purple-500",children:n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})})})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("p",{className:"text-[9px] text-gray-400 uppercase font-black tracking-[0.2em]",children:"Location"}),n.jsx("button",{onClick:f,disabled:u,className:"text-[9px] font-bold text-purple-600 hover:underline uppercase",children:u?"...":"Update"})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"w-5 h-5 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("svg",{className:"w-3 h-3 text-purple-600",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})})}),n.jsx("span",{className:"text-[11px] text-gray-600 font-medium leading-relaxed",children:a.address||"Not Set"})]})]})]})]})})]}),n.jsxs("main",{className:"flex-1 p-4 lg:p-8 overflow-y-auto",children:[n.jsxs("header",{className:"mb-8 hidden lg:block",children:[n.jsx("h1",{className:"text-3xl font-black text-gray-900 tracking-tight",children:e}),n.jsx("p",{className:"text-gray-500 font-medium mt-1",children:"Manage your honey business and sales"})]}),t]})]})},jp=()=>{const{user:t}=De(),e=Ke(),{seller:r,loading:s}=He(),[a,i]=_.useState(!0),[o,l]=_.useState([]),[c,u]=_.useState(0),[d,p]=_.useState(0),[f,h]=_.useState(0),[m,g]=_.useState([]),[b,k]=_.useState(!1),[w,y]=_.useState(!1),[N,S]=_.useState({idType:"Adhaar",idNumber:"",address:"",pincode:""}),[I,B]=_.useState(!1),[J,A]=_.useState("none"),[D,W]=_.useState({name:"",description:"",price:"",category:"",stock:"",image_url:""}),[G,ne]=_.useState(!1),U=_.useCallback(async()=>{if(!t||!r){!s&&!r&&i(!1);return}i(!0);try{const{data:C,error:V}=await q.from("kyc").select("status").eq("user_id",t.id).single();V&&V.code!=="PGRST116"&&console.error("KYC fetch error:",V),A(C?C.status:"none");const{data:fe,error:v}=await q.from("products").select("*").eq("seller_id",r.id);if(v)throw v;g(fe||[]);const{data:x,error:T}=await q.from("orders").select(`
          id,
          user_id,
          total,
          discounted_total,
          coupon,
          discount,
          status,
          created_at,
          customer_email,
          customer_name,
          order_items ( id, product_id, name, price, quantity )
        `).eq("seller_id",r.id);if(T)throw T;const z=(x||[]).map(R=>({id:R.id,userId:R.user_id,items:R.order_items||[],total:R.total,discountedTotal:R.discounted_total,coupon:R.coupon,discount:R.discount,status:R.status,createdAt:new Date(R.created_at),customerEmail:R.customer_email,customerName:R.customer_name}));let M=0,F=0;z.forEach(R=>{M+=R.total||0,F+=1}),l(z),u(M),p(F),h(fe?.length||0)}catch(C){console.error("Error fetching dashboard data:",C)}finally{i(!1)}},[t,r,s]);_.useEffect(()=>{s||U()},[U,s]);const he=async C=>{if(C.preventDefault(),!!t){B(!0);try{const{error:V}=await q.from("kyc").insert({user_id:t.id,id_type:N.idType,id_number:N.idNumber.slice(-4),address:N.address,pincode:N.pincode,status:"pending"});if(V)throw V;alert("KYC submitted successfully! It will be reviewed shortly."),k(!1),S({idType:"Adhaar",idNumber:"",address:"",pincode:""}),U()}catch(V){console.error("KYC submission error:",V),alert(`KYC submission failed: ${V instanceof Error?V.message:"Unknown error"}`)}finally{B(!1)}}},we=async C=>{if(C.preventDefault(),!r){alert("You must be a registered seller to add products.");return}ne(!0);try{const{error:V}=await q.from("products").insert({seller_id:r.id,name:D.name,description:D.description,price:parseFloat(D.price),category:D.category,stock:parseInt(D.stock,10),image_url:D.image_url,is_active:!0});if(V)throw V;alert("Product added successfully!"),y(!1),W({name:"",description:"",price:"",category:"",stock:"",image_url:""}),U()}catch(V){console.error("Product submission error:",V),alert(`Product submission failed: ${V instanceof Error?V.message:"Unknown error"}`)}finally{ne(!1)}};return a?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"w-12 h-12 border-4 border-purple-200 border-t-purple-700 rounded-full animate-spin"})}):n.jsxs(Le,{title:"Seller Dashboard",children:[n.jsxs("div",{className:"max-w-7xl mx-auto",children:[J==="pending"&&n.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-8",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),n.jsx("div",{className:"ml-3",children:n.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"Your KYC verification is currently pending. Your dashboard will be fully unlocked once approved."})})]})}),J==="none"&&n.jsx("div",{className:"bg-white border border-yellow-200 border-l-4 border-l-yellow-400 p-6 mb-8 rounded-xl shadow-sm",children:n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"bg-yellow-100 p-2 rounded-lg mr-4",children:n.jsx("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"KYC Verification Required"}),n.jsx("p",{className:"text-sm text-gray-500 font-medium mt-1",children:"Complete your identity verification to start listing products and receiving payments."})]})]}),n.jsx("button",{onClick:()=>k(!0),className:"w-full sm:w-auto bg-purple-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-100",children:"Start Verification"})]})}),J==="rejected"&&n.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),n.jsx("div",{className:"ml-3",children:n.jsx("p",{className:"text-sm text-red-700 font-bold",children:"KYC Rejected: Please review your document and resubmit."})})]}),n.jsx("button",{onClick:()=>k(!0),className:"bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-red-700 transition",children:"Resubmit KYC"})]})}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 mb-8",children:[n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[n.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Total Sales"}),n.jsxs("p",{className:"text-3xl font-black text-gray-900 leading-none",children:["â¹",c.toFixed(2)]})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[n.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Total Orders"}),n.jsx("p",{className:"text-3xl font-black text-gray-900 leading-none",children:d})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[n.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Active Products"}),n.jsx("p",{className:"text-3xl font-black text-gray-900 leading-none",children:f})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[n.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Approval Status"}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("div",{className:`w-2.5 h-2.5 rounded-full animate-pulse ${r?.is_approved?"bg-green-500":"bg-yellow-500"}`}),n.jsx("p",{className:`text-2xl font-black ${r?.is_approved?"text-green-600":"text-yellow-600"}`,children:r?.is_approved?"Approved":"Pending"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mb-8",children:[n.jsxs("div",{className:"p-6 border-b border-gray-50 flex justify-between items-center bg-gray-50/20",children:[n.jsx("h3",{className:"text-lg font-black text-gray-900 tracking-tight",children:"Recent Orders"}),n.jsx("button",{onClick:()=>e("/orders"),className:"text-xs font-bold text-purple-600 hover:text-purple-800 uppercase tracking-widest",children:"View All â"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full",children:[n.jsx("thead",{className:"bg-gray-50/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Order ID"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Product(s)"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Date"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Total"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-50",children:o.length>0?o.map(C=>n.jsxs("tr",{className:"hover:bg-gray-50/30 transition-colors",children:[n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 font-mono",children:["#",C.id.slice(0,8).toUpperCase()]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 font-medium",children:C.items.map(V=>`${V.name} (x${V.quantity})`).join(", ")}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-0.5 inline-flex text-[10px] leading-5 font-black uppercase tracking-widest rounded-full ${C.status==="completed"||C.status==="delivered"?"bg-green-100 text-green-700":C.status==="pending"||C.status==="processing"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:C.status})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-medium",children:new Date(C.createdAt).toLocaleDateString()}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900",children:["â¹",C.total.toFixed(2)]})]},C.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-400 font-medium italic",children:"No orders found yet"})})})]})})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-gray-50 flex items-center justify-between bg-gray-50/20",children:[n.jsx("h3",{className:"text-lg font-black text-gray-900 tracking-tight",children:"Product Catalog"}),n.jsx("div",{className:"flex gap-2",children:n.jsx("button",{onClick:()=>e("/products"),className:"text-xs font-bold text-purple-600 hover:text-purple-800 uppercase tracking-widest",children:"Manage All â"})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full",children:[n.jsx("thead",{className:"bg-gray-50/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Name"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Category"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Price"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Stock"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.length>0?m.slice(0,5).map(C=>n.jsxs("tr",{className:"hover:bg-gray-50/30 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900",children:C.name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-medium uppercase text-[10px] tracking-widest",children:C.category}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-black text-gray-900",children:["â¹",C.price.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-bold",children:n.jsx("span",{className:C.stock<10?"text-red-500":"text-gray-900",children:C.stock})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"px-2 py-0.5 inline-flex text-[10px] leading-5 font-black uppercase tracking-widest rounded-full bg-green-100 text-green-700",children:"Active"})})]},C.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-400 font-medium italic",children:"No products listed yet"})})})]})})]})]}),b&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-8 relative",children:[n.jsx("button",{onClick:()=>k(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),n.jsx("h2",{className:"text-2xl font-black text-gray-900",children:"Complete KYC Verification"}),n.jsx("p",{className:"text-gray-500 font-medium mt-1",children:"Identity verification is required for all sellers."})]}),n.jsxs("form",{onSubmit:he,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"ID Type"}),n.jsxs("select",{value:N.idType,onChange:C=>S({...N,idType:C.target.value}),className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all",children:[n.jsx("option",{value:"Adhaar",children:"Adhaar Card"}),n.jsx("option",{value:"Passport",children:"Passport"}),n.jsx("option",{value:"VoterID",children:"Voter ID"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"ID Number"}),n.jsx("input",{type:"text",value:N.idNumber,onChange:C=>S({...N,idNumber:C.target.value}),required:!0,placeholder:"e.g. 1234-5678-9012",className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Full Address"}),n.jsx("textarea",{value:N.address,onChange:C=>S({...N,address:C.target.value}),required:!0,placeholder:"Street, City, Zip...",className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all",rows:3})]}),n.jsx("button",{type:"submit",disabled:I,className:"w-full bg-purple-600 text-white py-4 rounded-xl font-black uppercase tracking-widest hover:bg-purple-700 transition-all shadow-xl shadow-purple-100 disabled:opacity-50",children:I?"Verifying...":"Submit Verification"})]})]})}),w&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 max-h-[90vh] overflow-y-auto relative",children:[n.jsx("button",{onClick:()=>y(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsx("h2",{className:"text-2xl font-black text-gray-900 tracking-tight mb-6",children:"Add New Product"}),n.jsxs("form",{onSubmit:we,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Product Name"}),n.jsx("input",{type:"text",value:D.name,onChange:C=>W({...D,name:C.target.value}),required:!0,placeholder:"e.g. Pure Wild Forest Honey",className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Category"}),n.jsxs("select",{value:D.category,onChange:C=>W({...D,category:C.target.value}),required:!0,className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all",children:[n.jsx("option",{value:"",children:"Select Category"}),n.jsx("option",{value:"honey",children:"Honey"}),n.jsx("option",{value:"beehive",children:"Beehive"}),n.jsx("option",{value:"accessories",children:"Accessories"}),n.jsx("option",{value:"other",children:"Other"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Description"}),n.jsx("textarea",{value:D.description,onChange:C=>W({...D,description:C.target.value}),required:!0,placeholder:"Describe your product's unique features...",className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all",rows:4})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Price (â¹)"}),n.jsx("input",{type:"number",value:D.price,onChange:C=>W({...D,price:C.target.value}),required:!0,placeholder:"0.00",className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Stock Inventory"}),n.jsx("input",{type:"number",value:D.stock,onChange:C=>W({...D,stock:C.target.value}),required:!0,placeholder:"0",className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Image URL"}),n.jsx("input",{type:"url",value:D.image_url,onChange:C=>W({...D,image_url:C.target.value}),placeholder:"https://...",className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all"})]}),n.jsx("button",{type:"submit",disabled:G,className:"w-full bg-purple-600 text-white py-4 rounded-xl font-black uppercase tracking-widest hover:bg-purple-700 transition-all shadow-xl shadow-purple-100 disabled:opacity-50",children:G?"Adding Product...":"Confirm Listing"})]})]})})]})},kp=()=>{const{user:t}=De(),{seller:e,loading:r}=He(),[s,a]=_.useState(!0),[i,o]=_.useState([]),[l,c]=_.useState("all"),u=_.useCallback(async()=>{if(e){a(!0);try{const{data:f,error:h}=await q.from("orders").select(`
          id,
          user_id,
          total,
          status,
          created_at,
          customer_email,
          customer_name,
          order_items ( id, product_id, name, price, quantity )
        `).eq("seller_id",e.id).order("created_at",{ascending:!1});if(h)throw h;const m=(f||[]).map(g=>({id:g.id,userId:g.user_id,items:g.order_items||[],total:g.total,status:g.status,createdAt:new Date(g.created_at),customerEmail:g.customer_email,customerName:g.customer_name}));o(m)}catch(f){console.error("Error fetching orders:",f)}finally{a(!1)}}},[e]);_.useEffect(()=>{!r&&e?u():!r&&!e&&a(!1)},[u,r,e]);const d=async(f,h)=>{try{const{error:m}=await q.from("orders").update({status:h}).eq("id",f);if(m)throw m;alert(`Order status updated to ${h}`),u()}catch(m){console.error("Error updating order status:",m),alert("Failed to update status.")}},p=l==="all"?i:i.filter(f=>f.status===l);return s?n.jsx(Le,{title:"Orders",children:n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"w-12 h-12 border-4 border-purple-200 border-t-purple-700 rounded-full animate-spin"})})}):n.jsx(Le,{title:"Orders",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-black text-gray-900",children:"Order Management"}),n.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Track and process your incoming sales"})]}),n.jsx("div",{className:"flex bg-white p-1 rounded-xl border border-gray-100 shadow-sm",children:["all","pending","processing","shipped","delivered","cancelled"].map(f=>n.jsx("button",{onClick:()=>c(f),className:`px-4 py-2 rounded-lg text-xs font-black uppercase tracking-widest transition-all ${l===f?"bg-purple-600 text-white shadow-md":"text-gray-400 hover:text-gray-600"}`,children:f},f))})]}),n.jsx("div",{className:"grid gap-6",children:p.length>0?p.map(f=>n.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"p-6 border-b border-gray-50 flex flex-wrap justify-between items-center gap-4 bg-gray-50/20",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Order ID"}),n.jsxs("p",{className:"text-sm font-bold text-gray-900 font-mono",children:["#",f.id.split("-")[0].toUpperCase()]})]})]}),n.jsxs("div",{className:"flex items-center gap-8",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest text-right",children:"Date"}),n.jsx("p",{className:"text-sm font-bold text-gray-900",children:f.createdAt.toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest text-right",children:"Total"}),n.jsxs("p",{className:"text-sm font-black text-purple-600",children:["â¹",f.total.toFixed(2)]})]})]})]}),n.jsxs("div",{className:"p-6 grid md:grid-cols-2 gap-8",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4",children:"Items Summary"}),n.jsx("div",{className:"space-y-3",children:f.items.map(h=>n.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-xl border border-gray-100/50",children:[n.jsxs("span",{className:"text-sm font-bold text-gray-700",children:[h.name," ",n.jsxs("span",{className:"text-gray-400 ml-1",children:["x",h.quantity]})]}),n.jsxs("span",{className:"text-sm font-black text-gray-900",children:["â¹",(h.price*h.quantity).toFixed(2)]})]},h.id))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4",children:"Customer & status"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-50 flex items-center justify-center text-blue-600 font-bold text-xs",children:f.customerName?.charAt(0)||"C"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-gray-900",children:f.customerName}),n.jsx("p",{className:"text-xs text-gray-500 font-medium",children:f.customerEmail})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("select",{value:f.status,onChange:h=>d(f.id,h.target.value),className:"flex-1 rounded-xl border-gray-100 bg-gray-50/50 p-3 text-xs font-black uppercase tracking-widest focus:ring-purple-500 focus:border-purple-500",children:[n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"processing",children:"Processing"}),n.jsx("option",{value:"shipped",children:"Shipped"}),n.jsx("option",{value:"delivered",children:"Delivered"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]}),n.jsx("span",{className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest ${f.status==="delivered"?"bg-green-100 text-green-700":f.status==="cancelled"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:f.status})]})]})]})]})]},f.id)):n.jsxs("div",{className:"bg-white rounded-2xl border border-dashed border-gray-200 p-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0a2 2 0 01-2 2H6a2 2 0 01-2-2m16 0l-8 8-8-8"})})}),n.jsx("p",{className:"text-gray-500 font-medium italic",children:"No orders found matching this criteria."})]})})]})})};var Np={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Sp=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ne=(t,e)=>{const r=_.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>_.createElement("svg",{ref:d,...Np,width:a,height:a,stroke:s,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${Sp(t)}`,l].join(" "),...u},[...e.map(([p,f])=>_.createElement(p,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};const Me=Ne("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Ln=Ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const $i=Ne("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const Ii=Ne("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Ep=Ne("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);const Op=Ne("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const Cp=Ne("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);const Tp=Ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Pp=Ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Ap=Ne("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const Rp=Ne("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Dn=Ne("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);const $p=Ne("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);const Ip=Ne("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);const zp=Ne("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),Lp=()=>{const{addToCart:t}=Ct(),e=Ke(),r=(s,a)=>{const i={id:s==="Basic"?"subscription-basic":"subscription-premium",name:`${s} Subscription Plan`,description:`${s} subscription plan for sellers`,price:a,category:"subscription",image_url:s==="Basic"?"/src/assets/basic.PNG":"/src/assets/premium.PNG",seller_id:"system",stock:999,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};t(i),e("/cart")};return n.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[n.jsx("h2",{className:"text-3xl font-bold text-white mb-6 text-center",children:"Subscription Plans"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsx("div",{className:"group",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg animate-card-hover p-6 text-center",children:[n.jsx("h3",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Basic"}),n.jsx("p",{className:"text-4xl font-bold text-honeybee-primary mb-4",children:"â¹499"}),n.jsxs("ul",{className:"text-left space-y-2 mb-6 text-gray-600",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx(Me,{className:"w-5 h-5 text-green-500 mr-2"})," Basic sales tracking"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(Me,{className:"w-5 h-5 text-green-500 mr-2"})," 10% per sale"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(Me,{className:"w-5 h-5 text-green-500 mr-2"})," Payment payouts 5-7 days"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(Me,{className:"w-5 h-5 text-green-500 mr-2"})," Standard email Support"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(Me,{className:"w-5 h-5 text-green-500 mr-2"})," Can rent up to 10 hive per month"]})]}),n.jsx("div",{className:"group",children:n.jsx(je,{onClick:()=>r("Basic",499),className:"px-8 py-3",variant:"primary",children:"Choose Plan"})})]})}),n.jsx("div",{className:"group",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg animate-card-hover p-6 text-center",children:[n.jsx("h3",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Premium"}),n.jsx("p",{className:"text-4xl font-bold text-honeybee-primary mb-4",children:"â¹1299"}),n.jsxs("ul",{className:"text-left space-y-2 mb-6 text-gray-600",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx(Me,{className:"w-5 h-5 text-green-500 mr-2"})," AI insights: best-selling flavors, demand trends by region"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(Me,{className:"w-5 h-5 text-green-500 mr-2"})," 5% per sale"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(Me,{className:"w-5 h-5 text-green-500 mr-2"})," Instant payout"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(Me,{className:"w-5 h-5 text-green-500 mr-2"})," Priority chat support"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(Me,{className:"w-5 h-5 text-green-500 mr-2"})," Can rent unlimited hive per month"]})]}),n.jsx("div",{className:"group",children:n.jsx(je,{onClick:()=>r("Premium",1299),className:"px-8 py-3",variant:"primary",children:"Choose Plan"})})]})})]})]})},Dp=()=>{const{seller:t,loading:e,refreshSeller:r}=He(),[s,a]=_.useState(!0),[i,o]=_.useState(!1),[l,c]=_.useState({name:"",phone:"",address:"",city:"",state:"",zip:""});_.useEffect(()=>{!e&&t?(c({name:t.name||"",phone:t.phone||"",address:t.address||"",city:t.city||"",state:t.state||"",zip:t.zip||""}),a(!1)):!e&&!t&&a(!1)},[t,e]);const u=p=>{const{name:f,value:h}=p.target;c(m=>({...m,[f]:h}))},d=async p=>{if(p.preventDefault(),!!t){o(!0);try{const{error:f}=await q.from("sellers").update({name:l.name,phone:l.phone,address:l.address,city:l.city,state:l.state,zip:l.zip}).eq("id",t.id);if(f)throw f;alert("Settings updated successfully!"),await r()}catch(f){console.error("Error updating settings:",f),alert("Failed to update settings.")}finally{o(!1)}}};return s?n.jsx(Le,{title:"Settings",children:n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"w-12 h-12 border-4 border-purple-200 border-t-purple-700 rounded-full animate-spin"})})}):n.jsx(Le,{title:"Settings",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[n.jsxs("div",{className:"p-8 border-b border-gray-50 flex items-center justify-between bg-gray-50/20",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-gray-900 tracking-tight",children:"Store Profile"}),n.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Update your public store information"})]}),n.jsx("div",{className:"h-12 w-12 bg-purple-100 rounded-2xl flex items-center justify-center text-xl",children:"âï¸"})]}),n.jsxs("form",{onSubmit:d,className:"p-8 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Store Name"}),n.jsx("input",{type:"text",name:"name",value:l.name,onChange:u,required:!0,className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Phone Number"}),n.jsx("input",{type:"text",name:"phone",value:l.phone,onChange:u,required:!0,className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Full Address"}),n.jsx("textarea",{name:"address",value:l.address,onChange:u,required:!0,rows:3,className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"City"}),n.jsx("input",{type:"text",name:"city",value:l.city,onChange:u,required:!0,className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"State"}),n.jsx("input",{type:"text",name:"state",value:l.state,onChange:u,required:!0,className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Zip Code"}),n.jsx("input",{type:"text",name:"zip",value:l.zip,onChange:u,required:!0,className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all"})]})]}),n.jsx("div",{className:"pt-4",children:n.jsx("button",{type:"submit",disabled:i,className:"w-full bg-purple-600 text-white py-4 rounded-xl font-black uppercase tracking-widest hover:bg-purple-700 transition-all shadow-xl shadow-purple-100 disabled:opacity-50",children:i?"Updating Store...":"Save Changes"})})]})]}),n.jsxs("div",{className:"mt-8 bg-red-50 rounded-2xl border border-red-100 p-8",children:[n.jsx("h3",{className:"text-lg font-black text-red-900 tracking-tight uppercase mb-2",children:"Danger Zone"}),n.jsx("p",{className:"text-sm text-red-600 font-medium mb-6",children:"Irreversible actions for your seller account"}),n.jsx("button",{className:"bg-red-600 text-white px-6 py-3 rounded-xl font-black uppercase tracking-widest text-xs hover:bg-red-700 transition-all shadow-lg shadow-red-100",children:"Deactivate Seller Account"})]})]})})},Up=()=>{const{seller:t,loading:e}=He(),[r,s]=_.useState(!0),[a,i]=_.useState([]),[o,l]=_.useState(!1),[c,u]=_.useState(null),[d,p]=_.useState({name:"",description:"",price:"",category:"",stock:"",image_url:""}),[f,h]=_.useState(!1),m=_.useCallback(async()=>{if(t){s(!0);try{const{data:w,error:y}=await q.from("products").select("*").eq("seller_id",t.id).order("created_at",{ascending:!1});if(y)throw y;i(w||[])}catch(w){console.error("Error fetching products:",w)}finally{s(!1)}}},[t]);_.useEffect(()=>{!e&&t?m():!e&&!t&&s(!1)},[m,e,t]);const g=w=>{u(w),p({name:w.name,description:w.description,price:w.price.toString(),category:w.category,stock:w.stock.toString(),image_url:w.image_url}),l(!0)},b=async w=>{if(w.preventDefault(),!t)return;h(!0);const y=Hd.safeParse({name:d.name,description:d.description,price:parseFloat(d.price),category:d.category,stock:parseInt(d.stock,10),image_url:d.image_url});if(!y.success){alert(y.error.issues[0].message),h(!1);return}try{const N={seller_id:t.id,...y.data,is_active:!0};if(c){const{error:S}=await q.from("products").update(N).eq("id",c.id);if(S)throw S;alert("Product updated successfully!")}else{const{error:S}=await q.from("products").insert(N);if(S)throw S;alert("Product added successfully!")}l(!1),u(null),p({name:"",description:"",price:"",category:"",stock:"",image_url:""}),m()}catch(N){console.error("Product submission error:",N),alert(`Product submission failed: ${N instanceof Error?N.message:"Unknown error"}`)}finally{h(!1)}},k=async w=>{if(confirm("Are you sure you want to delete this product?"))try{const{error:y}=await q.from("products").delete().eq("id",w);if(y)throw y;alert("Product deleted successfully!"),m()}catch(y){console.error("Error deleting product:",y),alert("Failed to delete product.")}};return r?n.jsx(Le,{title:"My Products",children:n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"w-12 h-12 border-4 border-purple-200 border-t-purple-700 rounded-full animate-spin"})})}):n.jsxs(Le,{title:"My Products",children:[n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-black text-gray-900",children:"Product Management"}),n.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Manage your inventory and listing details"})]}),n.jsxs("button",{onClick:()=>{u(null),p({name:"",description:"",price:"",category:"",stock:"",image_url:""}),l(!0)},className:"bg-purple-600 text-white px-6 py-3 rounded-xl font-black uppercase tracking-widest hover:bg-purple-700 transition shadow-lg shadow-purple-100 flex items-center gap-2",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Product"]})]}),n.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full",children:[n.jsx("thead",{className:"bg-gray-50/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Product"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Category"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Price"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Stock"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:a.length>0?a.map(w=>n.jsxs("tr",{className:"hover:bg-gray-50/30 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"h-10 w-10 flex-shrink-0 bg-gray-100 rounded-lg overflow-hidden border border-gray-100",children:w.image_url?n.jsx("img",{src:w.image_url,alt:w.name,className:"h-full w-full object-cover"}):n.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-400",children:"ð¦"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("div",{className:"text-sm font-bold text-gray-900",children:w.name}),n.jsx("div",{className:"text-xs text-gray-400 font-medium truncate max-w-[200px]",children:w.description})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-medium uppercase text-[10px] tracking-widest",children:w.category}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-black text-gray-900",children:["â¹",w.price.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`text-sm font-bold ${w.stock<10?"text-red-500":"text-gray-900"}`,children:w.stock})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>g(w),className:"text-purple-600 hover:text-purple-900",children:"Edit"}),n.jsx("button",{onClick:()=>k(w.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},w.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-400 font-medium italic",children:"No products found. Add your first product to get started!"})})})]})})})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 max-h-[90vh] overflow-y-auto relative",children:[n.jsx("button",{onClick:()=>l(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsx("h2",{className:"text-2xl font-black text-gray-900 tracking-tight mb-6",children:c?"Edit Product":"Add New Product"}),n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Product Name"}),n.jsx("input",{type:"text",value:d.name,onChange:w=>p({...d,name:w.target.value}),required:!0,placeholder:"e.g. Pure Wild Forest Honey",className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Category"}),n.jsxs("select",{value:d.category,onChange:w=>p({...d,category:w.target.value}),required:!0,className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all",children:[n.jsx("option",{value:"",children:"Select Category"}),n.jsx("option",{value:"honey",children:"Honey"}),n.jsx("option",{value:"beehive",children:"Beehive"}),n.jsx("option",{value:"accessories",children:"Accessories"}),n.jsx("option",{value:"other",children:"Other"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Description"}),n.jsx("textarea",{value:d.description,onChange:w=>p({...d,description:w.target.value}),required:!0,placeholder:"Describe your product's unique features...",className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all",rows:4})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Price (â¹)"}),n.jsx("input",{type:"number",value:d.price,onChange:w=>p({...d,price:w.target.value}),required:!0,placeholder:"0.00",className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Stock Inventory"}),n.jsx("input",{type:"number",value:d.stock,onChange:w=>p({...d,stock:w.target.value}),required:!0,placeholder:"0",className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Image URL"}),n.jsx("input",{type:"url",value:d.image_url,onChange:w=>p({...d,image_url:w.target.value}),placeholder:"https://...",className:"w-full rounded-xl border-gray-100 bg-gray-50/50 shadow-sm focus:border-purple-500 focus:ring-purple-500 p-3 font-medium transition-all"})]}),n.jsx("button",{type:"submit",disabled:f,className:"w-full bg-purple-600 text-white py-4 rounded-xl font-black uppercase tracking-widest hover:bg-purple-700 transition-all shadow-xl shadow-purple-100 disabled:opacity-50",children:f?"Processing...":c?"Update Listing":"Confirm Listing"})]})]})})]})},Mp=()=>{const{seller:t,loading:e}=He(),[r,s]=_.useState(!0),[a,i]=_.useState({totalRevenue:0,totalOrders:0,conversionRate:3.2,activeCustomers:0}),[o,l]=_.useState([]),c=_.useCallback(async()=>{if(t){s(!0);try{const{data:u,error:d}=await q.from("orders").select("total, user_id").eq("seller_id",t.id);if(d)throw d;const p=(u||[]).reduce((g,b)=>g+b.total,0),f=new Set((u||[]).map(g=>g.user_id)).size;i({totalRevenue:p,totalOrders:u?.length||0,conversionRate:4.5,activeCustomers:f});const{data:h,error:m}=await q.from("products").select("name, price, stock").eq("seller_id",t.id).limit(5);if(m)throw m;l(h||[])}catch(u){console.error("Error fetching analytics:",u)}finally{s(!1)}}},[t]);return _.useEffect(()=>{!e&&t?c():!e&&!t&&s(!1)},[c,e,t]),r?n.jsx(Le,{title:"Analytics",children:n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"w-12 h-12 border-4 border-purple-200 border-t-purple-700 rounded-full animate-spin"})})}):n.jsx(Le,{title:"Analytics",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[n.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Conversion Rate"}),n.jsxs("p",{className:"text-3xl font-black text-gray-900",children:[a.conversionRate,"%"]}),n.jsx("div",{className:"mt-2 text-xs font-bold text-green-500",children:"â 0.4% this week"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[n.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Active Customers"}),n.jsx("p",{className:"text-3xl font-black text-gray-900",children:a.activeCustomers}),n.jsx("div",{className:"mt-2 text-xs font-bold text-purple-500",children:"Loyal fan base"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[n.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Avg. Order Value"}),n.jsxs("p",{className:"text-3xl font-black text-gray-900",children:["â¹",(a.totalRevenue/(a.totalOrders||1)).toFixed(2)]}),n.jsx("div",{className:"mt-2 text-xs font-bold text-gray-400 italic",children:"Per transaction"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[n.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Order Volume"}),n.jsx("p",{className:"text-3xl font-black text-gray-900",children:a.totalOrders}),n.jsx("div",{className:"mt-2 text-xs font-bold text-blue-500",children:"Growing steady"})]})]}),n.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"bg-white p-8 rounded-2xl border border-gray-100 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-black text-gray-900 mb-6 uppercase tracking-tight",children:"Sales Performance"}),n.jsx("div",{className:"h-64 flex items-end justify-between gap-2",children:[45,60,40,75,90,65,80].map((u,d)=>n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{style:{height:`${u}%`},className:"w-full bg-purple-600 rounded-lg shadow-lg shadow-purple-100 hover:bg-purple-700 transition-all cursor-pointer group relative",children:n.jsxs("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:["â¹",(u*100).toFixed(0)]})}),n.jsxs("p",{className:"text-[9px] font-black text-gray-400 text-center uppercase",children:["Day ",d+1]})]},d))})]}),n.jsxs("div",{className:"bg-white p-8 rounded-2xl border border-gray-100 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-black text-gray-900 mb-6 uppercase tracking-tight",children:"Top Products"}),n.jsx("div",{className:"space-y-4",children:o.length>0?o.map((u,d)=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-100/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center font-black text-purple-600 text-[10px]",children:d+1}),n.jsx("p",{className:"text-sm font-bold text-gray-900",children:u.name})]}),n.jsxs("p",{className:"text-sm font-black text-gray-900",children:["â¹",u.price.toFixed(2)]})]},d)):n.jsx("p",{className:"text-gray-400 italic text-center py-12",children:"No data available yet"})})]})]})]})})},Bp=()=>{const{user:t}=De(),{seller:e,loading:r}=He(),[s,a]=_.useState(!0),[i,o]=_.useState(0),[l,c]=_.useState(0),[u,d]=_.useState([]),p=_.useCallback(async()=>{if(e){a(!0);try{const{data:f,error:h}=await q.from("orders").select("total, status, created_at").eq("seller_id",e.id).eq("status","delivered");if(h)throw h;const m=(f||[]).reduce((w,y)=>w+y.total,0);o(m);const{data:g,error:b}=await q.from("orders").select("total").eq("seller_id",e.id).in("status",["pending","processing","shipped"]);if(b)throw b;const k=(g||[]).reduce((w,y)=>w+y.total,0);c(k),d((f||[]).slice(0,10).map(w=>({id:Math.random().toString(36).substr(2,9),amount:w.total,date:new Date(w.created_at),type:"Sale",status:"Completed"})))}catch(f){console.error("Error fetching earnings:",f)}finally{a(!1)}}},[e]);return _.useEffect(()=>{!r&&e?p():!r&&!e&&a(!1)},[p,r,e]),s?n.jsx(Le,{title:"Earnings",children:n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"w-12 h-12 border-4 border-purple-200 border-t-purple-700 rounded-full animate-spin"})})}):n.jsx(Le,{title:"Earnings",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-100 flex flex-col justify-between overflow-hidden relative group",children:[n.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:scale-110 transition-transform",children:n.jsx("svg",{className:"w-12 h-12 text-purple-600",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 14h-2v-2h2v2zm0-4h-2V7h2v5z"})})}),n.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Total Revenue"}),n.jsxs("p",{className:"text-4xl font-black text-gray-900 leading-none",children:["â¹",i.toFixed(2)]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-50",children:n.jsx("span",{className:"text-xs font-bold text-green-500",children:"â 12% from last month"})})]}),n.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-100 flex flex-col justify-between overflow-hidden relative group",children:[n.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:scale-110 transition-transform",children:n.jsx("svg",{className:"w-12 h-12 text-yellow-600",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"})})}),n.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Pending Payout"}),n.jsxs("p",{className:"text-4xl font-black text-gray-900 leading-none",children:["â¹",l.toFixed(2)]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-50",children:n.jsx("span",{className:"text-xs font-bold text-gray-400 italic",children:"Processing current cycle"})})]}),n.jsxs("div",{className:"bg-purple-600 p-8 rounded-2xl shadow-xl shadow-purple-100 flex flex-col justify-between overflow-hidden relative group",children:[n.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 group-hover:scale-110 transition-transform",children:n.jsx("svg",{className:"w-12 h-12 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})})}),n.jsx("p",{className:"text-[10px] font-black text-purple-200 uppercase tracking-widest mb-1",children:"Available for Withdrawal"}),n.jsxs("p",{className:"text-4xl font-black text-white leading-none",children:["â¹",i.toFixed(2)]}),n.jsx("button",{className:"mt-4 w-full bg-white text-purple-600 font-black uppercase tracking-widest text-[10px] py-3 rounded-xl hover:bg-purple-50 transition-colors",children:"Withdraw Now"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-gray-50 flex justify-between items-center bg-gray-50/20",children:[n.jsx("h3",{className:"text-lg font-black text-gray-900 tracking-tight",children:"Recent Transactions"}),n.jsx("button",{className:"text-xs font-bold text-purple-600 uppercase tracking-widest",children:"Download Report"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full",children:[n.jsx("thead",{className:"bg-gray-50/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Transaction ID"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Date"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Type"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Amount"}),n.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-50",children:u.length>0?u.map(f=>n.jsxs("tr",{className:"hover:bg-gray-50/30 transition-colors",children:[n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-xs font-bold text-gray-900 font-mono",children:["#TX-",f.id.toUpperCase()]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-medium",children:f.date.toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 font-bold uppercase text-[10px] tracking-widest",children:f.type}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-black text-gray-900",children:["â¹",f.amount.toFixed(2)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"px-2 py-0.5 inline-flex text-[10px] leading-5 font-black uppercase tracking-widest rounded-full bg-green-100 text-green-700",children:f.status})})]},f.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-400 font-medium italic",children:"No transaction history found."})})})]})})]})]})})},Fp=()=>{const{addToCart:t}=Ct(),[e,r]=_.useState("2-layer 10 frame hive"),[s,a]=_.useState(""),[i,o]=_.useState("idle"),[l,c]=_.useState(1),[u,d]=_.useState(0),p={id:"beehive-starter-kit",name:"Beehive Wooden Box With Frames",rating:4.6,price:5e3,condition:"New",productId:"332024303",description:["Premium Beehive Materials: The exterior of the beehive is made of cedar wood with top-quality pine beehive frames with food-grade plastic foundation soaked in beeswax","Complete Beehive Kit: Our beehive kit includes a top cover, inner cover, bottom board, queen excluder, and entrance reducer for a complete bee hive starter kit","Metal Top Cover: Retractable galvanized metal top cover protects your 10 frame beehive and colonies from the effects of the outdoors","Standard Beehive Box Size: Deep Brood Boxes","Easy to Assemble: Pre-cut dovetails and pre-drilled holes for easy assembly, dovetail design makes the connection between the two boards stronger"],specs:{Brand:"Bee Bridge",Material:"Wood",Color:"Natural",Style:"Rustic",AssemblyRequired:"Yes"},images:[at,at,at,at,at,at]},f=()=>{s&&(o("checking"),setTimeout(()=>{s.length===6?o("available"):o("unavailable")},1e3))},h=()=>{t({id:p.id,name:p.name,description:p.description[0],price:p.price,category:"beehive",image_url:p.images[0],seller_id:"pollibee-official",stock:5,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),alert("Added to cart!")};return n.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-sm text-gray-500 mb-6 flex items-center gap-1",children:[n.jsx("span",{children:"Shop"})," ",n.jsx(Ln,{size:14})," ",n.jsx("span",{children:"Beekeeping"})," ",n.jsx(Ln,{size:14})," ",n.jsx("span",{className:"text-gray-900 font-medium",children:"Beehives"})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 lg:p-8",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12",children:[n.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-4",children:[n.jsxs("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden border border-gray-200 relative group",children:[n.jsx("img",{src:p.images[u],alt:"Product Main",className:"w-full h-full object-contain mix-blend-multiply p-4 transition-transform duration-300 group-hover:scale-105"}),n.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{className:"p-2 bg-white rounded-full shadow-md hover:text-red-500 transition-colors",children:n.jsx(Op,{size:20})}),n.jsx("button",{className:"p-2 bg-white rounded-full shadow-md hover:text-blue-500 transition-colors",children:n.jsx(Ap,{size:20})})]})]}),n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:p.images.map((m,g)=>n.jsx("button",{onClick:()=>d(g),className:`w-16 h-16 flex-shrink-0 border-2 rounded-md overflow-hidden ${u===g?"border-blue-600":"border-gray-200 hover:border-gray-400"}`,children:n.jsx("img",{src:m,alt:`Thumb ${g}`,className:"w-full h-full object-cover"})},g))})]}),n.jsxs("div",{className:"lg:col-span-5 flex flex-col gap-6 border-r border-gray-100 pr-0 lg:pr-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 leading-tight mb-2",children:p.name}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:[n.jsxs("div",{className:"flex items-center text-yellow-400",children:[n.jsx(Dn,{fill:"currentColor",size:16}),n.jsx("span",{className:"font-bold text-gray-900 ml-1",children:p.rating}),n.jsx("span",{className:"text-gray-500 font-normal ml-1",children:"/ 5"})]}),n.jsxs("span",{children:["Condition: ",n.jsx("span",{className:"font-medium text-gray-900",children:p.condition})]}),n.jsxs("span",{children:["Product ID: ",p.productId]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Size"}),n.jsx("div",{className:"flex flex-wrap gap-3",children:["2-layer 10 frame hive"].map(m=>n.jsx("button",{onClick:()=>r(m),className:`px-4 py-2 text-sm border rounded-lg transition-all ${e===m?"border-blue-600 bg-blue-50 text-blue-700 font-medium ring-1 ring-blue-600":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:m},m))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Details"}),n.jsx("div",{className:"space-y-3 text-sm",children:Object.entries(p.specs).map(([m,g])=>n.jsxs("div",{className:"flex border-b border-gray-100 pb-2 last:border-0 last:pb-0",children:[n.jsx("span",{className:"w-1/3 text-gray-500",children:m.replace(/([A-Z])/g," $1").trim()}),n.jsx("span",{className:"w-2/3 text-gray-900 font-medium text-right",children:g})]},m))})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:"About this item"}),n.jsx("ul",{className:"list-disc pl-5 text-sm text-blue-800 space-y-1",children:p.description.map((m,g)=>n.jsx("li",{children:m},g))})]})]}),n.jsx("div",{className:"lg:col-span-3",children:n.jsxs("div",{className:"border border-gray-200 rounded-xl p-6 shadow-sm bg-white sticky top-24",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"flex items-baseline gap-2 mb-1",children:n.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:["â¹",p.price.toLocaleString()]})}),n.jsxs("div",{className:"mb-6 bg-gray-50 p-3 rounded-lg border border-gray-100",children:[n.jsx("h4",{className:"font-semibold text-gray-900 text-sm mb-2",children:"Sold By"}),n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center text-yellow-700 font-bold border border-yellow-200",children:"BB"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Bee Bridge Official"}),n.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[n.jsx(Dn,{size:12,className:"text-yellow-400 fill-current mr-1"}),"4.8 (120 ratings)"]})]})]})]}),n.jsxs("div",{className:"text-sm text-green-600 mb-1 flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"In Stock"]}),n.jsx("div",{className:"text-xs text-gray-500",children:"Duties & taxes incl."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-2 uppercase tracking-wide",children:"Delivery Availability"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"Enter Pincode",maxLength:6,value:s,onChange:m=>a(m.target.value.replace(/\D/g,"")),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.jsx("button",{onClick:f,className:"px-4 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors",children:"Check"})]}),i==="checking"&&n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Checking..."}),i==="available"&&n.jsxs("p",{className:"text-xs text-green-600 mt-2 flex items-center gap-1",children:["â Delivery available to ",s]}),i==="unavailable"&&n.jsxs("p",{className:"text-xs text-red-500 mt-2",children:["â Delivery not available to ",s]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("button",{onClick:()=>c(Math.max(1,l-1)),className:"w-8 h-8 rounded border flex items-center justify-center hover:bg-gray-50",children:"-"}),n.jsx("span",{className:"font-medium",children:l}),n.jsx("button",{onClick:()=>c(Math.min(5,l+1)),className:"w-8 h-8 rounded border flex items-center justify-center hover:bg-gray-50",children:"+"})]}),n.jsxs("button",{onClick:h,className:"w-full py-3 bg-black text-white font-bold rounded-lg hover:bg-gray-800 transition-colors flex items-center justify-center gap-2",children:["Add to Cart | â¹",p.price.toLocaleString()]}),n.jsx("button",{className:"w-full py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200",children:"Get Seller Contact"})]}),n.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-100 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[n.jsx($p,{size:18}),n.jsx("span",{children:"Free Shipping"})]}),n.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[n.jsx(Rp,{size:18}),n.jsx("span",{children:"Secure Transaction"})]}),n.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[n.jsx(Tp,{size:18}),n.jsx("span",{children:"30 Days Return Policy"})]})]})]})})]})})]})})};function qp(){const[t,e]=_.useState(!1),r=hs(),{cartItems:s}=Ct(),{logout:a}=De(),i=()=>{e(!t)};if(r.pathname==="/login"||r.pathname==="/signup")return null;const o=["/applications","/products","/analytics","/earnings","/orders","/settings"].includes(r.pathname);return n.jsxs("nav",{className:"bg-honeybee-background/98 backdrop-blur-md shadow-xl fixed w-full z-50",children:[n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between h-14 md:h-16",children:[n.jsx("div",{className:"flex items-center",children:n.jsx(ge,{to:"/",className:"flex-shrink-0 flex items-center",children:n.jsx("span",{className:"font-serif text-lg md:text-xl lg:text-2xl font-bold text-honeybee-primary",children:"Bee Bridge"})})}),n.jsxs("div",{className:"hidden md:flex items-center space-x-4 lg:space-x-8",children:[n.jsx(ge,{to:"/home",className:`font-medium text-sm lg:text-base ${r.pathname==="/home"?"text-honeybee-primary":"text-honeybee-secondary hover:text-honeybee-accent"} transition duration-300`,children:"Home"}),n.jsx(ge,{to:"/shop",className:`font-medium text-sm lg:text-base ${r.pathname==="/shop"?"text-honeybee-primary":"text-honeybee-secondary hover:text-honeybee-accent"} transition duration-300`,children:"Shop"}),n.jsx(ge,{to:"/about",className:`font-medium text-sm lg:text-base ${r.pathname==="/about"?"text-honeybee-primary":"text-honeybee-secondary hover:text-honeybee-accent"} transition duration-300`,children:"About"}),!o&&n.jsx(ge,{to:"/seller",className:`font-medium text-sm lg:text-base ${r.pathname==="/seller"?"text-honeybee-primary":"text-honeybee-secondary hover:text-honeybee-accent"} transition duration-300`,children:"Seller"}),n.jsx(ge,{to:"/contact",className:`font-medium text-sm lg:text-base ${r.pathname==="/contact"?"text-honeybee-primary":"text-honeybee-secondary hover:text-honeybee-accent"} transition duration-300`,children:"Contact"}),n.jsx(ge,{to:"/subscription",className:`font-medium text-sm lg:text-base ${r.pathname==="/subscription"?"text-honeybee-primary":"text-honeybee-secondary hover:text-honeybee-accent"} transition duration-300`,children:"Subscription"})]}),n.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[n.jsxs(ge,{to:"/cart",className:"text-honeybee-secondary hover:text-honeybee-primary transition duration-300 relative p-2 md:p-0",children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),s.reduce((l,c)=>l+c.quantity,0)>0&&n.jsx("span",{className:"absolute -top-1 -right-1 md:-top-2 md:-right-2 bg-red-600 text-white rounded-full text-xs w-4 h-4 md:w-5 md:h-5 flex items-center justify-center",children:s.reduce((l,c)=>l+c.quantity,0)})]}),n.jsx(ge,{to:"/profile",className:"text-honeybee-secondary hover:text-honeybee-primary transition duration-300 p-2 md:p-0",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),n.jsxs("div",{className:"relative group hidden md:block",children:[n.jsxs("button",{className:"text-honeybee-secondary hover:text-honeybee-primary transition duration-300 flex items-center space-x-1 focus:outline-none p-2 md:p-0",children:[n.jsx(Pp,{className:"h-6 w-6"}),n.jsx("span",{className:"sr-only",children:"Settings"})]}),n.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity z-50",children:n.jsx("button",{className:"block w-full text-left px-4 py-2 text-honeybee-dark hover:bg-honeybee-light",onClick:async()=>{await a(),window.location.href="/login"},children:"Logout"})})]}),n.jsx("button",{onClick:i,className:"md:hidden text-honeybee-secondary hover:text-honeybee-primary p-2",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]})}),t&&n.jsx("div",{className:"md:hidden bg-honeybee-background/95 backdrop-blur-sm border-t border-honeybee-light",children:n.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[n.jsx(ge,{to:"/home",className:`block px-3 py-2 rounded-md font-medium ${r.pathname==="/home"?"text-honeybee-primary":"text-honeybee-secondary hover:text-honeybee-accent"}`,onClick:()=>e(!1),children:"Home"}),n.jsx(ge,{to:"/shop",className:`block px-3 py-2 rounded-md font-medium ${r.pathname==="/shop"?"text-honeybee-primary":"text-honeybee-secondary hover:text-honeybee-accent"}`,onClick:()=>e(!1),children:"Shop"}),n.jsx(ge,{to:"/about",className:`block px-3 py-2 rounded-md font-medium ${r.pathname==="/about"?"text-honeybee-primary":"text-honeybee-secondary hover:text-honeybee-accent"}`,onClick:()=>e(!1),children:"About"}),n.jsx(ge,{to:"/seller",className:`block px-3 py-2 rounded-md font-medium ${r.pathname==="/seller"?"text-honeybee-primary":"text-honeybee-secondary hover:text-honeybee-accent"}`,onClick:()=>e(!1),children:"Seller"}),n.jsx(ge,{to:"/contact",className:`block px-3 py-2 rounded-md font-medium ${r.pathname==="/contact"?"text-honeybee-primary":"text-honeybee-secondary hover:text-honeybee-accent"}`,onClick:()=>e(!1),children:"Contact"}),n.jsx(ge,{to:"/subscription",className:`block px-3 py-2 rounded-md font-medium ${r.pathname==="/subscription"?"text-honeybee-primary":"text-honeybee-secondary hover:text-honeybee-accent"}`,onClick:()=>e(!1),children:"Subscription"}),n.jsx(ge,{to:"/settings",className:`block px-3 py-2 rounded-md font-medium ${r.pathname==="/settings"?"text-honeybee-primary":"text-honeybee-secondary hover:text-honeybee-accent"}`,onClick:()=>e(!1),children:"Settings"}),n.jsx("button",{onClick:async()=>{await a(),window.location.href="/login",e(!1)},className:"block w-full text-left px-3 py-2 rounded-md font-medium text-honeybee-secondary hover:text-honeybee-accent",children:"Logout"})]})})]})}const Zp=()=>n.jsxs("footer",{className:"bg-gray-900 text-gray-300 py-10",children:[n.jsxs("div",{className:"max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-3 gap-8 border-b border-gray-700 pb-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase mb-4",children:"About"}),n.jsxs("ul",{className:"space-y-2 text-sm",children:[n.jsx("li",{children:n.jsx("a",{href:"/contact",className:"hover:text-white font-semibold",children:"Contact Us"})}),n.jsx("li",{children:n.jsx("a",{href:"/about",className:"hover:text-white font-semibold",children:"About Us"})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase mb-4",children:"Help"}),n.jsxs("ul",{className:"space-y-2 text-sm",children:[n.jsx("li",{children:n.jsx("a",{href:"/contact",className:"hover:text-white font-semibold",children:"Payments"})}),n.jsx("li",{children:n.jsx("a",{href:"/contact",className:"hover:text-white font-semibold",children:"Shipping"})}),n.jsx("li",{children:n.jsx("a",{href:"/contact",className:"hover:text-white font-semibold",children:"Cancellation & Returns"})}),n.jsx("li",{children:n.jsx("a",{href:"/contact",className:"hover:text-white font-semibold",children:"FAQ"})})]})]}),n.jsxs("div",{className:"border-l border-gray-700 pl-6",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase mb-4",children:"Mail Us:"}),n.jsx("address",{className:"not-italic text-sm space-y-1",children:n.jsx("p",{children:"beebridgeshop@gmail.com"})}),n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-sm font-semibold",children:"Social:"}),n.jsxs("div",{className:"flex space-x-4 mt-2",children:[n.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",className:"hover:text-white",children:n.jsx(Ep,{size:20})}),n.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter",className:"hover:text-white",children:n.jsx(Ip,{size:20})}),n.jsx("a",{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer","aria-label":"YouTube",className:"hover:text-white",children:n.jsx(zp,{size:20})}),n.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",className:"hover:text-white",children:n.jsx(Cp,{size:20})})]})]})]})]}),n.jsxs("div",{className:"max-w-7xl mx-auto px-6 flex flex-col md:flex-row items-center justify-between pt-6",children:[n.jsxs("div",{className:"flex space-x-8 text-yellow-400 text-sm font-semibold",children:[n.jsx("a",{href:"/seller",className:"flex items-center space-x-2 hover:underline",children:n.jsx("span",{children:"Become a Seller"})}),n.jsx("a",{href:"/contact",className:"flex items-center space-x-2 hover:underline",children:n.jsx("span",{children:"Help Center"})})]}),n.jsx("div",{className:"text-gray-400 text-sm mt-4 md:mt-0",children:"Â© 2025 Bee Bridge.com"})]})]}),Be=({children:t,backgroundImage:e})=>{const r=hs();return n.jsxs("div",{className:"min-h-screen flex flex-col",style:e?{backgroundImage:`url(${e})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"}:{},children:[n.jsx(qp,{}),n.jsx("main",{className:"pt-14 pb-20",children:t}),r.pathname==="/seller"&&n.jsx("div",{className:"h-screen"}),r.pathname!=="/seller"&&n.jsx("div",{className:"mt-24",children:n.jsx(Zp,{})})]})},Wp=()=>{const[t,e]=_.useState(""),[r,s]=_.useState(""),[a,i]=_.useState(!1),[o,l]=_.useState(null),[c,u]=_.useState(null),[d,p]=_.useState(!1),[f,h]=_.useState(!1),m=Ke(),{signInWithEmail:g,signInWithGoogle:b,resetPassword:k}=De(),[w,y]=_.useState(!1),[N,S]=_.useState("");_.useEffect(()=>{const A=new Image;A.src="https://developers.google.com/identity/images/g-logo.png",A.onload=()=>p(!0)},[]);const I=async A=>{A.preventDefault(),l(null),u(null);const D=Nt.check("login",{limit:10,windowMs:60*1e3});if(!D.allowed){const G=Nt.getWaitTimeSeconds(D.resetTime);l(`Too many login attempts. Please wait ${G} seconds.`);return}const W=Zd.safeParse({email:t,password:r});if(!W.success){l(W.error.issues[0].message);return}try{await g(W.data.email,W.data.password),u("Login successful! Redirecting..."),setTimeout(()=>m("/home"),2e3)}catch(G){console.error("Login error:",G);let ne="Login failed. Please try again.";G.message&&(G.message==="Invalid login credentials"?ne="Invalid email or password. Please check your credentials.":ne=G.message),l(ne)}},B=async()=>{h(!0);try{await b(),m("/home")}catch(A){console.error("Google login process failed:",A),l("Google login failed. Please try again.")}finally{h(!1)}},J=async A=>{if(A.preventDefault(),!te(N)){l("Please enter your email address.");return}try{await k(N),l("Password reset email sent! Check your inbox."),y(!1),S("")}catch{l("Failed to send reset email. Please try again.")}};return n.jsxs("div",{className:"min-h-screen bg-[#FFF8E7] flex items-center justify-center px-4 relative",children:[n.jsxs("div",{className:"max-w-5xl w-full bg-gray-50 rounded-3xl shadow-2xl flex overflow-hidden",children:[n.jsxs("div",{className:"w-full md:w-1/2 p-10 flex flex-col justify-center",children:[n.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Hello Again!"}),c&&n.jsx("div",{className:"text-sm text-center mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-600",children:c}),o&&n.jsx("div",{className:"text-sm text-center mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-600",children:o}),n.jsxs("form",{onSubmit:I,className:"space-y-6",children:[n.jsx("div",{children:n.jsx("input",{type:"email",id:"email",value:t,onChange:A=>e(A.target.value),required:!0,placeholder:"Email",className:"w-full px-4 py-3 rounded-lg border border-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-400 bg-white"})}),n.jsx("div",{children:n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:a?"text":"password",id:"password",value:r,onChange:A=>s(A.target.value),required:!0,placeholder:"Password",className:"w-full px-4 py-3 rounded-lg border border-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-400 bg-white"}),n.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600 focus:outline-none","aria-label":a?"Hide password":"Show password",children:a?n.jsx(Ii,{className:"h-5 w-5"}):n.jsx($i,{className:"h-5 w-5"})})]})}),n.jsx("div",{children:n.jsx("div",{onClick:()=>y(!0),className:"text-right text-xs text-gray-500 mb-4 cursor-pointer hover:underline",children:"Recovery Password"})}),n.jsx("div",{children:n.jsx(je,{type:"submit",variant:"primary",className:"w-full font-semibold",children:"Sign In"})})]}),n.jsx("div",{className:"mt-4 text-center",children:n.jsxs("span",{className:"text-gray-600 text-sm",children:["Don't have an account?"," ",n.jsx(je,{onClick:()=>m("/signup"),variant:"ghost",className:"text-honeybee-primary hover:underline font-semibold p-0",children:"Sign Up"})]})}),n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("hr",{className:"flex-grow border-gray-300"}),n.jsx("span",{className:"mx-4 text-gray-400 text-sm",children:"Or continue with"}),n.jsx("hr",{className:"flex-grow border-gray-300"})]}),n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:B,className:"p-2 hover:opacity-80 transition-opacity disabled:opacity-50",disabled:f,"aria-label":"Sign in with Google",children:f?n.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):d?n.jsx("img",{src:"https://developers.google.com/identity/images/g-logo.png",alt:"Google",className:"w-6 h-6"}):n.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded animate-pulse"})})})]}),n.jsx("div",{className:"hidden md:flex md:w-1/2 relative rounded-r-3xl overflow-hidden border-8 border-white shadow-lg",children:Zt.createElement("dotlottie-wc",{src:"https://lottie.host/415db1e3-d9d5-4073-b9fe-099abfe8c66c/XtpXv9SgcE.lottie",style:{width:"100%",height:"100%"},autoplay:!0,loop:!0})})]}),w&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Reset Password"}),n.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Enter your email address and we'll send you a link to reset your password."}),n.jsxs("form",{onSubmit:J,className:"space-y-4",children:[n.jsx("input",{type:"email",value:N,onChange:A=>S(A.target.value),placeholder:"Email address",required:!0,className:"w-full px-4 py-3 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-pink-400"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"submit",className:"flex-1 bg-pink-500 text-white py-2 rounded-lg hover:bg-pink-600",children:"Send Reset Link"}),n.jsx("button",{type:"button",onClick:()=>y(!1),className:"flex-1 bg-gray-300 py-2 rounded-lg",children:"Cancel"})]})]})]})})]})},Vp=()=>{const[t,e]=_.useState(""),[r,s]=_.useState(""),[a,i]=_.useState(""),[o,l]=_.useState(!1),[c,u]=_.useState(!1),[d,p]=_.useState(null),[f,h]=_.useState(null),m=Ke(),{signUpWithEmail:g,signInWithGoogle:b}=De(),k=async y=>{y.preventDefault(),u(!0),p(null),h(null);const N=Nt.check("signup",{limit:3,windowMs:60*1e3});if(!N.allowed){const I=Nt.getWaitTimeSeconds(N.resetTime);p(`Too many attempts. Please wait ${I} seconds (Rate Limit 429).`),u(!1);return}const S=qd.safeParse({name:t,email:r,password:a});if(!S.success){p(S.error.issues[0].message),u(!1);return}try{await g(S.data.name,S.data.email,S.data.password),u(!1),localStorage.setItem("justSignedUp","true"),h("Account created successfully! Redirecting to Login..."),setTimeout(()=>{localStorage.removeItem("justSignedUp"),m("/login")},2e3)}catch(I){console.error("Sign up error:",I);let B="Sign up failed. Please try again.";I.message&&(B=I.message),p(B),u(!1)}},w=async()=>{p(null);try{await b()}catch(y){console.error("Google sign up error:",y),p("Google sign up failed. Please try again.")}};return n.jsx("div",{className:"min-h-screen gradient-bg-warm flex items-center justify-center px-4",children:n.jsxs("div",{className:"max-w-5xl w-full glass-effect rounded-3xl modern-shadow flex overflow-hidden",children:[n.jsxs("div",{className:"w-full md:w-1/2 p-10 flex flex-col justify-center",children:[n.jsx("h1",{className:"text-4xl font-bold vibrant-text mb-6 text-center",children:"Create Account"}),f&&n.jsx("div",{className:"text-sm text-center mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-600",children:f}),d&&n.jsx("div",{className:"text-sm text-center mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-600",children:d}),n.jsxs("form",{onSubmit:k,className:"space-y-6",children:[n.jsx("div",{children:n.jsx("input",{type:"text",id:"name",value:t,onChange:y=>e(y.target.value),required:!0,placeholder:"Your full name",className:"w-full px-4 py-3 rounded-lg border border-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-400 bg-white"})}),n.jsx("div",{children:n.jsx("input",{type:"email",id:"email",value:r,onChange:y=>s(y.target.value),required:!0,placeholder:"Email",className:"w-full px-4 py-3 rounded-lg border border-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-400 bg-white"})}),n.jsx("div",{children:n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:o?"text":"password",id:"password",value:a,onChange:y=>i(y.target.value),required:!0,placeholder:"Password",className:"w-full px-4 py-3 rounded-lg border border-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-400 bg-white"}),n.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600 focus:outline-none","aria-label":o?"Hide password":"Show password",children:o?n.jsx(Ii,{className:"h-5 w-5"}):n.jsx($i,{className:"h-5 w-5"})})]})}),n.jsx("div",{children:n.jsx(je,{type:"submit",variant:"primary",className:"w-full font-semibold",disabled:c,children:c?"Creating Account...":"Sign Up"})})]}),n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("hr",{className:"flex-grow border-gray-300"}),n.jsx("span",{className:"mx-4 text-gray-400 text-sm",children:"Or continue with"}),n.jsx("hr",{className:"flex-grow border-gray-300"})]}),n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:w,className:"p-3 shadow-md bg-white hover:shadow-lg rounded-lg transition-shadow","aria-label":"Sign up with Google",children:n.jsx("img",{src:"https://developers.google.com/identity/images/g-logo.png",alt:"Google",className:"w-5 h-5"})})}),n.jsx("div",{className:"mt-4 text-center",children:n.jsxs("span",{className:"text-gray-600 text-sm",children:["Already have an account?"," ",n.jsx(je,{onClick:()=>m("/login"),variant:"ghost",className:"text-honeybee-primary hover:underline font-semibold p-0",children:"Sign In"})]})})]}),n.jsx("div",{className:"hidden md:block md:w-1/2 relative rounded-r-3xl overflow-hidden border-8 border-white shadow-lg",children:Zt.createElement("dotlottie-wc",{src:"https://lottie.host/415db1e3-d9d5-4073-b9fe-099abfe8c66c/XtpXv9SgcE.lottie",style:{width:"100%",height:"100%"},autoplay:!0,loop:!0})})]})})},zi=({type:t="card",count:e=1,className:r=""})=>{const s=Array.from({length:e},(a,i)=>n.jsxs("div",{className:`animate-pulse ${r} ${t==="card"?"bg-gray-200 rounded-xl p-6 space-y-4":t==="list"?"bg-gray-200 rounded-lg p-4 space-y-3":"bg-gray-200 rounded h-4"}`,children:[t==="card"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-6 bg-gray-300 rounded w-3/4"}),n.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"}),n.jsx("div",{className:"h-4 bg-gray-300 rounded w-full"}),n.jsx("div",{className:"h-4 bg-gray-300 rounded w-2/3"}),n.jsx("div",{className:"h-10 bg-gray-300 rounded"})]}),t==="list"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded w-full"}),n.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),n.jsx("div",{className:"h-4 bg-gray-300 rounded w-5/6"})]}),t==="text"&&n.jsx("div",{className:"h-4 bg-gray-300 rounded"})]},i));return n.jsx(n.Fragment,{children:s})},xt=({children:t})=>{const{seller:e,loading:r}=He(),s=Ke();return localStorage.getItem("justRegisteredSeller")==="true"?(localStorage.removeItem("justRegisteredSeller"),n.jsx(n.Fragment,{children:t})):r?n.jsx(zi,{}):e?e.is_approved?n.jsx(n.Fragment,{children:t}):["/applications","/settings"].includes(location.pathname)?n.jsx(n.Fragment,{children:t}):n.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center items-center p-4",children:n.jsxs("div",{className:"bg-white max-w-md w-full rounded-2xl shadow-xl p-8 text-center border border-gray-100",children:[n.jsx("div",{className:"w-20 h-20 bg-yellow-50 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx("svg",{className:"w-10 h-10 text-yellow-500 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Verification Pending"}),n.jsx("div",{className:"w-16 h-1 bg-gradient-to-r from-yellow-400 to-orange-500 mx-auto rounded-full mb-6"}),n.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"Your seller account is currently under review by our admin team. Access to dashboard features is restricted until verification is complete."}),n.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-8 text-left",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("svg",{className:"w-5 h-5 text-blue-500 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("p",{className:"text-sm text-blue-700",children:"You will receive an email notification once your account has been approved. This usually takes 24-48 hours."})]})}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full bg-white border border-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-xl hover:bg-gray-50 transition-colors duration-200 flex items-center justify-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Check Status Again"]}),n.jsx("button",{onClick:()=>s("/home"),className:"w-full bg-gradient-to-r from-gray-800 to-gray-900 text-white font-semibold py-3 px-6 rounded-xl hover:shadow-lg transition-all duration-200",children:"Return to Home"})]}),n.jsxs("p",{className:"mt-8 text-xs text-gray-400",children:["Seller ID: ",n.jsx("span",{className:"font-mono text-gray-500",children:e.seller_id})]})]})}):n.jsx(oe,{to:"/seller",replace:!0})};console.log("Fresh Code Loaded: v2 - Fixed Price Type");const Hp="https://media.istockphoto.com/id/1669258600/vector/illustration-of-delicious-melted-chocolate-on-white-background.jpg?s=612x612&w=0&k=20&c=oykGVJHBjHuevHVi2GE8jFmCe0EpX2unEfhMPCFFeik=";function Jp(){const{user:t,loading:e}=De(),r=localStorage.getItem("justLoggedOut")==="true",s=localStorage.getItem("justSignedUp")==="true";return r&&!t&&localStorage.removeItem("justLoggedOut"),e?n.jsx(zi,{}):n.jsxs(Ki,{children:[n.jsx(pe,{path:"/",element:t?n.jsx(oe,{to:"/home"}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/login",element:!t||r?n.jsx(Wp,{}):n.jsx(oe,{to:"/home"})}),n.jsx(pe,{path:"/signup",element:t&&!s?n.jsx(oe,{to:"/home"}):n.jsx(Vp,{})}),n.jsx(pe,{path:"/home",element:t?n.jsx(Be,{children:n.jsx(oo,{})}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/about",element:t?n.jsx(Be,{children:n.jsx(lo,{})}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/contact",element:t?n.jsx(Be,{children:n.jsx(Gd,{})}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/shop",element:t?n.jsx(Be,{children:n.jsx(hp,{})}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/cart",element:t?n.jsx(Be,{children:n.jsx(fp,{})}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/checkout",element:t?n.jsx(Be,{children:n.jsx(gp,{})}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/profile",element:t?n.jsx(Be,{children:n.jsx(xp,{})}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/seller",element:t?n.jsx(Be,{backgroundImage:Hp,children:n.jsx(yp,{})}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/applications",element:t?n.jsx(xt,{children:n.jsx(jp,{})}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/orders",element:t?n.jsx(xt,{children:n.jsx(kp,{})}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/subscription",element:t?n.jsx(Be,{children:n.jsx(Lp,{})}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/settings",element:t?n.jsx(xt,{children:n.jsx(Dp,{})}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/products",element:t?n.jsx(xt,{children:n.jsx(Up,{})}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/product/beehive",element:t?n.jsx(Be,{children:n.jsx(Fp,{})}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/analytics",element:t?n.jsx(xt,{children:n.jsx(Mp,{})}):n.jsx(oe,{to:"/login"})}),n.jsx(pe,{path:"/earnings",element:t?n.jsx(xt,{children:n.jsx(Bp,{})}):n.jsx(oe,{to:"/login"})})]})}function Gp(){return n.jsx(Kd,{children:n.jsx(Gi,{children:n.jsx(Jp,{})})})}class Kp extends _.Component{state={hasError:!1,error:null};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("Uncaught error:",e,r)}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50 p-4",children:n.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-xl p-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"The application encountered an error and cannot display."}),n.jsx("div",{className:"bg-gray-100 p-4 rounded overflow-auto max-h-48 mb-4",children:n.jsx("code",{className:"text-sm text-red-800 font-mono",children:this.state.error?.toString()})}),n.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors",children:"Reload Page"})]})}):this.props.children}}const Yp="378321462417-7jtv3gdf4ur8fnmv3dl11q9d5omujotd.apps.googleusercontent.com";to.createRoot(document.getElementById("root")).render(n.jsx(_.StrictMode,{children:n.jsx(no,{clientId:Yp,children:n.jsx(Kp,{children:n.jsx(pp,{children:n.jsx(Gp,{})})})})}))});export default Xp();
